{"file_contents":{"client/src/components/examples/BlockchainStatus.tsx":{"content":"import BlockchainStatus from '../BlockchainStatus';\n\nexport default function BlockchainStatusExample() {\n  return (\n    <div className=\"space-y-4 p-6\">\n      <BlockchainStatus />\n      <div className=\"pt-4\">\n        <BlockchainStatus compact />\n      </div>\n    </div>\n  );\n}\n","size_bytes":276},"contracts/ShipmentTracking.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\n/**\n * @title ShipmentTracking\n * @dev Smart contract for recording and verifying shipment events on blockchain\n * @notice Provides immutable tracking of cargo movements and status updates\n */\ncontract ShipmentTracking {\n    \n    // Struct for Shipment Event\n    struct ShipmentEvent {\n        string eventType;        // e.g., \"Loaded\", \"Departed\", \"In Transit\", \"Arrived\"\n        string location;\n        string description;\n        uint256 timestamp;\n        address recordedBy;\n        bool verified;\n    }\n    \n    // Struct for Shipment\n    struct Shipment {\n        string shipmentId;\n        string blNumber;         // Reference to Bill of Lading\n        string containerNumber;\n        address shipper;\n        address carrier;\n        uint256 createdAt;\n        ShipmentStatus status;\n        bool exists;\n    }\n    \n    // Enum for Shipment Status\n    enum ShipmentStatus {\n        Created,\n        Loaded,\n        InTransit,\n        AtPort,\n        CustomsClearance,\n        OutForDelivery,\n        Delivered\n    }\n    \n    // Mapping from shipment ID to Shipment\n    mapping(string => Shipment) private shipments;\n    \n    // Mapping from shipment ID to array of events\n    mapping(string => ShipmentEvent[]) private shipmentEvents;\n    \n    // Mapping to track authorized recorders for each shipment\n    mapping(string => mapping(address => bool)) private authorizedRecorders;\n    \n    // Array of all shipment IDs\n    string[] private shipmentIds;\n    \n    // Events\n    event ShipmentCreated(\n        string indexed shipmentId,\n        string blNumber,\n        address indexed shipper,\n        address indexed carrier,\n        uint256 timestamp\n    );\n    \n    event EventRecorded(\n        string indexed shipmentId,\n        string eventType,\n        string location,\n        address indexed recordedBy,\n        uint256 timestamp\n    );\n    \n    event StatusUpdated(\n        string indexed shipmentId,\n        ShipmentStatus newStatus,\n        uint256 timestamp\n    );\n    \n    event RecorderAuthorized(\n        string indexed shipmentId,\n        address indexed recorder,\n        uint256 timestamp\n    );\n    \n    event EventVerified(\n        string indexed shipmentId,\n        uint256 eventIndex,\n        address indexed verifier,\n        uint256 timestamp\n    );\n    \n    // Modifiers\n    modifier onlyShipper(string memory _shipmentId) {\n        require(\n            shipments[_shipmentId].shipper == msg.sender,\n            \"Only shipper can perform this action\"\n        );\n        _;\n    }\n    \n    modifier onlyAuthorizedRecorder(string memory _shipmentId) {\n        require(\n            authorizedRecorders[_shipmentId][msg.sender] ||\n            shipments[_shipmentId].shipper == msg.sender ||\n            shipments[_shipmentId].carrier == msg.sender,\n            \"Not authorized to record events\"\n        );\n        _;\n    }\n    \n    modifier shipmentExists(string memory _shipmentId) {\n        require(shipments[_shipmentId].exists, \"Shipment does not exist\");\n        _;\n    }\n    \n    /**\n     * @dev Create a new shipment\n     * @param _shipmentId Unique shipment identifier\n     * @param _blNumber Associated Bill of Lading number\n     * @param _containerNumber Container number\n     * @param _carrier Address of the carrier\n     */\n    function createShipment(\n        string memory _shipmentId,\n        string memory _blNumber,\n        string memory _containerNumber,\n        address _carrier\n    ) public {\n        require(!shipments[_shipmentId].exists, \"Shipment already exists\");\n        require(_carrier != address(0), \"Invalid carrier address\");\n        \n        Shipment memory newShipment = Shipment({\n            shipmentId: _shipmentId,\n            blNumber: _blNumber,\n            containerNumber: _containerNumber,\n            shipper: msg.sender,\n            carrier: _carrier,\n            createdAt: block.timestamp,\n            status: ShipmentStatus.Created,\n            exists: true\n        });\n        \n        shipments[_shipmentId] = newShipment;\n        shipmentIds.push(_shipmentId);\n        \n        // Authorize shipper and carrier\n        authorizedRecorders[_shipmentId][msg.sender] = true;\n        authorizedRecorders[_shipmentId][_carrier] = true;\n        \n        emit ShipmentCreated(\n            _shipmentId,\n            _blNumber,\n            msg.sender,\n            _carrier,\n            block.timestamp\n        );\n        \n        emit RecorderAuthorized(_shipmentId, msg.sender, block.timestamp);\n        emit RecorderAuthorized(_shipmentId, _carrier, block.timestamp);\n    }\n    \n    /**\n     * @dev Record a new shipment event\n     * @param _shipmentId Shipment identifier\n     * @param _eventType Type of event\n     * @param _location Location of event\n     * @param _description Event description\n     */\n    function recordEvent(\n        string memory _shipmentId,\n        string memory _eventType,\n        string memory _location,\n        string memory _description\n    ) public onlyAuthorizedRecorder(_shipmentId) shipmentExists(_shipmentId) {\n        ShipmentEvent memory newEvent = ShipmentEvent({\n            eventType: _eventType,\n            location: _location,\n            description: _description,\n            timestamp: block.timestamp,\n            recordedBy: msg.sender,\n            verified: false\n        });\n        \n        shipmentEvents[_shipmentId].push(newEvent);\n        \n        emit EventRecorded(\n            _shipmentId,\n            _eventType,\n            _location,\n            msg.sender,\n            block.timestamp\n        );\n    }\n    \n    /**\n     * @dev Update shipment status\n     * @param _shipmentId Shipment identifier\n     * @param _newStatus New shipment status\n     */\n    function updateStatus(\n        string memory _shipmentId,\n        ShipmentStatus _newStatus\n    ) public onlyAuthorizedRecorder(_shipmentId) shipmentExists(_shipmentId) {\n        require(\n            uint(_newStatus) > uint(shipments[_shipmentId].status),\n            \"Cannot downgrade status\"\n        );\n        \n        shipments[_shipmentId].status = _newStatus;\n        \n        emit StatusUpdated(_shipmentId, _newStatus, block.timestamp);\n    }\n    \n    /**\n     * @dev Authorize a party to record events\n     * @param _shipmentId Shipment identifier\n     * @param _recorder Address to authorize\n     */\n    function authorizeRecorder(string memory _shipmentId, address _recorder)\n        public\n        onlyShipper(_shipmentId)\n        shipmentExists(_shipmentId)\n    {\n        require(_recorder != address(0), \"Invalid recorder address\");\n        \n        authorizedRecorders[_shipmentId][_recorder] = true;\n        \n        emit RecorderAuthorized(_shipmentId, _recorder, block.timestamp);\n    }\n    \n    /**\n     * @dev Verify an event (e.g., by customs or port authority)\n     * @param _shipmentId Shipment identifier\n     * @param _eventIndex Index of the event to verify\n     */\n    function verifyEvent(string memory _shipmentId, uint256 _eventIndex)\n        public\n        onlyAuthorizedRecorder(_shipmentId)\n        shipmentExists(_shipmentId)\n    {\n        require(_eventIndex < shipmentEvents[_shipmentId].length, \"Invalid event index\");\n        \n        shipmentEvents[_shipmentId][_eventIndex].verified = true;\n        \n        emit EventVerified(_shipmentId, _eventIndex, msg.sender, block.timestamp);\n    }\n    \n    /**\n     * @dev Get shipment details\n     * @param _shipmentId Shipment identifier\n     * @return Shipment struct\n     */\n    function getShipment(string memory _shipmentId)\n        public\n        view\n        shipmentExists(_shipmentId)\n        returns (Shipment memory)\n    {\n        return shipments[_shipmentId];\n    }\n    \n    /**\n     * @dev Get all events for a shipment\n     * @param _shipmentId Shipment identifier\n     * @return Array of ShipmentEvent\n     */\n    function getShipmentEvents(string memory _shipmentId)\n        public\n        view\n        shipmentExists(_shipmentId)\n        returns (ShipmentEvent[] memory)\n    {\n        return shipmentEvents[_shipmentId];\n    }\n    \n    /**\n     * @dev Get event count for a shipment\n     * @param _shipmentId Shipment identifier\n     * @return uint256 Number of events\n     */\n    function getEventCount(string memory _shipmentId)\n        public\n        view\n        shipmentExists(_shipmentId)\n        returns (uint256)\n    {\n        return shipmentEvents[_shipmentId].length;\n    }\n    \n    /**\n     * @dev Check if address is authorized recorder\n     * @param _shipmentId Shipment identifier\n     * @param _recorder Address to check\n     * @return bool True if authorized\n     */\n    function isAuthorizedRecorder(string memory _shipmentId, address _recorder)\n        public\n        view\n        shipmentExists(_shipmentId)\n        returns (bool)\n    {\n        return authorizedRecorders[_shipmentId][_recorder];\n    }\n    \n    /**\n     * @dev Get current shipment status\n     * @param _shipmentId Shipment identifier\n     * @return ShipmentStatus Current status\n     */\n    function getStatus(string memory _shipmentId)\n        public\n        view\n        shipmentExists(_shipmentId)\n        returns (ShipmentStatus)\n    {\n        return shipments[_shipmentId].status;\n    }\n    \n    /**\n     * @dev Get total number of shipments\n     * @return uint256 Total count\n     */\n    function getTotalShipments() public view returns (uint256) {\n        return shipmentIds.length;\n    }\n    \n    /**\n     * @dev Get the latest event for a shipment\n     * @param _shipmentId Shipment identifier\n     * @return ShipmentEvent Latest event or empty struct if no events\n     */\n    function getLatestEvent(string memory _shipmentId)\n        public\n        view\n        shipmentExists(_shipmentId)\n        returns (ShipmentEvent memory)\n    {\n        uint256 eventCount = shipmentEvents[_shipmentId].length;\n        if (eventCount == 0) {\n            return ShipmentEvent(\"\", \"\", \"\", 0, address(0), false);\n        }\n        return shipmentEvents[_shipmentId][eventCount - 1];\n    }\n}\n","size_bytes":10022},"client/src/components/BillOfLadingForm.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useState } from \"react\";\n\ninterface BillOfLadingFormProps {\n  instructionsData?: any;\n  onDraft?: (data: BillOfLadingData) => void;\n  onFinalize?: (data: BillOfLadingData) => void;\n}\n\nexport interface BillOfLadingData {\n  bolNumber: string;\n  vesselName: string;\n  voyageNumber: string;\n  shipperName: string;\n  consigneeName: string;\n  notifyParty: string;\n  origin: string;\n  destination: string;\n  containerNumber: string;\n  sealNumber: string;\n  packageCount: string;\n  weight: string;\n  cargoDescription: string;\n  freightTerms: string;\n}\n\nexport default function BillOfLadingForm({ instructionsData, onDraft, onFinalize }: BillOfLadingFormProps) {\n  const [formData, setFormData] = useState<BillOfLadingData>({\n    bolNumber: `BOL-2024-${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`,\n    vesselName: '',\n    voyageNumber: '',\n    shipperName: instructionsData?.shipperName || '',\n    consigneeName: instructionsData?.consigneeName || '',\n    notifyParty: '',\n    origin: instructionsData?.origin || '',\n    destination: instructionsData?.destination || '',\n    containerNumber: instructionsData?.containerNumber || '',\n    sealNumber: '',\n    packageCount: '',\n    weight: instructionsData?.weight || '',\n    cargoDescription: instructionsData?.cargoDescription || '',\n    freightTerms: 'prepaid',\n  });\n\n  const handleDraft = () => {\n    console.log('Bill of Lading draft saved:', formData);\n    onDraft?.(formData);\n  };\n\n  const handleFinalize = () => {\n    console.log('Bill of Lading finalized:', formData);\n    onFinalize?.(formData);\n  };\n\n  return (\n    <Card data-testid=\"card-bol-form\">\n      <CardHeader>\n        <CardTitle>Draft Bill of Lading</CardTitle>\n        <CardDescription>\n          Create a Bill of Lading based on shipping instructions. All changes are recorded on the blockchain.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"bolNumber\">BoL Number</Label>\n              <Input\n                id=\"bolNumber\"\n                value={formData.bolNumber}\n                onChange={(e) => setFormData({ ...formData, bolNumber: e.target.value })}\n                className=\"font-mono\"\n                data-testid=\"input-bol-number\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"vesselName\">Vessel Name</Label>\n              <Input\n                id=\"vesselName\"\n                placeholder=\"e.g., MSC Oscar\"\n                value={formData.vesselName}\n                onChange={(e) => setFormData({ ...formData, vesselName: e.target.value })}\n                data-testid=\"input-vessel-name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"voyageNumber\">Voyage Number</Label>\n              <Input\n                id=\"voyageNumber\"\n                placeholder=\"e.g., V001\"\n                value={formData.voyageNumber}\n                onChange={(e) => setFormData({ ...formData, voyageNumber: e.target.value })}\n                data-testid=\"input-voyage-number\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-4 p-4 border border-border rounded-md\">\n            <h3 className=\"font-semibold text-sm\">Party Details</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"shipperName\">Shipper</Label>\n                <Input\n                  id=\"shipperName\"\n                  value={formData.shipperName}\n                  onChange={(e) => setFormData({ ...formData, shipperName: e.target.value })}\n                  data-testid=\"input-bol-shipper\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"consigneeName\">Consignee</Label>\n                <Input\n                  id=\"consigneeName\"\n                  value={formData.consigneeName}\n                  onChange={(e) => setFormData({ ...formData, consigneeName: e.target.value })}\n                  data-testid=\"input-bol-consignee\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"notifyParty\">Notify Party</Label>\n                <Input\n                  id=\"notifyParty\"\n                  placeholder=\"Party to notify\"\n                  value={formData.notifyParty}\n                  onChange={(e) => setFormData({ ...formData, notifyParty: e.target.value })}\n                  data-testid=\"input-notify-party\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4 p-4 border border-border rounded-md\">\n            <h3 className=\"font-semibold text-sm\">Route & Container</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"origin\">Port of Loading</Label>\n                <Input\n                  id=\"origin\"\n                  value={formData.origin}\n                  onChange={(e) => setFormData({ ...formData, origin: e.target.value })}\n                  data-testid=\"input-bol-origin\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"destination\">Port of Discharge</Label>\n                <Input\n                  id=\"destination\"\n                  value={formData.destination}\n                  onChange={(e) => setFormData({ ...formData, destination: e.target.value })}\n                  data-testid=\"input-bol-destination\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"containerNumber\">Container Number</Label>\n                <Input\n                  id=\"containerNumber\"\n                  value={formData.containerNumber}\n                  onChange={(e) => setFormData({ ...formData, containerNumber: e.target.value })}\n                  className=\"font-mono\"\n                  data-testid=\"input-bol-container\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"sealNumber\">Seal Number</Label>\n                <Input\n                  id=\"sealNumber\"\n                  placeholder=\"e.g., SL123456\"\n                  value={formData.sealNumber}\n                  onChange={(e) => setFormData({ ...formData, sealNumber: e.target.value })}\n                  data-testid=\"input-seal-number\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4 p-4 border border-border rounded-md\">\n            <h3 className=\"font-semibold text-sm\">Cargo Information</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"packageCount\">Number of Packages</Label>\n                <Input\n                  id=\"packageCount\"\n                  type=\"number\"\n                  placeholder=\"e.g., 100\"\n                  value={formData.packageCount}\n                  onChange={(e) => setFormData({ ...formData, packageCount: e.target.value })}\n                  data-testid=\"input-package-count\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"weight\">Gross Weight (kg)</Label>\n                <Input\n                  id=\"weight\"\n                  type=\"number\"\n                  value={formData.weight}\n                  onChange={(e) => setFormData({ ...formData, weight: e.target.value })}\n                  data-testid=\"input-bol-weight\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"freightTerms\">Freight Terms</Label>\n                <Select \n                  value={formData.freightTerms} \n                  onValueChange={(value) => setFormData({ ...formData, freightTerms: value })}\n                >\n                  <SelectTrigger id=\"freightTerms\" data-testid=\"select-freight-terms\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"prepaid\">Prepaid</SelectItem>\n                    <SelectItem value=\"collect\">Collect</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"cargoDescription\">Cargo Description</Label>\n              <Textarea\n                id=\"cargoDescription\"\n                value={formData.cargoDescription}\n                onChange={(e) => setFormData({ ...formData, cargoDescription: e.target.value })}\n                className=\"min-h-[80px]\"\n                data-testid=\"input-bol-cargo-description\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              className=\"flex-1\"\n              onClick={handleDraft}\n              data-testid=\"button-draft-bol\"\n            >\n              Save Draft\n            </Button>\n            <Button \n              type=\"button\" \n              className=\"flex-1\"\n              onClick={handleFinalize}\n              data-testid=\"button-finalize-bol\"\n            >\n              Finalize & Share\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":10021},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/pages/Dashboard.tsx":{"content":"import DashboardStats from '@/components/DashboardStats';\nimport BlockchainStatus from '@/components/BlockchainStatus';\nimport BillOfLadingCard from '@/components/BillOfLadingCard';\nimport ShipmentTracker from '@/components/ShipmentTracker';\nimport TradeFinancePanel from '@/components/TradeFinancePanel';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { PlusCircle, Filter, Package, Ship, FileCheck, Building2, Anchor, Truck, AlertCircle, CheckCircle, Loader2 } from 'lucide-react';\nimport { Link } from 'wouter';\nimport { mockBillsOfLading, mockShipmentEvents, mockTradeFinance } from '@/lib/mockData';\nimport { useQuery } from '@tanstack/react-query';\nimport type { BillOfLading } from '@shared/schema';\n\ninterface DashboardProps {\n  currentRole: string;\n}\n\nexport default function Dashboard({ currentRole }: DashboardProps) {\n  const getRoleInfo = () => {\n    const roleMap = {\n      shipper: {\n        title: 'Shipper Dashboard',\n        description: 'Manage your Bills of Lading, track shipments, and monitor blockchain transactions',\n        icon: Package,\n      },\n      carrier: {\n        title: 'Carrier Dashboard',\n        description: 'Manage vessel operations, update shipment status, and handle Bills of Lading',\n        icon: Ship,\n      },\n      freight_forwarder: {\n        title: 'Freight Forwarder Dashboard',\n        description: 'Coordinate shipments, manage documentation, and track cargo movements',\n        icon: Truck,\n      },\n      customs: {\n        title: 'Customs Authority Dashboard',\n        description: 'Review documentation, approve clearances, and verify shipment compliance',\n        icon: FileCheck,\n      },\n      bank: {\n        title: 'Trade Finance Bank Dashboard',\n        description: 'Manage Letters of Credit, process payments, and verify trade documents',\n        icon: Building2,\n      },\n      port_authority: {\n        title: 'Port Authority Dashboard',\n        description: 'Monitor vessel arrivals, manage berth allocations, and track cargo movements',\n        icon: Anchor,\n      },\n    };\n    return roleMap[currentRole as keyof typeof roleMap] || roleMap.shipper;\n  };\n\n  const roleInfo = getRoleInfo();\n  const RoleIcon = roleInfo.icon;\n\n  // Fetch Bills of Lading from API\n  const { data: billsOfLading = [], isLoading: isLoadingBols } = useQuery<BillOfLading[]>({\n    queryKey: ['/api/bills-of-lading'],\n    enabled: currentRole === 'shipper',\n  });\n\n  // Shipper-specific dashboard\n  if (currentRole === 'shipper') {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"p-2 bg-primary/10 rounded-md\">\n            <RoleIcon className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-semibold mb-2\">{roleInfo.title}</h1>\n            <p className=\"text-muted-foreground\">{roleInfo.description}</p>\n          </div>\n        </div>\n\n        <DashboardStats />\n        <BlockchainStatus />\n\n        <div className=\"flex items-center justify-between gap-4\">\n          <h2 className=\"text-xl font-semibold\">My Bills of Lading</h2>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" size=\"sm\" className=\"gap-2\" data-testid=\"button-filter\">\n              <Filter className=\"h-4 w-4\" />\n              Filter\n            </Button>\n            <Link href=\"/create\">\n              <Button size=\"sm\" className=\"gap-2\" data-testid=\"button-create-new\">\n                <PlusCircle className=\"h-4 w-4\" />\n                Create New\n              </Button>\n            </Link>\n          </div>\n        </div>\n\n        {isLoadingBols ? (\n          <div className=\"flex items-center justify-center p-12\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        ) : billsOfLading.length === 0 ? (\n          <Card className=\"p-12\">\n            <div className=\"text-center space-y-3\">\n              <Package className=\"h-12 w-12 mx-auto text-muted-foreground\" />\n              <h3 className=\"text-lg font-semibold\">No Bills of Lading Yet</h3>\n              <p className=\"text-muted-foreground max-w-sm mx-auto\">\n                Get started by creating your first Bill of Lading to begin tracking your shipments on the blockchain.\n              </p>\n              <Link href=\"/create\">\n                <Button className=\"gap-2\" data-testid=\"button-create-first\">\n                  <PlusCircle className=\"h-4 w-4\" />\n                  Create Your First B/L\n                </Button>\n              </Link>\n            </div>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {billsOfLading.map((bol) => (\n              <BillOfLadingCard\n                key={bol.id}\n                blNumber={bol.blNumber}\n                shipper={bol.shipper}\n                consignee={bol.consignee}\n                vesselName={bol.vesselName}\n                portOfLoading={bol.portOfLoading}\n                portOfDischarge={bol.portOfDischarge}\n                status={bol.status}\n                blockchainStatus={bol.blockchainStatus || 'pending'}\n                blockchainHash={bol.blockchainHash || undefined}\n                cargoDescription={bol.cargoDescription}\n                onView={() => window.location.href = `/documents`}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Carrier-specific dashboard\n  if (currentRole === 'carrier') {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"p-2 bg-primary/10 rounded-md\">\n            <RoleIcon className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-semibold mb-2\">{roleInfo.title}</h1>\n            <p className=\"text-muted-foreground\">{roleInfo.description}</p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Active Vessels</div>\n              <div className=\"text-2xl font-bold\">12</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">In Transit</div>\n              <div className=\"text-2xl font-bold\">18</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">At Port</div>\n              <div className=\"text-2xl font-bold\">7</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Delivered</div>\n              <div className=\"text-2xl font-bold\">124</div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <BlockchainStatus />\n\n        <div className=\"grid lg:grid-cols-2 gap-6\">\n          <ShipmentTracker\n            vesselName=\"MSC GÜLSÜN\"\n            currentLocation=\"Mediterranean Sea\"\n            currentStatus=\"In Transit\"\n            progress={65}\n            estimatedArrival={new Date('2024-02-05T14:30:00')}\n            events={mockShipmentEvents}\n          />\n          \n          <Card>\n            <CardHeader>\n              <h3 className=\"font-semibold\">Active Bills of Lading</h3>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {mockBillsOfLading.slice(0, 3).map((bol) => (\n                <div key={bol.id} className=\"p-3 border rounded-md hover-elevate cursor-pointer\">\n                  <div className=\"flex items-center justify-between gap-2 mb-2\">\n                    <span className=\"font-mono text-sm font-semibold\">{bol.blNumber}</span>\n                    <Badge variant=\"secondary\">{bol.status}</Badge>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {bol.portOfLoading} → {bol.portOfDischarge}\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  // Customs Authority dashboard\n  if (currentRole === 'customs') {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"p-2 bg-primary/10 rounded-md\">\n            <RoleIcon className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-semibold mb-2\">{roleInfo.title}</h1>\n            <p className=\"text-muted-foreground\">{roleInfo.description}</p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Pending Review</div>\n              <div className=\"text-2xl font-bold\">23</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Approved Today</div>\n              <div className=\"text-2xl font-bold\">41</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Flagged</div>\n              <div className=\"text-2xl font-bold\">3</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Total This Month</div>\n              <div className=\"text-2xl font-bold\">847</div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <BlockchainStatus />\n\n        <Card>\n          <CardHeader>\n            <h3 className=\"font-semibold\">Documents Awaiting Clearance</h3>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {mockBillsOfLading.map((bol) => (\n              <div key={bol.id} className=\"p-4 border rounded-md hover-elevate cursor-pointer\">\n                <div className=\"flex items-center justify-between gap-4 mb-3\">\n                  <div>\n                    <div className=\"font-mono text-sm font-semibold mb-1\">{bol.blNumber}</div>\n                    <div className=\"text-sm text-muted-foreground\">{bol.cargoDescription}</div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button size=\"sm\" variant=\"default\" className=\"gap-1\">\n                      <CheckCircle className=\"h-3 w-3\" />\n                      Approve\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" className=\"gap-1\">\n                      <AlertCircle className=\"h-3 w-3\" />\n                      Flag\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3 text-xs\">\n                  <div>\n                    <span className=\"text-muted-foreground\">Shipper:</span> {bol.shipper}\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Vessel:</span> {bol.vesselName}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Trade Finance Bank dashboard\n  if (currentRole === 'bank') {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"p-2 bg-primary/10 rounded-md\">\n            <RoleIcon className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-semibold mb-2\">{roleInfo.title}</h1>\n            <p className=\"text-muted-foreground\">{roleInfo.description}</p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Active L/Cs</div>\n              <div className=\"text-2xl font-bold\">8</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Total Value</div>\n              <div className=\"text-2xl font-bold\">$2.4M</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Pending Payments</div>\n              <div className=\"text-2xl font-bold\">$420K</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Documents Review</div>\n              <div className=\"text-2xl font-bold\">5</div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <BlockchainStatus />\n\n        <TradeFinancePanel {...mockTradeFinance} />\n\n        <Card>\n          <CardHeader>\n            <h3 className=\"font-semibold\">Recent Letters of Credit</h3>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <div className=\"p-3 border rounded-md hover-elevate cursor-pointer\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"font-mono text-sm font-semibold\">LC-2024-SH-001</span>\n                <Badge variant=\"default\">Active</Badge>\n              </div>\n              <div className=\"text-sm\">Amount: USD 125,000</div>\n              <div className=\"text-xs text-muted-foreground\">HSBC → Shanghai Exports Ltd.</div>\n            </div>\n            <div className=\"p-3 border rounded-md hover-elevate cursor-pointer\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"font-mono text-sm font-semibold\">LC-2024-DB-002</span>\n                <Badge variant=\"secondary\">Documents Received</Badge>\n              </div>\n              <div className=\"text-sm\">Amount: USD 89,500</div>\n              <div className=\"text-xs text-muted-foreground\">Standard Chartered → Dubai Trade Corp</div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Port Authority dashboard\n  if (currentRole === 'port_authority') {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"p-2 bg-primary/10 rounded-md\">\n            <RoleIcon className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-semibold mb-2\">{roleInfo.title}</h1>\n            <p className=\"text-muted-foreground\">{roleInfo.description}</p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Vessels in Port</div>\n              <div className=\"text-2xl font-bold\">14</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Scheduled Arrivals</div>\n              <div className=\"text-2xl font-bold\">8</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Berths Occupied</div>\n              <div className=\"text-2xl font-bold\">12/18</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"text-sm text-muted-foreground mb-1\">Containers Today</div>\n              <div className=\"text-2xl font-bold\">2,341</div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <BlockchainStatus />\n\n        <Card>\n          <CardHeader>\n            <h3 className=\"font-semibold\">Vessel Movements</h3>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <div className=\"p-4 border rounded-md\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"font-semibold\">MSC GÜLSÜN</span>\n                <Badge variant=\"default\">Arriving</Badge>\n              </div>\n              <div className=\"text-sm text-muted-foreground\">ETA: Feb 5, 14:30 • Berth 7</div>\n            </div>\n            <div className=\"p-4 border rounded-md\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"font-semibold\">EVER GIVEN</span>\n                <Badge variant=\"secondary\">Docked</Badge>\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Berth 3 • Loading in progress</div>\n            </div>\n            <div className=\"p-4 border rounded-md\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"font-semibold\">CMA CGM BENJAMIN FRANKLIN</span>\n                <Badge variant=\"default\">Departing</Badge>\n              </div>\n              <div className=\"text-sm text-muted-foreground\">ETD: Today 18:00 • Berth 12</div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Freight Forwarder dashboard (default fallback)\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-start gap-3\">\n        <div className=\"p-2 bg-primary/10 rounded-md\">\n          <RoleIcon className=\"h-6 w-6 text-primary\" />\n        </div>\n        <div>\n          <h1 className=\"text-3xl font-semibold mb-2\">{roleInfo.title}</h1>\n          <p className=\"text-muted-foreground\">{roleInfo.description}</p>\n        </div>\n      </div>\n\n      <div className=\"grid md:grid-cols-4 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-sm text-muted-foreground mb-1\">Active Shipments</div>\n            <div className=\"text-2xl font-bold\">34</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-sm text-muted-foreground mb-1\">Pending Documents</div>\n            <div className=\"text-2xl font-bold\">12</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-sm text-muted-foreground mb-1\">In Transit</div>\n            <div className=\"text-2xl font-bold\">18</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-sm text-muted-foreground mb-1\">Completed</div>\n            <div className=\"text-2xl font-bold\">156</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <BlockchainStatus />\n\n      <div className=\"grid md:grid-cols-2 gap-4\">\n        {mockBillsOfLading.slice(0, 4).map((bol) => (\n          <BillOfLadingCard\n            key={bol.id}\n            blNumber={bol.blNumber}\n            shipper={bol.shipper}\n            consignee={bol.consignee}\n            vesselName={bol.vesselName}\n            portOfLoading={bol.portOfLoading}\n            portOfDischarge={bol.portOfDischarge}\n            status={bol.status}\n            blockchainStatus={bol.blockchainStatus}\n            blockchainHash={bol.blockchainHash}\n            cargoDescription={bol.cargoDescription}\n            onView={() => console.log('View details:', bol.blNumber)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":19711},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 210 4% 98%;\n\n  --foreground: 215 16% 12%;\n\n  --border: 210 10% 88%;\n\n  --card: 210 4% 96%;\n\n  --card-foreground: 215 16% 12%;\n\n  --card-border: 210 8% 92%;\n\n  --sidebar: 210 5% 94%;\n\n  --sidebar-foreground: 215 16% 12%;\n\n  --sidebar-border: 210 8% 88%;\n\n  --sidebar-primary: 207 90% 28%;\n\n  --sidebar-primary-foreground: 210 100% 97%;\n\n  --sidebar-accent: 210 8% 86%;\n\n  --sidebar-accent-foreground: 215 16% 12%;\n\n  --sidebar-ring: 207 90% 54%;\n\n  --popover: 210 6% 92%;\n\n  --popover-foreground: 215 16% 12%;\n\n  --popover-border: 210 8% 86%;\n\n  --primary: 207 90% 28%;\n\n  --primary-foreground: 210 100% 97%;\n\n  --secondary: 210 10% 88%;\n\n  --secondary-foreground: 215 16% 12%;\n\n  --muted: 210 12% 90%;\n\n  --muted-foreground: 215 12% 32%;\n\n  --accent: 210 15% 88%;\n\n  --accent-foreground: 215 16% 12%;\n\n  --destructive: 0 84% 32%;\n\n  --destructive-foreground: 0 100% 97%;\n\n  --input: 210 15% 72%;\n  --ring: 207 90% 54%;\n  --chart-1: 207 90% 28%;\n  --chart-2: 195 82% 32%;\n  --chart-3: 186 75% 35%;\n  --chart-4: 173 68% 38%;\n  --chart-5: 162 60% 42%;\n\n  --font-sans: IBM Plex Sans, Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: IBM Plex Mono, Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(215 25% 27% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(215 25% 27% / 0.08);\n  --shadow-sm: 0px 2px 4px 0px hsl(215 25% 27% / 0.06), 0px 1px 2px -1px hsl(215 25% 27% / 0.08);\n  --shadow: 0px 4px 6px 0px hsl(215 25% 27% / 0.05), 0px 2px 4px -1px hsl(215 25% 27% / 0.08);\n  --shadow-md: 0px 6px 12px 0px hsl(215 25% 27% / 0.08), 0px 2px 6px -2px hsl(215 25% 27% / 0.10);\n  --shadow-lg: 0px 12px 24px 0px hsl(215 25% 27% / 0.10), 0px 4px 8px -2px hsl(215 25% 27% / 0.12);\n  --shadow-xl: 0px 20px 40px 0px hsl(215 25% 27% / 0.12), 0px 8px 16px -4px hsl(215 25% 27% / 0.14);\n  --shadow-2xl: 0px 32px 64px 0px hsl(215 25% 27% / 0.16);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 215 6% 9%;\n\n  --foreground: 210 12% 92%;\n\n  --border: 215 8% 18%;\n\n  --card: 215 6% 11%;\n\n  --card-foreground: 210 12% 92%;\n\n  --card-border: 215 8% 16%;\n\n  --sidebar: 215 6% 13%;\n\n  --sidebar-foreground: 210 12% 92%;\n\n  --sidebar-border: 215 8% 20%;\n\n  --sidebar-primary: 207 90% 28%;\n\n  --sidebar-primary-foreground: 210 100% 97%;\n\n  --sidebar-accent: 215 8% 20%;\n\n  --sidebar-accent-foreground: 210 12% 92%;\n\n  --sidebar-ring: 207 90% 54%;\n\n  --popover: 215 7% 16%;\n\n  --popover-foreground: 210 12% 92%;\n\n  --popover-border: 215 8% 22%;\n\n  --primary: 207 90% 28%;\n\n  --primary-foreground: 210 100% 97%;\n\n  --secondary: 215 8% 22%;\n\n  --secondary-foreground: 210 12% 92%;\n\n  --muted: 215 10% 18%;\n\n  --muted-foreground: 210 10% 68%;\n\n  --accent: 215 12% 20%;\n\n  --accent-foreground: 210 12% 92%;\n\n  --destructive: 0 84% 32%;\n\n  --destructive-foreground: 0 100% 97%;\n\n  --input: 215 15% 32%;\n  --ring: 207 90% 54%;\n  --chart-1: 207 90% 65%;\n  --chart-2: 195 82% 68%;\n  --chart-3: 186 75% 72%;\n  --chart-4: 173 68% 75%;\n  --chart-5: 162 60% 78%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(215 50% 3% / 0.50);\n  --shadow-xs: 0px 1px 3px 0px hsl(215 50% 3% / 0.60);\n  --shadow-sm: 0px 2px 4px 0px hsl(215 50% 3% / 0.55), 0px 1px 2px -1px hsl(215 50% 3% / 0.60);\n  --shadow: 0px 4px 6px 0px hsl(215 50% 3% / 0.50), 0px 2px 4px -1px hsl(215 50% 3% / 0.55);\n  --shadow-md: 0px 6px 12px 0px hsl(215 50% 3% / 0.60), 0px 2px 6px -2px hsl(215 50% 3% / 0.65);\n  --shadow-lg: 0px 12px 24px 0px hsl(215 50% 3% / 0.65), 0px 4px 8px -2px hsl(215 50% 3% / 0.70);\n  --shadow-xl: 0px 20px 40px 0px hsl(215 50% 3% / 0.70), 0px 8px 16px -4px hsl(215 50% 3% / 0.75);\n  --shadow-2xl: 0px 32px 64px 0px hsl(215 50% 3% / 0.80);\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: -1;\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: 999;\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":9158},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/StakeholderSelector.tsx":{"content":"import { Building2, Package, Ship, Truck, FileCheck, Anchor } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Badge } from '@/components/ui/badge';\n\nconst roles = [\n  { value: 'shipper', label: 'Shipper', icon: Package },\n  { value: 'carrier', label: 'Carrier', icon: Ship },\n  { value: 'freight_forwarder', label: 'Freight Forwarder', icon: Truck },\n  { value: 'customs', label: 'Customs Authority', icon: FileCheck },\n  { value: 'bank', label: 'Trade Finance Bank', icon: Building2 },\n  { value: 'port_authority', label: 'Port Authority', icon: Anchor },\n];\n\ninterface StakeholderSelectorProps {\n  currentRole: string;\n  onRoleChange: (role: string) => void;\n}\n\nexport default function StakeholderSelector({ currentRole, onRoleChange }: StakeholderSelectorProps) {\n  const selectedRole = roles.find(r => r.value === currentRole) || roles[0];\n  const Icon = selectedRole.icon;\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" className=\"gap-2\" data-testid=\"button-role-selector\">\n          <Icon className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">{selectedRole.label}</span>\n          <Badge variant=\"secondary\" className=\"ml-1\">Role</Badge>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-56\">\n        {roles.map((role) => {\n          const RoleIcon = role.icon;\n          return (\n            <DropdownMenuItem\n              key={role.value}\n              onClick={() => onRoleChange(role.value)}\n              className=\"gap-2\"\n              data-testid={`role-${role.value}`}\n            >\n              <RoleIcon className=\"h-4 w-4\" />\n              <span>{role.label}</span>\n            </DropdownMenuItem>\n          );\n        })}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","size_bytes":1977},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/pages/Finance.tsx":{"content":"import TradeFinancePanel from '@/components/TradeFinancePanel';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { DollarSign, TrendingDown } from 'lucide-react';\nimport { mockTradeFinance } from '@/lib/mockData';\n\nexport default function Finance() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-semibold mb-2\">Trade Finance</h1>\n        <p className=\"text-muted-foreground\">\n          Manage payment workflows and smart contract automation\n        </p>\n      </div>\n\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-primary/10 rounded-md\">\n                <DollarSign className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Total Trade Value</p>\n                <p className=\"text-2xl font-bold\">$2.4M</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-1 text-xs text-green-600\">\n              <TrendingDown className=\"h-3 w-3 rotate-180\" />\n              <span>+15% from last quarter</span>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-primary/10 rounded-md\">\n                <DollarSign className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Active L/Cs</p>\n                <p className=\"text-2xl font-bold\">8</p>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Across 5 banks</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-primary/10 rounded-md\">\n                <DollarSign className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Cost Savings</p>\n                <p className=\"text-2xl font-bold\">$42K</p>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">6% vs traditional methods</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid lg:grid-cols-2 gap-6\">\n        <TradeFinancePanel {...mockTradeFinance} />\n\n        <Card>\n          <CardHeader>\n            <h3 className=\"font-semibold\">Smart Contract Automation</h3>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"p-4 bg-muted rounded-md\">\n              <p className=\"text-sm font-medium mb-2\">Automated Payment Triggers</p>\n              <ul className=\"text-sm text-muted-foreground space-y-1\">\n                <li className=\"flex items-start gap-2\">\n                  <span className=\"text-green-600\">✓</span>\n                  <span>Document verification completed</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <span className=\"text-green-600\">✓</span>\n                  <span>Goods loaded and vessel departed</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <span className=\"text-yellow-600\">○</span>\n                  <span>Customs clearance approved</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <span className=\"text-muted-foreground\">○</span>\n                  <span>Delivery confirmed</span>\n                </li>\n              </ul>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Smart Contract Address</span>\n              </div>\n              <div className=\"p-3 bg-muted rounded-md\">\n                <code className=\"text-xs font-mono\">\n                  0x7f8a3c...2d9e3f1a\n                </code>\n              </div>\n            </div>\n\n            <Button className=\"w-full\" variant=\"outline\" data-testid=\"button-view-contract\">\n              View on BlockDAG Explorer\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4509},"client/src/components/examples/BlockchainTransactionLog.tsx":{"content":"import BlockchainTransactionLog from '../BlockchainTransactionLog';\n\nexport default function BlockchainTransactionLogExample() {\n  const mockTransactions = [\n    {\n      id: '1',\n      txHash: '0x1a2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z',\n      eventType: 'Shipping Instructions Uploaded',\n      timestamp: '2024-01-10 14:32:18',\n      blockNumber: 12345678,\n      gasUsed: '21,000',\n    },\n    {\n      id: '2',\n      txHash: '0x9s8r7q6p5o4n3m2l1k0j9i8h7g6f5e4d3c2b1a0z9y8x7w6v5u4t',\n      eventType: 'Bill of Lading Created',\n      timestamp: '2024-01-10 15:45:22',\n      blockNumber: 12345690,\n      gasUsed: '35,000',\n    },\n    {\n      id: '3',\n      txHash: '0xabcdef1234567890abcdef1234567890abcdef1234567890abcd',\n      eventType: 'Document Shared with Customs',\n      timestamp: '2024-01-10 16:12:05',\n      blockNumber: 12345702,\n      gasUsed: '28,500',\n    },\n    {\n      id: '4',\n      txHash: '0x567890abcdef1234567890abcdef1234567890abcdef12345678',\n      eventType: 'Port Access Granted',\n      timestamp: '2024-01-10 17:20:33',\n      blockNumber: 12345715,\n      gasUsed: '22,800',\n    },\n  ];\n\n  return <BlockchainTransactionLog transactions={mockTransactions} />;\n}\n","size_bytes":1196},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"design_guidelines.md":{"content":"# ShipLedger Design Guidelines\n\n## Design Approach\n\n**Selected Approach:** Design System - Carbon Design System (IBM)\n\n**Justification:** ShipLedger is an enterprise blockchain platform requiring data-heavy interfaces, complex workflows, and multi-stakeholder collaboration. Carbon Design System excels at handling information-dense applications with clear hierarchy, professional aesthetics, and proven enterprise patterns for dashboards, data tables, and form-heavy interfaces.\n\n**Key Design Principles:**\n- Professional trustworthiness for maritime/finance industries\n- Clear information hierarchy for complex shipping data\n- Efficiency-focused workflows for enterprise users\n- Blockchain transparency through visual feedback\n- Role-based interface clarity\n\n---\n\n## Typography\n\n**Font Family:**\n- Primary: IBM Plex Sans (via Google Fonts CDN)\n- Monospace: IBM Plex Mono (for addresses, transaction hashes)\n\n**Scale:**\n- Display/Hero: text-5xl (48px) font-semibold\n- Page Titles: text-3xl (30px) font-semibold\n- Section Headers: text-2xl (24px) font-semibold\n- Card Titles: text-xl (20px) font-medium\n- Body Text: text-base (16px) font-normal\n- Metadata/Labels: text-sm (14px) font-medium\n- Captions: text-xs (12px) font-normal\n\n---\n\n## Layout System\n\n**Spacing Units:** Tailwind units of 4, 6, 8, 12, 16 for consistent rhythm\n- Component padding: p-6, p-8\n- Section spacing: space-y-8, space-y-12\n- Card gaps: gap-6\n- Page margins: px-8, py-12\n\n**Grid Structure:**\n- Dashboard: 12-column grid (grid-cols-12)\n- Cards: 3-column on desktop (lg:grid-cols-3), 2-column tablet (md:grid-cols-2), single mobile\n- Forms: 2-column layouts for efficiency (lg:grid-cols-2)\n- Max container width: max-w-7xl\n\n---\n\n## Component Library\n\n### Navigation & Layout\n**Top Navigation Bar:**\n- Fixed header with ShipLedger logo (left), role indicator badge (center-left), blockchain status indicator (center-right), user menu (right)\n- Height: h-16\n- Icons: Heroicons outline style\n\n**Sidebar Navigation:**\n- Fixed left sidebar (w-64) with collapsible sections\n- Role-based menu items with icon + label\n- Active state: subtle background with border-left accent\n\n### Core Components\n\n**Dashboard Cards:**\n- Bordered cards with subtle shadow (border rounded-lg shadow-sm)\n- Header with icon + title + action button\n- Content area with p-6 padding\n- Stats cards: Large number display with label and trend indicator\n\n**Data Tables:**\n- Striped rows for readability (alternate row backgrounds)\n- Sortable column headers with caret icons\n- Status badges in table cells (pill-shaped with icon)\n- Action dropdown menu (right-aligned)\n- Sticky header on scroll\n\n**Forms:**\n- Two-column layouts for efficiency\n- Clear label hierarchy (text-sm font-medium mb-2)\n- Input fields: h-11 with border-2 focus states\n- Required field indicators (*)\n- Inline validation messages with icons\n\n**Blockchain Transaction Cards:**\n- Monospace font for hashes/addresses\n- Transaction status timeline (vertical stepper)\n- Gas fee and confirmation displays\n- Copy-to-clipboard buttons for addresses\n- Block explorer link buttons\n\n**Status Indicators:**\n- Pill badges: rounded-full px-3 py-1 text-xs font-semibold\n- Icons from Heroicons (check-circle, clock, x-circle, truck)\n- States: Draft, In Transit, Customs Clearance, Delivered, On Blockchain, Pending Confirmation\n\n**Interactive Elements:**\n- Primary buttons: px-6 py-3 rounded-lg font-semibold (for main actions)\n- Secondary buttons: outlined variant\n- Icon buttons: p-2 for table actions\n- No custom hover states needed\n\n### Specialized Components\n\n**Bill of Lading Form:**\n- Multi-step wizard interface (stepper at top)\n- Grouped sections with clear headings\n- Document preview panel (right side on desktop)\n- Blockchain submission summary before finalization\n\n**Tracking Timeline:**\n- Vertical timeline with location pins\n- Event cards with timestamp, location, status\n- Interactive map integration placeholder\n- Real-time update indicators (pulsing dot)\n\n**Trade Finance Dashboard:**\n- Progress bars for payment milestones\n- Letter of credit status cards with expandable details\n- Payment schedule table\n- Smart contract trigger conditions display\n\n**Stakeholder Role Switcher:**\n- Dropdown in top nav to simulate different user views\n- Visual indicator of current role (badge with icon)\n- Role-specific dashboard layouts\n\n---\n\n## Images\n\n**Hero Section:**\n- Large hero image showing modern container port with blockchain overlay graphics\n- Dimensions: Full-width, h-96 on desktop\n- Overlay: dark gradient for text contrast\n- CTA buttons with backdrop-blur-sm background\n\n**Dashboard Illustrations:**\n- Cargo ship/container icons for empty states\n- Blockchain network visualization for transaction explorer\n- Document icons for file type indicators\n- World map for shipment tracking\n\n**Placeholder Comments:**\n```\n<!-- HERO IMAGE: Modern container port aerial view with digital overlay -->\n<!-- ICON: Shipping container for cargo cards -->\n<!-- ICON: Document with blockchain seal for eBL -->\n<!-- ICON: Globe with routes for tracking -->\n```\n\n---\n\n## Accessibility\n\n- Consistent focus indicators (ring-2 ring-offset-2)\n- ARIA labels for all interactive elements\n- Keyboard navigation for all workflows\n- Screen reader announcements for blockchain confirmations\n- Form inputs with explicit labels and error states\n\n---\n\n## Animation Guidelines\n\n**Use Sparingly:**\n- Loading spinners for blockchain confirmations only\n- Fade-in for notification toasts (top-right)\n- No scroll animations\n- Subtle transitions on card hover (transition-all duration-200)","size_bytes":5564},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/pages/CarrierView.tsx":{"content":"import BillOfLadingForm from \"@/components/BillOfLadingForm\";\nimport DocumentCard from \"@/components/DocumentCard\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus } from \"lucide-react\";\nimport { useState } from \"react\";\n\nexport default function CarrierView() {\n  const [showForm, setShowForm] = useState(false);\n\n  const mockPendingInstructions = {\n    shipperName: 'Global Logistics Co.',\n    consigneeName: 'Pacific Imports Ltd.',\n    origin: 'Port of Shanghai',\n    destination: 'Port of Los Angeles',\n    containerNumber: 'MSCU1234567',\n    weight: '25000',\n    cargoDescription: 'Electronics components - 100 pallets',\n  };\n\n  const mockDocuments = [\n    {\n      id: '1',\n      bolNumber: 'BOL-2024-001',\n      shipperName: 'Global Logistics Co.',\n      status: 'in_transit' as const,\n      date: 'Jan 10, 2024',\n      isBlockchainVerified: true,\n    },\n    {\n      id: '2',\n      bolNumber: 'BOL-2024-002',\n      shipperName: 'Ocean Freight Ltd.',\n      status: 'draft' as const,\n      date: 'Jan 12, 2024',\n      isBlockchainVerified: false,\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-semibold\" data-testid=\"heading-carrier\">Carrier Portal</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Draft and manage Bills of Lading for shipping instructions\n          </p>\n        </div>\n        <Button \n          onClick={() => {\n            console.log('Draft BoL button clicked');\n            setShowForm(!showForm);\n          }}\n          data-testid=\"button-draft-bol-main\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Draft Bill of Lading\n        </Button>\n      </div>\n\n      {showForm && (\n        <BillOfLadingForm \n          instructionsData={mockPendingInstructions}\n          onDraft={(data) => {\n            console.log('BoL draft saved:', data);\n            alert('Bill of Lading draft saved successfully!');\n          }}\n          onFinalize={(data) => {\n            console.log('BoL finalized:', data);\n            alert('Bill of Lading finalized and shared with customs and port authorities! Transaction recorded on blockchain.');\n            setShowForm(false);\n          }}\n        />\n      )}\n\n      {!showForm && (\n        <div>\n          <h2 className=\"text-xl font-semibold mb-4\">Bills of Lading</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {mockDocuments.map((doc) => (\n              <DocumentCard key={doc.id} {...doc} />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":2669},"client/src/components/BlockchainVerificationModal.tsx":{"content":"import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CheckCircle2, ExternalLink, Copy } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface BlockchainVerificationModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  txHash?: string | null;\n  blockNumber?: number | null;\n  timestamp?: Date | string;\n  documentHash?: string | null;\n  verified?: boolean;\n  entityType?: string;\n  entityId?: string;\n}\n\nexport default function BlockchainVerificationModal({\n  open,\n  onOpenChange,\n  txHash,\n  blockNumber,\n  timestamp,\n  documentHash,\n  verified = false,\n  entityType = \"Document\",\n  entityId,\n}: BlockchainVerificationModalProps) {\n  const { toast } = useToast();\n\n  const copyToClipboard = (text: string, label: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: `${label} copied to clipboard`,\n    });\n  };\n\n  const formatTimestamp = (ts?: Date | string) => {\n    if (!ts) return \"N/A\";\n    const date = typeof ts === \"string\" ? new Date(ts) : ts;\n    return date.toLocaleString();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\" data-testid=\"modal-blockchain-verification\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {verified ? (\n              <CheckCircle2 className=\"h-5 w-5 text-primary\" />\n            ) : (\n              <div className=\"h-2 w-2 rounded-full bg-yellow-500\" />\n            )}\n            Blockchain Verification\n          </DialogTitle>\n          <DialogDescription>\n            {entityType} {entityId ? `#${entityId}` : \"\"} - BlockDAG Testnet\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Verification Status */}\n          <div className=\"flex items-center justify-between p-4 bg-muted rounded-md\">\n            <div>\n              <p className=\"text-sm font-medium\">Verification Status</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {verified ? \"Verified and immutable on blockchain\" : \"Pending verification\"}\n              </p>\n            </div>\n            <Badge variant={verified ? \"default\" : \"outline\"}>\n              {verified ? \"✓ Verified\" : \"⏳ Pending\"}\n            </Badge>\n          </div>\n\n          {/* Transaction Hash */}\n          {txHash && (\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Transaction Hash</label>\n              <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md font-mono text-xs break-all\">\n                <span className=\"flex-1\">{txHash}</span>\n                <Button \n                  variant=\"ghost\" \n                  size=\"sm\"\n                  onClick={() => copyToClipboard(txHash, \"Transaction hash\")}\n                  data-testid=\"button-copy-tx-hash\"\n                >\n                  <Copy className=\"h-4 w-4\" />\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  size=\"sm\"\n                  onClick={() => window.open(`https://explorer.blockdag.network/tx/${txHash}`, '_blank')}\n                  data-testid=\"button-view-explorer\"\n                >\n                  <ExternalLink className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Block Number */}\n          {blockNumber && (\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Block Number</label>\n              <div className=\"p-3 bg-muted rounded-md font-mono text-sm\">\n                {blockNumber.toLocaleString()}\n              </div>\n            </div>\n          )}\n\n          {/* Timestamp */}\n          {timestamp && (\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Timestamp</label>\n              <div className=\"p-3 bg-muted rounded-md text-sm\">\n                {formatTimestamp(timestamp)}\n              </div>\n            </div>\n          )}\n\n          {/* Document Hash */}\n          {documentHash && (\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Document Hash (SHA-256)</label>\n              <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md font-mono text-xs break-all\">\n                <span className=\"flex-1\">{documentHash}</span>\n                <Button \n                  variant=\"ghost\" \n                  size=\"sm\"\n                  onClick={() => copyToClipboard(documentHash, \"Document hash\")}\n                  data-testid=\"button-copy-doc-hash\"\n                >\n                  <Copy className=\"h-4 w-4\" />\n                </Button>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                This cryptographic hash ensures document integrity and prevents tampering\n              </p>\n            </div>\n          )}\n\n          {/* Info */}\n          <div className=\"p-4 bg-primary/5 border border-primary/20 rounded-md\">\n            <p className=\"text-sm text-muted-foreground\">\n              All transactions are recorded on the BlockDAG testnet, ensuring complete transparency \n              and immutability. This verification can be independently verified on the BlockDAG explorer.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} data-testid=\"button-close-modal\">\n            Close\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5807},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated, requireRole } from \"./replitAuth\";\nimport {\n  insertBillOfLadingSchema,\n  insertShipmentSchema,\n  insertTradeFinanceSchema,\n  insertTransactionSchema,\n} from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  await setupAuth(app);\n\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  app.get('/api/bills-of-lading', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      const bols = user?.role === 'admin' \n        ? await storage.getBillsOfLading()\n        : await storage.getBillsOfLading(userId);\n      \n      res.json(bols);\n    } catch (error) {\n      console.error(\"Error fetching bills of lading:\", error);\n      res.status(500).json({ message: \"Failed to fetch bills of lading\" });\n    }\n  });\n\n  app.get('/api/bills-of-lading/:id', isAuthenticated, async (req, res) => {\n    try {\n      const bol = await storage.getBillOfLadingById(req.params.id);\n      if (!bol) {\n        return res.status(404).json({ message: \"Bill of Lading not found\" });\n      }\n      res.json(bol);\n    } catch (error) {\n      console.error(\"Error fetching bill of lading:\", error);\n      res.status(500).json({ message: \"Failed to fetch bill of lading\" });\n    }\n  });\n\n  app.post('/api/bills-of-lading', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const validatedData = insertBillOfLadingSchema.parse({\n        ...req.body,\n        createdBy: userId,\n      });\n\n      const bol = await storage.createBillOfLading(validatedData);\n\n      await storage.createTransaction({\n        type: 'bol_created',\n        userId,\n        details: `Created B/L ${bol.blNumber}`,\n        relatedId: bol.id,\n      });\n\n      res.status(201).json(bol);\n    } catch (error: any) {\n      console.error(\"Error creating bill of lading:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create bill of lading\" });\n    }\n  });\n\n  app.patch('/api/bills-of-lading/:id/status', isAuthenticated, async (req: any, res) => {\n    try {\n      const { status, blockchainHash } = req.body;\n      const userId = req.user.claims.sub;\n      \n      if (!status) {\n        return res.status(400).json({ message: \"Status is required\" });\n      }\n\n      const updated = await storage.updateBillOfLadingStatus(\n        req.params.id,\n        status,\n        blockchainHash\n      );\n\n      if (!updated) {\n        return res.status(404).json({ message: \"Bill of Lading not found\" });\n      }\n\n      await storage.createTransaction({\n        type: 'bol_status_updated',\n        userId,\n        details: `Updated B/L ${updated.blNumber} status to ${status}`,\n        relatedId: updated.id,\n      });\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating bill of lading status:\", error);\n      res.status(500).json({ message: \"Failed to update status\" });\n    }\n  });\n\n  app.post('/api/shipments', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const validatedData = insertShipmentSchema.parse(req.body);\n      const shipment = await storage.createShipment(validatedData);\n\n      await storage.createTransaction({\n        type: 'shipment_created',\n        userId,\n        details: `Created shipment for B/L ${validatedData.blId}`,\n        relatedId: shipment.id,\n      });\n\n      res.status(201).json(shipment);\n    } catch (error: any) {\n      console.error(\"Error creating shipment:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create shipment\" });\n    }\n  });\n\n  app.get('/api/shipments/:blId', isAuthenticated, async (req, res) => {\n    try {\n      const shipment = await storage.getShipmentByBlId(req.params.blId);\n      if (!shipment) {\n        return res.status(404).json({ message: \"Shipment not found\" });\n      }\n      res.json(shipment);\n    } catch (error) {\n      console.error(\"Error fetching shipment:\", error);\n      res.status(500).json({ message: \"Failed to fetch shipment\" });\n    }\n  });\n\n  app.patch('/api/shipments/:id/tracking', isAuthenticated, async (req: any, res) => {\n    try {\n      const { currentLocation, estimatedArrival, events } = req.body;\n      const userId = req.user.claims.sub;\n      \n      const updateData: any = {};\n      if (currentLocation) updateData.currentLocation = currentLocation;\n      if (estimatedArrival) updateData.estimatedArrival = new Date(estimatedArrival);\n      if (events) updateData.events = events;\n\n      const updated = await storage.updateShipment(req.params.id, updateData);\n\n      if (!updated) {\n        return res.status(404).json({ message: \"Shipment not found\" });\n      }\n\n      await storage.createTransaction({\n        type: 'shipment_updated',\n        userId,\n        details: `Updated shipment tracking`,\n        relatedId: updated.id,\n      });\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating shipment:\", error);\n      res.status(500).json({ message: \"Failed to update shipment\" });\n    }\n  });\n\n  app.post('/api/trade-finance', isAuthenticated, requireRole('shipper', 'bank'), async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const validatedData = insertTradeFinanceSchema.parse(req.body);\n      const tf = await storage.createTradeFinance(validatedData);\n\n      await storage.createTransaction({\n        type: 'trade_finance_created',\n        userId,\n        details: `Created trade finance for B/L ${validatedData.blId}`,\n        relatedId: tf.id,\n      });\n\n      res.status(201).json(tf);\n    } catch (error: any) {\n      console.error(\"Error creating trade finance:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create trade finance\" });\n    }\n  });\n\n  app.get('/api/trade-finance/:blId', isAuthenticated, async (req, res) => {\n    try {\n      const tf = await storage.getTradeFinanceByBlId(req.params.blId);\n      if (!tf) {\n        return res.status(404).json({ message: \"Trade finance not found\" });\n      }\n      res.json(tf);\n    } catch (error) {\n      console.error(\"Error fetching trade finance:\", error);\n      res.status(500).json({ message: \"Failed to fetch trade finance\" });\n    }\n  });\n\n  app.patch('/api/trade-finance/:id/status', isAuthenticated, requireRole('bank'), async (req: any, res) => {\n    try {\n      const { status } = req.body;\n      const userId = req.user.claims.sub;\n      \n      if (!status) {\n        return res.status(400).json({ message: \"Status is required\" });\n      }\n\n      const updated = await storage.updateTradeFinanceStatus(req.params.id, status);\n\n      if (!updated) {\n        return res.status(404).json({ message: \"Trade finance not found\" });\n      }\n\n      await storage.createTransaction({\n        type: 'trade_finance_updated',\n        userId,\n        details: `Updated trade finance status to ${status}`,\n        relatedId: updated.id,\n      });\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating trade finance status:\", error);\n      res.status(500).json({ message: \"Failed to update status\" });\n    }\n  });\n\n  app.get('/api/transactions', isAuthenticated, async (req, res) => {\n    try {\n      const limit = req.query.limit ? parseInt(req.query.limit as string) : 50;\n      const transactions = await storage.getTransactions(limit);\n      res.json(transactions);\n    } catch (error) {\n      console.error(\"Error fetching transactions:\", error);\n      res.status(500).json({ message: \"Failed to fetch transactions\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":8137},"client/src/components/ShipmentCard.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport StatusBadge, { ShipmentStatus } from \"./StatusBadge\";\nimport { ArrowRight, Eye, MapPin } from \"lucide-react\";\n\ninterface ShipmentCardProps {\n  id: string;\n  containerNumber: string;\n  bolNumber: string;\n  status: ShipmentStatus;\n  origin: string;\n  destination: string;\n  eta: string;\n  onViewDetails?: () => void;\n  onTrack?: () => void;\n}\n\nexport default function ShipmentCard({\n  id,\n  containerNumber,\n  bolNumber,\n  status,\n  origin,\n  destination,\n  eta,\n  onViewDetails,\n  onTrack,\n}: ShipmentCardProps) {\n  return (\n    <Card className=\"hover-elevate\" data-testid={`card-shipment-${id}`}>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"flex-1 min-w-0\">\n            <CardTitle className=\"text-base font-semibold truncate\">{containerNumber}</CardTitle>\n            <p className=\"text-sm font-mono text-muted-foreground mt-1\">{bolNumber}</p>\n          </div>\n          <StatusBadge status={status} />\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 text-sm\">\n          <MapPin className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n          <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n            <span className=\"truncate\">{origin}</span>\n            <ArrowRight className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n            <span className=\"truncate\">{destination}</span>\n          </div>\n        </div>\n        <div className=\"text-xs text-muted-foreground\">\n          ETA: {eta}\n        </div>\n        <div className=\"flex gap-2\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            className=\"flex-1\" \n            onClick={() => {\n              console.log('View details clicked for', id);\n              onViewDetails?.();\n            }}\n            data-testid={`button-view-${id}`}\n          >\n            <Eye className=\"h-4 w-4 mr-2\" />\n            View Details\n          </Button>\n          <Button \n            variant=\"default\" \n            size=\"sm\" \n            className=\"flex-1\"\n            onClick={() => {\n              console.log('Track clicked for', id);\n              onTrack?.();\n            }}\n            data-testid={`button-track-${id}`}\n          >\n            Track\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2529},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/DocumentCard.tsx":{"content":"import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { FileText, Download, Eye, CheckCircle2 } from \"lucide-react\";\nimport StatusBadge, { ShipmentStatus } from \"./StatusBadge\";\n\ninterface DocumentCardProps {\n  id: string;\n  bolNumber: string;\n  shipperName: string;\n  status: ShipmentStatus;\n  date: string;\n  isBlockchainVerified?: boolean;\n  onView?: () => void;\n  onDownload?: () => void;\n}\n\nexport default function DocumentCard({\n  id,\n  bolNumber,\n  shipperName,\n  status,\n  date,\n  isBlockchainVerified,\n  onView,\n  onDownload,\n}: DocumentCardProps) {\n  return (\n    <Card className=\"hover-elevate\" data-testid={`card-document-${id}`}>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"p-2 rounded-md bg-muted\">\n            <FileText className=\"h-6 w-6 text-muted-foreground\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"font-semibold font-mono text-sm truncate\">{bolNumber}</p>\n            <p className=\"text-sm text-muted-foreground truncate\">{shipperName}</p>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n          <StatusBadge status={status} />\n          {isBlockchainVerified && (\n            <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n              <CheckCircle2 className=\"h-3 w-3 text-primary\" />\n              <span>Verified</span>\n            </div>\n          )}\n        </div>\n        <p className=\"text-xs text-muted-foreground\">{date}</p>\n        <div className=\"flex gap-2\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            className=\"flex-1\"\n            onClick={() => {\n              console.log('View document clicked for', id);\n              onView?.();\n            }}\n            data-testid={`button-view-doc-${id}`}\n          >\n            <Eye className=\"h-4 w-4 mr-2\" />\n            View\n          </Button>\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={() => {\n              console.log('Download document clicked for', id);\n              onDownload?.();\n            }}\n            data-testid={`button-download-doc-${id}`}\n          >\n            <Download className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2502},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","size_bytes":116},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"server/blockchain.ts":{"content":"import { ethers } from \"ethers\";\nimport { storage } from \"./storage\";\nimport crypto from \"crypto\";\n\n// Demo mode toggle - set to true to mock blockchain calls\nconst DEMO_MODE = process.env.DEMO_MODE === \"true\";\n\n// BlockDAG testnet configuration\nconst BLOCKDAG_RPC_URL = process.env.BLOCKDAG_RPC_URL || \"https://testnet-rpc.blockdag.network\";\nconst PRIVATE_KEY = process.env.BLOCKCHAIN_PRIVATE_KEY;\n\n// Simple smart contract ABI for storing document hashes\nconst SHIPLEDGER_CONTRACT_ABI = [\n  \"function recordDocument(string memory docType, string memory docId, string memory docHash, address participant) public returns (bool)\",\n  \"function getDocument(string memory docId) public view returns (string memory docType, string memory docHash, address participant, uint256 timestamp)\",\n  \"event DocumentRecorded(string indexed docType, string indexed docId, string docHash, address participant, uint256 timestamp)\"\n];\n\nconst CONTRACT_ADDRESS = process.env.CONTRACT_ADDRESS || \"0x0000000000000000000000000000000000000000\"; // Placeholder\n\nclass BlockchainService {\n  private provider: ethers.JsonRpcProvider | null = null;\n  private wallet: ethers.Wallet | null = null;\n  private contract: ethers.Contract | null = null;\n\n  constructor() {\n    if (!DEMO_MODE && PRIVATE_KEY) {\n      try {\n        this.provider = new ethers.JsonRpcProvider(BLOCKDAG_RPC_URL);\n        this.wallet = new ethers.Wallet(PRIVATE_KEY, this.provider);\n        this.contract = new ethers.Contract(CONTRACT_ADDRESS, SHIPLEDGER_CONTRACT_ABI, this.wallet);\n      } catch (error) {\n        console.error(\"Failed to initialize blockchain connection:\", error);\n      }\n    }\n  }\n\n  /**\n   * Generate a SHA-256 hash of document content\n   */\n  generateDocumentHash(data: any): string {\n    const content = JSON.stringify(data);\n    return crypto.createHash('sha256').update(content).digest('hex');\n  }\n\n  /**\n   * Record a document on the blockchain\n   */\n  async recordDocument(\n    docType: string,\n    docId: string,\n    data: any,\n    participantId: string,\n    eventType: string\n  ): Promise<{ txHash: string; blockNumber?: number; gasUsed?: string; documentHash: string }> {\n    const documentHash = this.generateDocumentHash(data);\n\n    // Demo mode - generate mock transaction\n    if (DEMO_MODE || !this.contract) {\n      const mockTxHash = `0x${crypto.randomBytes(32).toString('hex')}`;\n      const mockBlockNumber = Math.floor(Math.random() * 1000000) + 12345000;\n      const mockGasUsed = (Math.floor(Math.random() * 30000) + 20000).toString();\n\n      console.log(`[DEMO MODE] Simulated blockchain transaction:`, {\n        txHash: mockTxHash,\n        blockNumber: mockBlockNumber,\n        gasUsed: mockGasUsed,\n        documentHash\n      });\n\n      // Store in database\n      await storage.createBlockchainTransaction({\n        txHash: mockTxHash,\n        eventType,\n        entityType: docType,\n        entityId: docId,\n        blockNumber: mockBlockNumber,\n        gasUsed: mockGasUsed,\n        documentHash,\n        participantId,\n        metadata: { demoMode: true },\n        verified: true,\n      });\n\n      return {\n        txHash: mockTxHash,\n        blockNumber: mockBlockNumber,\n        gasUsed: mockGasUsed,\n        documentHash\n      };\n    }\n\n    // Real blockchain transaction\n    try {\n      const participantAddress = this.wallet!.address; // In production, map user ID to blockchain address\n      \n      const tx = await this.contract.recordDocument(\n        docType,\n        docId,\n        documentHash,\n        participantAddress\n      );\n\n      console.log(`Transaction submitted: ${tx.hash}`);\n      const receipt = await tx.wait();\n\n      const blockNumber = receipt.blockNumber;\n      const gasUsed = receipt.gasUsed.toString();\n\n      // Store in database\n      await storage.createBlockchainTransaction({\n        txHash: tx.hash,\n        eventType,\n        entityType: docType,\n        entityId: docId,\n        blockNumber,\n        gasUsed,\n        documentHash,\n        participantId,\n        metadata: { contractAddress: CONTRACT_ADDRESS },\n        verified: true,\n      });\n\n      return {\n        txHash: tx.hash,\n        blockNumber,\n        gasUsed,\n        documentHash\n      };\n    } catch (error) {\n      console.error(\"Blockchain transaction failed:\", error);\n      throw new Error(`Failed to record on blockchain: ${error}`);\n    }\n  }\n\n  /**\n   * Verify a document exists on the blockchain\n   */\n  async verifyDocument(docId: string): Promise<boolean> {\n    if (DEMO_MODE || !this.contract) {\n      // In demo mode, check if transaction exists in database\n      const transactions = await storage.getBlockchainTransactionsByEntity(\"instruction\", docId);\n      return transactions.length > 0;\n    }\n\n    try {\n      const result = await this.contract.getDocument(docId);\n      return result.docHash !== \"\";\n    } catch (error) {\n      console.error(\"Verification failed:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get blockchain network status\n   */\n  async getNetworkStatus(): Promise<{ connected: boolean; blockNumber?: number; chainId?: number }> {\n    if (DEMO_MODE || !this.provider) {\n      return {\n        connected: true,\n        blockNumber: Math.floor(Math.random() * 1000000) + 12345000,\n        chainId: 999, // Mock chain ID\n      };\n    }\n\n    try {\n      const blockNumber = await this.provider.getBlockNumber();\n      const network = await this.provider.getNetwork();\n      return {\n        connected: true,\n        blockNumber,\n        chainId: Number(network.chainId),\n      };\n    } catch (error) {\n      console.error(\"Failed to get network status:\", error);\n      return { connected: false };\n    }\n  }\n}\n\nexport const blockchainService = new BlockchainService();\n","size_bytes":5706},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/examples/TransactionList.tsx":{"content":"import TransactionList from '../TransactionList';\nimport { mockTransactions } from '@/lib/mockData';\n\nexport default function TransactionListExample() {\n  return (\n    <div className=\"max-w-2xl p-6\">\n      <TransactionList transactions={mockTransactions} />\n    </div>\n  );\n}\n","size_bytes":276},"client/src/components/MetricCard.tsx":{"content":"import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { LucideIcon } from \"lucide-react\";\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  icon: LucideIcon;\n  trend?: string;\n  testId?: string;\n}\n\nexport default function MetricCard({ title, value, icon: Icon, trend, testId }: MetricCardProps) {\n  return (\n    <Card data-testid={testId}>\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n        <p className=\"text-sm font-medium text-muted-foreground\">{title}</p>\n        <Icon className=\"h-5 w-5 text-muted-foreground\" />\n      </CardHeader>\n      <CardContent>\n        <div className=\"text-3xl font-bold\" data-testid={`${testId}-value`}>{value}</div>\n        {trend && (\n          <p className=\"text-xs text-muted-foreground mt-1\" data-testid={`${testId}-trend`}>\n            {trend}\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":947},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(claims: any) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  // Keep track of registered strategies\n  const registeredStrategies = new Set<string>();\n\n  // Helper function to ensure strategy exists for a domain\n  const ensureStrategy = (domain: string) => {\n    const strategyName = `replitauth:${domain}`;\n    if (!registeredStrategies.has(strategyName)) {\n      const strategy = new Strategy(\n        {\n          name: strategyName,\n          config,\n          scope: \"openid email profile offline_access\",\n          callbackURL: `https://${domain}/api/callback`,\n        },\n        verify,\n      );\n      passport.use(strategy);\n      registeredStrategies.add(strategyName);\n    }\n  };\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n\n// Role-based middleware\nexport function requireRole(...allowedRoles: string[]): RequestHandler {\n  return async (req, res, next) => {\n    const user = req.user as any;\n    \n    if (!user || !user.claims) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n\n    const userId = user.claims.sub;\n    const dbUser = await storage.getUser(userId);\n\n    if (!dbUser) {\n      return res.status(401).json({ message: \"User not found\" });\n    }\n\n    if (!allowedRoles.includes(dbUser.role)) {\n      return res.status(403).json({ message: \"Forbidden - insufficient permissions\" });\n    }\n\n    // Attach user to request for easy access\n    (req as any).dbUser = dbUser;\n    next();\n  };\n}\n","size_bytes":5166},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/BlockchainTransactionLog.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ExternalLink } from \"lucide-react\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\ninterface BlockchainTransaction {\n  id: string;\n  txHash: string;\n  eventType: string;\n  timestamp: string;\n  blockNumber: number;\n  gasUsed: string;\n}\n\ninterface BlockchainTransactionLogProps {\n  transactions: BlockchainTransaction[];\n}\n\nexport default function BlockchainTransactionLog({ transactions }: BlockchainTransactionLogProps) {\n  return (\n    <Card data-testid=\"card-blockchain-log\">\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Blockchain Transaction Log</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <ScrollArea className=\"h-[400px]\">\n          <div className=\"space-y-3\">\n            {transactions.map((tx) => (\n              <div \n                key={tx.id} \n                className=\"border border-border rounded-md p-3 space-y-2 hover-elevate\"\n                data-testid={`tx-${tx.id}`}\n              >\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-xs font-medium text-muted-foreground mb-1\">{tx.eventType}</p>\n                    <p className=\"text-xs font-mono text-foreground break-all\" title={tx.txHash}>\n                      {tx.txHash}\n                    </p>\n                  </div>\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\"\n                    onClick={() => {\n                      console.log('View on explorer:', tx.txHash);\n                      window.open(`https://explorer.blockdag.network/tx/${tx.txHash}`, '_blank');\n                    }}\n                    data-testid={`button-explorer-${tx.id}`}\n                  >\n                    <ExternalLink className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                  <span>{tx.timestamp}</span>\n                  <span>Block #{tx.blockNumber}</span>\n                  <span>{tx.gasUsed} gas</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2385},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/examples/ShippingInstructionsForm.tsx":{"content":"import ShippingInstructionsForm from '../ShippingInstructionsForm';\n\nexport default function ShippingInstructionsFormExample() {\n  return (\n    <div className=\"max-w-4xl\">\n      <ShippingInstructionsForm \n        onSubmit={(data) => {\n          console.log('Form submitted with data:', data);\n          alert('Shipping instructions submitted successfully!');\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":397},"contracts/BillOfLading.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\n/**\n * @title BillOfLading\n * @dev Smart contract for managing digital Bills of Lading on BlockDAG network\n * @notice This contract handles creation, verification, and transfer of eBLs\n */\ncontract BillOfLading {\n    \n    // Struct to represent a Bill of Lading\n    struct BoL {\n        string blNumber;\n        address shipper;\n        address consignee;\n        address carrier;\n        string vesselName;\n        string voyageNumber;\n        string portOfLoading;\n        string portOfDischarge;\n        string cargoDescription;\n        uint256 createdAt;\n        uint256 issuedAt;\n        BLStatus status;\n        address currentOwner;\n        bool exists;\n    }\n    \n    // Enum for Bill of Lading status\n    enum BLStatus {\n        Draft,\n        Issued,\n        InTransit,\n        AtPort,\n        CustomsClearance,\n        Delivered,\n        Surrendered\n    }\n    \n    // Mapping from BL number to BoL struct\n    mapping(string => BoL) private billsOfLading;\n    \n    // Mapping to track authorized parties for each BoL\n    mapping(string => mapping(address => bool)) private authorizedParties;\n    \n    // Array to store all BL numbers\n    string[] private blNumbers;\n    \n    // Events\n    event BillOfLadingCreated(\n        string indexed blNumber,\n        address indexed shipper,\n        address indexed consignee,\n        uint256 timestamp\n    );\n    \n    event BillOfLadingIssued(\n        string indexed blNumber,\n        address indexed issuer,\n        uint256 timestamp\n    );\n    \n    event StatusUpdated(\n        string indexed blNumber,\n        BLStatus newStatus,\n        uint256 timestamp\n    );\n    \n    event OwnershipTransferred(\n        string indexed blNumber,\n        address indexed from,\n        address indexed to,\n        uint256 timestamp\n    );\n    \n    event PartyAuthorized(\n        string indexed blNumber,\n        address indexed party,\n        uint256 timestamp\n    );\n    \n    // Modifiers\n    modifier onlyShipper(string memory _blNumber) {\n        require(\n            billsOfLading[_blNumber].shipper == msg.sender,\n            \"Only shipper can perform this action\"\n        );\n        _;\n    }\n    \n    modifier onlyOwner(string memory _blNumber) {\n        require(\n            billsOfLading[_blNumber].currentOwner == msg.sender,\n            \"Only current owner can perform this action\"\n        );\n        _;\n    }\n    \n    modifier onlyAuthorized(string memory _blNumber) {\n        require(\n            authorizedParties[_blNumber][msg.sender] || \n            billsOfLading[_blNumber].currentOwner == msg.sender,\n            \"Not authorized to access this Bill of Lading\"\n        );\n        _;\n    }\n    \n    modifier bolExists(string memory _blNumber) {\n        require(billsOfLading[_blNumber].exists, \"Bill of Lading does not exist\");\n        _;\n    }\n    \n    /**\n     * @dev Create a new Bill of Lading\n     * @param _blNumber Unique Bill of Lading number\n     * @param _consignee Address of the consignee\n     * @param _carrier Address of the carrier\n     * @param _vesselName Name of the vessel\n     * @param _voyageNumber Voyage number\n     * @param _portOfLoading Port of loading\n     * @param _portOfDischarge Port of discharge\n     * @param _cargoDescription Description of cargo\n     */\n    function createBillOfLading(\n        string memory _blNumber,\n        address _consignee,\n        address _carrier,\n        string memory _vesselName,\n        string memory _voyageNumber,\n        string memory _portOfLoading,\n        string memory _portOfDischarge,\n        string memory _cargoDescription\n    ) public {\n        require(!billsOfLading[_blNumber].exists, \"Bill of Lading already exists\");\n        require(_consignee != address(0), \"Invalid consignee address\");\n        require(_carrier != address(0), \"Invalid carrier address\");\n        \n        BoL memory newBoL = BoL({\n            blNumber: _blNumber,\n            shipper: msg.sender,\n            consignee: _consignee,\n            carrier: _carrier,\n            vesselName: _vesselName,\n            voyageNumber: _voyageNumber,\n            portOfLoading: _portOfLoading,\n            portOfDischarge: _portOfDischarge,\n            cargoDescription: _cargoDescription,\n            createdAt: block.timestamp,\n            issuedAt: 0,\n            status: BLStatus.Draft,\n            currentOwner: msg.sender,\n            exists: true\n        });\n        \n        billsOfLading[_blNumber] = newBoL;\n        blNumbers.push(_blNumber);\n        \n        // Authorize shipper, consignee, and carrier\n        authorizedParties[_blNumber][msg.sender] = true;\n        authorizedParties[_blNumber][_consignee] = true;\n        authorizedParties[_blNumber][_carrier] = true;\n        \n        emit BillOfLadingCreated(_blNumber, msg.sender, _consignee, block.timestamp);\n        emit PartyAuthorized(_blNumber, _consignee, block.timestamp);\n        emit PartyAuthorized(_blNumber, _carrier, block.timestamp);\n    }\n    \n    /**\n     * @dev Issue the Bill of Lading (move from Draft to Issued status)\n     * @param _blNumber Bill of Lading number\n     */\n    function issueBillOfLading(string memory _blNumber) \n        public \n        onlyShipper(_blNumber) \n        bolExists(_blNumber) \n    {\n        require(\n            billsOfLading[_blNumber].status == BLStatus.Draft,\n            \"Bill of Lading must be in Draft status\"\n        );\n        \n        billsOfLading[_blNumber].status = BLStatus.Issued;\n        billsOfLading[_blNumber].issuedAt = block.timestamp;\n        \n        emit BillOfLadingIssued(_blNumber, msg.sender, block.timestamp);\n        emit StatusUpdated(_blNumber, BLStatus.Issued, block.timestamp);\n    }\n    \n    /**\n     * @dev Update the status of a Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @param _newStatus New status\n     */\n    function updateStatus(string memory _blNumber, BLStatus _newStatus)\n        public\n        onlyAuthorized(_blNumber)\n        bolExists(_blNumber)\n    {\n        require(\n            billsOfLading[_blNumber].status != BLStatus.Surrendered,\n            \"Cannot update surrendered Bill of Lading\"\n        );\n        \n        billsOfLading[_blNumber].status = _newStatus;\n        \n        emit StatusUpdated(_blNumber, _newStatus, block.timestamp);\n    }\n    \n    /**\n     * @dev Transfer ownership of the Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @param _newOwner Address of the new owner\n     */\n    function transferOwnership(string memory _blNumber, address _newOwner)\n        public\n        onlyOwner(_blNumber)\n        bolExists(_blNumber)\n    {\n        require(_newOwner != address(0), \"Invalid new owner address\");\n        require(\n            billsOfLading[_blNumber].status != BLStatus.Surrendered,\n            \"Cannot transfer surrendered Bill of Lading\"\n        );\n        \n        address previousOwner = billsOfLading[_blNumber].currentOwner;\n        billsOfLading[_blNumber].currentOwner = _newOwner;\n        authorizedParties[_blNumber][_newOwner] = true;\n        \n        emit OwnershipTransferred(_blNumber, previousOwner, _newOwner, block.timestamp);\n        emit PartyAuthorized(_blNumber, _newOwner, block.timestamp);\n    }\n    \n    /**\n     * @dev Surrender the Bill of Lading (final state)\n     * @param _blNumber Bill of Lading number\n     */\n    function surrenderBillOfLading(string memory _blNumber)\n        public\n        onlyOwner(_blNumber)\n        bolExists(_blNumber)\n    {\n        require(\n            billsOfLading[_blNumber].status == BLStatus.Delivered,\n            \"Bill of Lading must be delivered before surrender\"\n        );\n        \n        billsOfLading[_blNumber].status = BLStatus.Surrendered;\n        \n        emit StatusUpdated(_blNumber, BLStatus.Surrendered, block.timestamp);\n    }\n    \n    /**\n     * @dev Authorize a party to access the Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @param _party Address to authorize\n     */\n    function authorizeParty(string memory _blNumber, address _party)\n        public\n        onlyShipper(_blNumber)\n        bolExists(_blNumber)\n    {\n        require(_party != address(0), \"Invalid party address\");\n        \n        authorizedParties[_blNumber][_party] = true;\n        \n        emit PartyAuthorized(_blNumber, _party, block.timestamp);\n    }\n    \n    /**\n     * @dev Get Bill of Lading details\n     * @param _blNumber Bill of Lading number\n     * @return BoL struct\n     */\n    function getBillOfLading(string memory _blNumber)\n        public\n        view\n        onlyAuthorized(_blNumber)\n        bolExists(_blNumber)\n        returns (BoL memory)\n    {\n        return billsOfLading[_blNumber];\n    }\n    \n    /**\n     * @dev Check if an address is authorized for a Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @param _party Address to check\n     * @return bool True if authorized\n     */\n    function isAuthorized(string memory _blNumber, address _party)\n        public\n        view\n        bolExists(_blNumber)\n        returns (bool)\n    {\n        return authorizedParties[_blNumber][_party];\n    }\n    \n    /**\n     * @dev Get the current owner of a Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @return address Current owner\n     */\n    function getOwner(string memory _blNumber)\n        public\n        view\n        bolExists(_blNumber)\n        returns (address)\n    {\n        return billsOfLading[_blNumber].currentOwner;\n    }\n    \n    /**\n     * @dev Get the status of a Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @return BLStatus Current status\n     */\n    function getStatus(string memory _blNumber)\n        public\n        view\n        bolExists(_blNumber)\n        returns (BLStatus)\n    {\n        return billsOfLading[_blNumber].status;\n    }\n    \n    /**\n     * @dev Get total number of Bills of Lading\n     * @return uint256 Total count\n     */\n    function getTotalBillsOfLading() public view returns (uint256) {\n        return blNumbers.length;\n    }\n    \n    /**\n     * @dev Verify the authenticity of a Bill of Lading\n     * @param _blNumber Bill of Lading number\n     * @return bool True if exists and issued\n     */\n    function verifyBillOfLading(string memory _blNumber)\n        public\n        view\n        returns (bool)\n    {\n        return billsOfLading[_blNumber].exists && \n               billsOfLading[_blNumber].status != BLStatus.Draft;\n    }\n}\n","size_bytes":10425},"client/src/lib/web3.ts":{"content":"import Web3 from 'web3';\n\nexport const BLOCKDAG_RPC_URL = 'https://ide.awakening.bdagscan.com/';\n\nexport const getWeb3 = () => {\n  const web3 = new Web3(BLOCKDAG_RPC_URL);\n  return web3;\n};\n\nexport const connectWallet = async () => {\n  if (typeof window.ethereum !== 'undefined') {\n    try {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      return accounts[0];\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n      throw error;\n    }\n  } else {\n    throw new Error('Please install MetaMask!');\n  }\n};\n\nexport const getBlockchainStatus = async () => {\n  try {\n    const web3 = getWeb3();\n    const blockNumber = await web3.eth.getBlockNumber();\n    const gasPrice = await web3.eth.getGasPrice();\n    \n    return {\n      blockNumber: blockNumber.toString(),\n      gasPrice: web3.utils.fromWei(gasPrice.toString(), 'gwei'),\n      connected: true,\n    };\n  } catch (error) {\n    console.error('Error getting blockchain status:', error);\n    return {\n      blockNumber: '0',\n      gasPrice: '0',\n      connected: false,\n    };\n  }\n};\n\nexport const formatAddress = (address: string) => {\n  if (!address) return '';\n  return `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;\n};\n\nexport const copyToClipboard = (text: string) => {\n  navigator.clipboard.writeText(text);\n};\n","size_bytes":1364},"client/src/components/ShippingInstructionsForm.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Upload } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface ShippingInstructionsFormProps {\n  onSubmit?: (data: ShippingInstructionsData) => void;\n}\n\nexport interface ShippingInstructionsData {\n  shipperName: string;\n  consigneeName: string;\n  origin: string;\n  destination: string;\n  containerNumber: string;\n  cargoDescription: string;\n  weight: string;\n}\n\nexport default function ShippingInstructionsForm({ onSubmit }: ShippingInstructionsFormProps) {\n  const [formData, setFormData] = useState<ShippingInstructionsData>({\n    shipperName: '',\n    consigneeName: '',\n    origin: '',\n    destination: '',\n    containerNumber: '',\n    cargoDescription: '',\n    weight: '',\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Shipping instructions submitted:', formData);\n    onSubmit?.(formData);\n  };\n\n  return (\n    <Card data-testid=\"card-shipping-instructions-form\">\n      <CardHeader>\n        <CardTitle>Upload Shipping Instructions</CardTitle>\n        <CardDescription>\n          Provide details for your shipment. This information will be recorded on the blockchain.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"shipperName\">Shipper Name</Label>\n              <Input\n                id=\"shipperName\"\n                placeholder=\"Enter shipper name\"\n                value={formData.shipperName}\n                onChange={(e) => setFormData({ ...formData, shipperName: e.target.value })}\n                data-testid=\"input-shipper-name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"consigneeName\">Consignee Name</Label>\n              <Input\n                id=\"consigneeName\"\n                placeholder=\"Enter consignee name\"\n                value={formData.consigneeName}\n                onChange={(e) => setFormData({ ...formData, consigneeName: e.target.value })}\n                data-testid=\"input-consignee-name\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"origin\">Port of Origin</Label>\n              <Input\n                id=\"origin\"\n                placeholder=\"e.g., Port of Shanghai\"\n                value={formData.origin}\n                onChange={(e) => setFormData({ ...formData, origin: e.target.value })}\n                data-testid=\"input-origin\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"destination\">Port of Destination</Label>\n              <Input\n                id=\"destination\"\n                placeholder=\"e.g., Port of Los Angeles\"\n                value={formData.destination}\n                onChange={(e) => setFormData({ ...formData, destination: e.target.value })}\n                data-testid=\"input-destination\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"containerNumber\">Container Number</Label>\n              <Input\n                id=\"containerNumber\"\n                placeholder=\"e.g., MSCU1234567\"\n                value={formData.containerNumber}\n                onChange={(e) => setFormData({ ...formData, containerNumber: e.target.value })}\n                data-testid=\"input-container-number\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"weight\">Weight (kg)</Label>\n              <Input\n                id=\"weight\"\n                type=\"number\"\n                placeholder=\"e.g., 25000\"\n                value={formData.weight}\n                onChange={(e) => setFormData({ ...formData, weight: e.target.value })}\n                data-testid=\"input-weight\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"cargoDescription\">Cargo Description</Label>\n            <Textarea\n              id=\"cargoDescription\"\n              placeholder=\"Describe the cargo contents...\"\n              value={formData.cargoDescription}\n              onChange={(e) => setFormData({ ...formData, cargoDescription: e.target.value })}\n              className=\"min-h-[100px]\"\n              data-testid=\"input-cargo-description\"\n            />\n          </div>\n\n          <div className=\"border-2 border-dashed border-border rounded-md p-8 text-center hover-elevate\">\n            <Upload className=\"h-8 w-8 mx-auto text-muted-foreground mb-2\" />\n            <p className=\"text-sm text-muted-foreground mb-1\">\n              Drop files here or click to upload\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Accepted formats: .pdf, .xml, .json\n            </p>\n            <input \n              type=\"file\" \n              className=\"hidden\" \n              accept=\".pdf,.xml,.json\"\n              data-testid=\"input-file-upload\"\n            />\n          </div>\n\n          <div className=\"flex gap-3\">\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              className=\"flex-1\"\n              data-testid=\"button-save-draft\"\n              onClick={() => console.log('Save draft clicked')}\n            >\n              Save Draft\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"flex-1\"\n              data-testid=\"button-submit-instructions\"\n            >\n              Submit Instructions\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":6157},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/examples/MetricCard.tsx":{"content":"import MetricCard from '../MetricCard';\nimport { Ship, FileText, Database, Clock } from 'lucide-react';\n\nexport default function MetricCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n      <MetricCard \n        title=\"Active Shipments\" \n        value={24} \n        icon={Ship} \n        trend=\"+12% from last month\"\n        testId=\"metric-shipments\"\n      />\n      <MetricCard \n        title=\"Pending Documents\" \n        value={8} \n        icon={FileText} \n        trend=\"3 need approval\"\n        testId=\"metric-documents\"\n      />\n      <MetricCard \n        title=\"Blockchain Transactions\" \n        value={156} \n        icon={Database} \n        trend=\"All verified\"\n        testId=\"metric-blockchain\"\n      />\n      <MetricCard \n        title=\"Avg. Processing Time\" \n        value=\"2.4h\" \n        icon={Clock} \n        trend=\"-18% improvement\"\n        testId=\"metric-time\"\n      />\n    </div>\n  );\n}\n","size_bytes":953},"client/src/components/StatusBadge.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\n\nexport type ShipmentStatus = \n  | \"draft\" \n  | \"pending_approval\" \n  | \"in_transit\" \n  | \"at_port\" \n  | \"customs_clearance\"\n  | \"delivered\" \n  | \"issue\"\n  | \"blockchain_verified\";\n\ninterface StatusBadgeProps {\n  status: ShipmentStatus;\n  className?: string;\n}\n\nconst statusConfig: Record<ShipmentStatus, { label: string; variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" }> = {\n  draft: { label: \"Draft\", variant: \"secondary\" },\n  pending_approval: { label: \"Pending Approval\", variant: \"outline\" },\n  in_transit: { label: \"In Transit\", variant: \"default\" },\n  at_port: { label: \"At Port\", variant: \"default\" },\n  customs_clearance: { label: \"Customs Clearance\", variant: \"outline\" },\n  delivered: { label: \"Delivered\", variant: \"default\" },\n  issue: { label: \"Issue\", variant: \"destructive\" },\n  blockchain_verified: { label: \"Blockchain Verified\", variant: \"default\" },\n};\n\nexport default function StatusBadge({ status, className }: StatusBadgeProps) {\n  const config = statusConfig[status];\n  \n  return (\n    <Badge variant={config.variant} className={className} data-testid={`badge-status-${status}`}>\n      {config.label}\n    </Badge>\n  );\n}\n","size_bytes":1206},"client/src/lib/mockData.ts":{"content":"export const mockBillsOfLading = [\n  {\n    id: '1',\n    blNumber: 'BL-2024-001',\n    shipper: 'Shanghai Exports Ltd.',\n    consignee: 'Rotterdam Imports BV',\n    vesselName: 'MSC GÜLSÜN',\n    voyageNumber: 'V425E',\n    portOfLoading: 'Shanghai, China',\n    portOfDischarge: 'Rotterdam, Netherlands',\n    cargoDescription: 'Electronic Components - 500 cartons',\n    status: 'In Transit',\n    blockchainStatus: 'Confirmed',\n    blockchainHash: '0x7f8a3c2b9e5d1f4a6c8b2d9e3f1a5c7b8d4e6f2a9c3b5d7e1f4a6c8b2d9e3f1a',\n    createdAt: new Date('2024-01-15'),\n  },\n  {\n    id: '2',\n    blNumber: 'BL-2024-002',\n    shipper: 'Dubai Trade Corp',\n    consignee: 'Singapore Logistics Pte Ltd',\n    vesselName: 'EVER GIVEN',\n    voyageNumber: 'V318W',\n    portOfLoading: 'Jebel Ali, UAE',\n    portOfDischarge: 'Singapore',\n    cargoDescription: 'Automotive Parts - 300 pallets',\n    status: 'At Port',\n    blockchainStatus: 'Pending',\n    blockchainHash: null,\n    createdAt: new Date('2024-01-18'),\n  },\n  {\n    id: '3',\n    blNumber: 'BL-2024-003',\n    shipper: 'Los Angeles Exports Inc',\n    consignee: 'Tokyo Trading Co',\n    vesselName: 'CMA CGM BENJAMIN FRANKLIN',\n    voyageNumber: 'V520P',\n    portOfLoading: 'Los Angeles, USA',\n    portOfDischarge: 'Tokyo, Japan',\n    cargoDescription: 'Agricultural Machinery - 50 units',\n    status: 'Delivered',\n    blockchainStatus: 'Confirmed',\n    blockchainHash: '0x2a4b6c8d9e1f3a5c7b9d2e4f6a8c1d3e5f7a9b2c4d6e8f1a3c5b7d9e2f4a6c8',\n    createdAt: new Date('2024-01-10'),\n  },\n];\n\nexport const mockShipmentEvents = [\n  {\n    timestamp: new Date('2024-01-15T08:00:00'),\n    location: 'Shanghai Port, China',\n    status: 'Container Loaded',\n    description: 'Container loaded onto vessel',\n  },\n  {\n    timestamp: new Date('2024-01-16T14:30:00'),\n    location: 'East China Sea',\n    status: 'Departed',\n    description: 'Vessel departed from Shanghai',\n  },\n  {\n    timestamp: new Date('2024-01-22T10:15:00'),\n    location: 'Singapore Strait',\n    status: 'In Transit',\n    description: 'Passed through Singapore Strait',\n  },\n  {\n    timestamp: new Date('2024-01-28T16:45:00'),\n    location: 'Suez Canal',\n    status: 'In Transit',\n    description: 'Transiting Suez Canal',\n  },\n];\n\nexport const mockTransactions = [\n  {\n    id: '1',\n    transactionHash: '0x7f8a3c2b9e5d1f4a6c8b2d9e3f1a5c7b8d4e6f2a9c3b5d7e1f4a6c8b2d9e3f1a',\n    blockNumber: '15420845',\n    from: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0',\n    to: '0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063',\n    gasUsed: '125000',\n    status: 'Confirmed',\n    type: 'Document Verification',\n    timestamp: new Date('2024-01-15T08:30:00'),\n  },\n  {\n    id: '2',\n    transactionHash: '0x2a4b6c8d9e1f3a5c7b9d2e4f6a8c1d3e5f7a9b2c4d6e8f1a3c5b7d9e2f4a6c8',\n    blockNumber: '15420920',\n    from: '0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063',\n    to: '0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b',\n    gasUsed: '98000',\n    status: 'Pending',\n    type: 'Ownership Transfer',\n    timestamp: new Date('2024-01-18T12:15:00'),\n  },\n];\n\nexport const mockTradeFinance = {\n  lcNumber: 'LC-2024-SH-001',\n  bank: 'HSBC Trade Finance',\n  amount: '125,000',\n  currency: 'USD',\n  paymentStatus: 'Letter of Credit Issued',\n  milestones: [\n    { name: 'LC Issued', status: 'completed', date: '2024-01-10', amount: 0 },\n    { name: 'Goods Shipped', status: 'completed', date: '2024-01-15', amount: 0 },\n    { name: 'Documents Presented', status: 'in_progress', date: null, amount: 31250 },\n    { name: 'Payment Released', status: 'pending', date: null, amount: 93750 },\n  ],\n};\n\nexport const STAKEHOLDER_ROLES = [\n  { value: 'shipper', label: 'Shipper', icon: 'Package' },\n  { value: 'carrier', label: 'Carrier', icon: 'Ship' },\n  { value: 'freight_forwarder', label: 'Freight Forwarder', icon: 'Truck' },\n  { value: 'customs', label: 'Customs Authority', icon: 'FileCheck' },\n  { value: 'bank', label: 'Trade Finance Bank', icon: 'Building2' },\n  { value: 'port_authority', label: 'Port Authority', icon: 'Anchor' },\n];\n\nexport const DOCUMENT_STATUSES = [\n  { value: 'draft', label: 'Draft', color: 'bg-gray-500' },\n  { value: 'pending', label: 'Pending Approval', color: 'bg-yellow-500' },\n  { value: 'in_transit', label: 'In Transit', color: 'bg-blue-500' },\n  { value: 'at_port', label: 'At Port', color: 'bg-purple-500' },\n  { value: 'customs_clearance', label: 'Customs Clearance', color: 'bg-orange-500' },\n  { value: 'delivered', label: 'Delivered', color: 'bg-green-500' },\n];\n","size_bytes":4455},"client/src/components/RoleSelector.tsx":{"content":"import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport type UserRole = \"shipper\" | \"carrier\" | \"customs\" | \"port\";\n\ninterface RoleSelectorProps {\n  currentRole: UserRole;\n  onRoleChange: (role: UserRole) => void;\n}\n\nconst roleLabels: Record<UserRole, string> = {\n  shipper: \"Shipper\",\n  carrier: \"Carrier\",\n  customs: \"Customs\",\n  port: \"Port Authority\",\n};\n\nexport default function RoleSelector({ currentRole, onRoleChange }: RoleSelectorProps) {\n  return (\n    <div className=\"flex items-center gap-3\">\n      <span className=\"text-sm text-muted-foreground\">Viewing as:</span>\n      <Select value={currentRole} onValueChange={(value) => onRoleChange(value as UserRole)}>\n        <SelectTrigger className=\"w-[180px]\" data-testid=\"select-role\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"shipper\" data-testid=\"role-option-shipper\">Shipper</SelectItem>\n          <SelectItem value=\"carrier\" data-testid=\"role-option-carrier\">Carrier</SelectItem>\n          <SelectItem value=\"customs\" data-testid=\"role-option-customs\">Customs</SelectItem>\n          <SelectItem value=\"port\" data-testid=\"role-option-port\">Port Authority</SelectItem>\n        </SelectContent>\n      </Select>\n      <Badge variant=\"outline\" data-testid=\"badge-current-role\">\n        {roleLabels[currentRole]}\n      </Badge>\n    </div>\n  );\n}\n","size_bytes":1469},"client/src/pages/Landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Ship, Shield, Clock, Globe } from \"lucide-react\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted/20\">\n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"max-w-4xl mx-auto text-center space-y-8\">\n          {/* Hero */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-center gap-2 mb-4\">\n              <div className=\"p-3 rounded-lg bg-primary text-primary-foreground\">\n                <Ship className=\"h-8 w-8\" />\n              </div>\n              <h1 className=\"text-4xl md:text-6xl font-bold\">ShipLedger</h1>\n            </div>\n            <p className=\"text-xl md:text-2xl text-muted-foreground\">\n              Blockchain-Powered Shipping & Trade Finance Platform\n            </p>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Bringing unprecedented transparency, collaboration, and efficiency to the global logistics and trade ecosystem.\n            </p>\n          </div>\n\n          {/* CTA */}\n          <div className=\"flex gap-4 justify-center flex-wrap\">\n            <Button \n              size=\"lg\" \n              onClick={() => window.location.href = '/api/login'}\n              data-testid=\"button-login\"\n            >\n              Get Started\n            </Button>\n            <Button \n              size=\"lg\" \n              variant=\"outline\"\n              onClick={() => window.location.href = '/api/login'}\n              data-testid=\"button-demo\"\n            >\n              View Demo\n            </Button>\n          </div>\n\n          {/* Features */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-16\">\n            <Card>\n              <CardHeader>\n                <Shield className=\"h-8 w-8 text-primary mb-2\" />\n                <CardTitle className=\"text-lg\">Blockchain Verified</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <CardDescription>\n                  Every transaction recorded on BlockDAG testnet for complete transparency\n                </CardDescription>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <Clock className=\"h-8 w-8 text-primary mb-2\" />\n                <CardTitle className=\"text-lg\">Real-Time Tracking</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <CardDescription>\n                  Track 120+ events from origin to delivery with live updates\n                </CardDescription>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <Globe className=\"h-8 w-8 text-primary mb-2\" />\n                <CardTitle className=\"text-lg\">Global Collaboration</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <CardDescription>\n                  Connect shippers, carriers, customs, and ports seamlessly\n                </CardDescription>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <Ship className=\"h-8 w-8 text-primary mb-2\" />\n                <CardTitle className=\"text-lg\">Smart Documents</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <CardDescription>\n                  Digital Bills of Lading with instant sharing and verification\n                </CardDescription>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Value Prop */}\n          <div className=\"mt-16 p-8 bg-card rounded-lg border border-border\">\n            <h2 className=\"text-2xl font-semibold mb-4\">\n              Transparent Trade. Trusted Shipping.\n            </h2>\n            <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n              ShipLedger eliminates paper-based documentation, reduces delays, and prevents fraud in maritime trade. \n              According to the African Development Bank, logistics inefficiencies add up to 40% to the cost of goods. \n              We're changing that with blockchain technology.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4374},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/CreateBillOfLadingForm.tsx":{"content":"import { useState } from 'react';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { FileText, Ship, Package, MapPin, Save, Send, Loader2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { useMutation } from '@tanstack/react-query';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useLocation } from 'wouter';\n\nexport default function CreateBillOfLadingForm() {\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [formData, setFormData] = useState({\n    blNumber: '',\n    shipper: '',\n    consignee: '',\n    notifyParty: '',\n    vesselName: '',\n    voyageNumber: '',\n    portOfLoading: '',\n    portOfDischarge: '',\n    cargoDescription: '',\n    containerNumbers: '',\n    grossWeight: '',\n    numberOfPackages: '',\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const createBolMutation = useMutation({\n    mutationFn: async (data: typeof formData & { status: string }) => {\n      const res = await apiRequest('POST', '/api/bills-of-lading', {\n        blNumber: data.blNumber,\n        shipper: data.shipper,\n        consignee: data.consignee,\n        notifyParty: data.notifyParty || null,\n        vesselName: data.vesselName,\n        voyageNumber: data.voyageNumber,\n        portOfLoading: data.portOfLoading,\n        portOfDischarge: data.portOfDischarge,\n        cargoDescription: data.cargoDescription,\n        containerNumbers: data.containerNumbers || null,\n        numberOfPackages: data.numberOfPackages ? parseInt(data.numberOfPackages) : null,\n        grossWeight: data.grossWeight || null,\n        status: data.status,\n      });\n      return await res.json();\n    },\n    onSuccess: (data: any) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/bills-of-lading'] });\n      toast({\n        title: 'Success',\n        description: `Bill of Lading ${data.blNumber} created successfully`,\n      });\n      setLocation('/documents');\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Error',\n        description: error.message || 'Failed to create Bill of Lading',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleSaveDraft = (e: React.FormEvent) => {\n    e.preventDefault();\n    createBolMutation.mutate({ ...formData, status: 'draft' });\n  };\n\n  const handleSubmitToBlockchain = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.blNumber || !formData.shipper || !formData.consignee || \n        !formData.vesselName || !formData.voyageNumber || !formData.portOfLoading || \n        !formData.portOfDischarge || !formData.cargoDescription) {\n      toast({\n        title: 'Validation Error',\n        description: 'Please fill in all required fields',\n        variant: 'destructive',\n      });\n      return;\n    }\n    createBolMutation.mutate({ ...formData, status: 'submitted' });\n  };\n\n  return (\n    <Card data-testid=\"form-create-bol\">\n      <CardHeader>\n        <div className=\"flex items-center gap-2\">\n          <FileText className=\"h-5 w-5 text-primary\" />\n          <h2 className=\"text-xl font-semibold\">Create Bill of Lading</h2>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <form className=\"space-y-6\">\n          <div className=\"grid lg:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"blNumber\">B/L Number *</Label>\n              <Input\n                id=\"blNumber\"\n                name=\"blNumber\"\n                value={formData.blNumber}\n                onChange={handleChange}\n                placeholder=\"BL-2024-XXX\"\n                required\n                data-testid=\"input-bl-number\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"voyageNumber\">Voyage Number *</Label>\n              <Input\n                id=\"voyageNumber\"\n                name=\"voyageNumber\"\n                value={formData.voyageNumber}\n                onChange={handleChange}\n                placeholder=\"V425E\"\n                required\n                data-testid=\"input-voyage-number\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-sm font-semibold text-muted-foreground\">\n              <Package className=\"h-4 w-4\" />\n              <span>Parties Information</span>\n            </div>\n            <div className=\"grid lg:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"shipper\">Shipper *</Label>\n                <Input\n                  id=\"shipper\"\n                  name=\"shipper\"\n                  value={formData.shipper}\n                  onChange={handleChange}\n                  placeholder=\"Company Name & Address\"\n                  required\n                  data-testid=\"input-shipper\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"consignee\">Consignee *</Label>\n                <Input\n                  id=\"consignee\"\n                  name=\"consignee\"\n                  value={formData.consignee}\n                  onChange={handleChange}\n                  placeholder=\"Company Name & Address\"\n                  required\n                  data-testid=\"input-consignee\"\n                />\n              </div>\n              <div className=\"lg:col-span-2\">\n                <Label htmlFor=\"notifyParty\">Notify Party</Label>\n                <Input\n                  id=\"notifyParty\"\n                  name=\"notifyParty\"\n                  value={formData.notifyParty}\n                  onChange={handleChange}\n                  placeholder=\"Company Name & Address\"\n                  data-testid=\"input-notify-party\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-sm font-semibold text-muted-foreground\">\n              <Ship className=\"h-4 w-4\" />\n              <span>Vessel & Route</span>\n            </div>\n            <div className=\"grid lg:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"vesselName\">Vessel Name *</Label>\n                <Input\n                  id=\"vesselName\"\n                  name=\"vesselName\"\n                  value={formData.vesselName}\n                  onChange={handleChange}\n                  placeholder=\"MSC GÜLSÜN\"\n                  required\n                  data-testid=\"input-vessel-name\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"portOfLoading\">Port of Loading *</Label>\n                <Input\n                  id=\"portOfLoading\"\n                  name=\"portOfLoading\"\n                  value={formData.portOfLoading}\n                  onChange={handleChange}\n                  placeholder=\"Shanghai, China\"\n                  required\n                  data-testid=\"input-port-loading\"\n                />\n              </div>\n              <div className=\"lg:col-span-2\">\n                <Label htmlFor=\"portOfDischarge\">Port of Discharge *</Label>\n                <Input\n                  id=\"portOfDischarge\"\n                  name=\"portOfDischarge\"\n                  value={formData.portOfDischarge}\n                  onChange={handleChange}\n                  placeholder=\"Rotterdam, Netherlands\"\n                  required\n                  data-testid=\"input-port-discharge\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-sm font-semibold text-muted-foreground\">\n              <MapPin className=\"h-4 w-4\" />\n              <span>Cargo Details</span>\n            </div>\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"cargoDescription\">Cargo Description *</Label>\n                <Textarea\n                  id=\"cargoDescription\"\n                  name=\"cargoDescription\"\n                  value={formData.cargoDescription}\n                  onChange={handleChange}\n                  placeholder=\"Electronic Components - 500 cartons\"\n                  rows={3}\n                  required\n                  data-testid=\"input-cargo-description\"\n                />\n              </div>\n              <div className=\"grid lg:grid-cols-3 gap-4\">\n                <div>\n                  <Label htmlFor=\"containerNumbers\">Container Numbers</Label>\n                  <Input\n                    id=\"containerNumbers\"\n                    name=\"containerNumbers\"\n                    value={formData.containerNumbers}\n                    onChange={handleChange}\n                    placeholder=\"MSCU1234567, MSCU7654321\"\n                    data-testid=\"input-container-numbers\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"numberOfPackages\">Number of Packages</Label>\n                  <Input\n                    id=\"numberOfPackages\"\n                    name=\"numberOfPackages\"\n                    type=\"number\"\n                    value={formData.numberOfPackages}\n                    onChange={handleChange}\n                    placeholder=\"500\"\n                    data-testid=\"input-packages\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"grossWeight\">Gross Weight (kg)</Label>\n                  <Input\n                    id=\"grossWeight\"\n                    name=\"grossWeight\"\n                    value={formData.grossWeight}\n                    onChange={handleChange}\n                    placeholder=\"12500\"\n                    data-testid=\"input-weight\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex gap-3 pt-4 border-t\">\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              className=\"gap-2\"\n              onClick={handleSaveDraft}\n              disabled={createBolMutation.isPending}\n              data-testid=\"button-save-draft\"\n            >\n              {createBolMutation.isPending ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Save className=\"h-4 w-4\" />\n              )}\n              Save Draft\n            </Button>\n            <Button \n              type=\"button\" \n              variant=\"default\" \n              className=\"gap-2\"\n              onClick={handleSubmitToBlockchain}\n              disabled={createBolMutation.isPending}\n              data-testid=\"button-submit-blockchain\"\n            >\n              {createBolMutation.isPending ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Send className=\"h-4 w-4\" />\n              )}\n              Submit to Blockchain\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":11205},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/pages/Tracking.tsx":{"content":"import ShipmentTracker from '@/components/ShipmentTracker';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Search, MapPin } from 'lucide-react';\nimport { mockShipmentEvents } from '@/lib/mockData';\n\nexport default function Tracking() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-semibold mb-2\">Shipment Tracking</h1>\n        <p className=\"text-muted-foreground\">\n          Real-time tracking of cargo and vessel movements\n        </p>\n      </div>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex gap-3\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Enter B/L number or container number...\"\n                className=\"pl-9\"\n                data-testid=\"input-search-tracking\"\n              />\n            </div>\n            <Button data-testid=\"button-track-shipment\">Track Shipment</Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"grid lg:grid-cols-2 gap-6\">\n        <ShipmentTracker\n          vesselName=\"MSC GÜLSÜN\"\n          currentLocation=\"Mediterranean Sea\"\n          currentStatus=\"In Transit\"\n          progress={65}\n          estimatedArrival={new Date('2024-02-05T14:30:00')}\n          events={mockShipmentEvents}\n        />\n\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <MapPin className=\"h-5 w-5 text-primary\" />\n              <h3 className=\"font-semibold\">Vessel Location</h3>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"aspect-video bg-muted rounded-md overflow-hidden relative\">\n              <div className=\"w-full h-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center\">\n                <MapPin className=\"h-16 w-16 text-white/50\" />\n              </div>\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-4\">\n                <div className=\"text-white\">\n                  <p className=\"text-sm font-medium\">Current Position</p>\n                  <p className=\"text-xs opacity-90\">35.8994° N, 14.5146° E</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"mt-4 space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Speed</span>\n                <span className=\"font-medium\">18.5 knots</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Heading</span>\n                <span className=\"font-medium\">295° NW</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Next Port</span>\n                <span className=\"font-medium\">Rotterdam, Netherlands</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3291},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/pages/Documents.tsx":{"content":"import BillOfLadingCard from '@/components/BillOfLadingCard';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Search, PlusCircle } from 'lucide-react';\nimport { Link } from 'wouter';\nimport { mockBillsOfLading } from '@/lib/mockData';\nimport { useState } from 'react';\n\nexport default function Documents() {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const filteredDocuments = mockBillsOfLading.filter(bol =>\n    bol.blNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    bol.shipper.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    bol.consignee.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-semibold mb-2\">Bills of Lading</h1>\n          <p className=\"text-muted-foreground\">\n            Manage and track all your shipping documents\n          </p>\n        </div>\n        <Link href=\"/create\">\n          <Button className=\"gap-2\" data-testid=\"button-create-bol\">\n            <PlusCircle className=\"h-4 w-4\" />\n            Create New\n          </Button>\n        </Link>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search by B/L number, shipper, or consignee...\"\n            className=\"pl-9\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            data-testid=\"input-search-documents\"\n          />\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {filteredDocuments.map((bol) => (\n          <BillOfLadingCard\n            key={bol.id}\n            blNumber={bol.blNumber}\n            shipper={bol.shipper}\n            consignee={bol.consignee}\n            vesselName={bol.vesselName}\n            portOfLoading={bol.portOfLoading}\n            portOfDischarge={bol.portOfDischarge}\n            status={bol.status}\n            blockchainStatus={bol.blockchainStatus}\n            blockchainHash={bol.blockchainHash}\n            cargoDescription={bol.cargoDescription}\n            onView={() => console.log('View details:', bol.blNumber)}\n          />\n        ))}\n      </div>\n\n      {filteredDocuments.length === 0 && (\n        <div className=\"text-center py-12\">\n          <p className=\"text-muted-foreground\">No documents found matching your search.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":2675},"client/src/components/examples/BillOfLadingForm.tsx":{"content":"import BillOfLadingForm from '../BillOfLadingForm';\n\nexport default function BillOfLadingFormExample() {\n  const mockInstructions = {\n    shipperName: 'Global Logistics Co.',\n    consigneeName: 'Pacific Imports Ltd.',\n    origin: 'Port of Shanghai',\n    destination: 'Port of Los Angeles',\n    containerNumber: 'MSCU1234567',\n    weight: '25000',\n    cargoDescription: 'Electronics components - 100 pallets',\n  };\n\n  return (\n    <div className=\"max-w-5xl\">\n      <BillOfLadingForm \n        instructionsData={mockInstructions}\n        onDraft={(data) => {\n          console.log('BoL draft saved:', data);\n          alert('Bill of Lading draft saved successfully!');\n        }}\n        onFinalize={(data) => {\n          console.log('BoL finalized:', data);\n          alert('Bill of Lading finalized and shared with authorized parties!');\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":875},"server/storage.ts":{"content":"import {\n  users,\n  billsOfLading,\n  shipments,\n  tradeFinance,\n  transactions,\n  type User,\n  type UpsertUser,\n  type InsertBillOfLading,\n  type BillOfLading,\n  type InsertShipment,\n  type Shipment,\n  type InsertTradeFinance,\n  type TradeFinance,\n  type InsertTransaction,\n  type Transaction,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc } from \"drizzle-orm\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  \n  createBillOfLading(bol: InsertBillOfLading): Promise<BillOfLading>;\n  getBillsOfLading(userId?: string): Promise<BillOfLading[]>;\n  getBillOfLadingById(id: string): Promise<BillOfLading | undefined>;\n  updateBillOfLadingStatus(id: string, status: string, blockchainHash?: string): Promise<BillOfLading | undefined>;\n  \n  createShipment(shipment: InsertShipment): Promise<Shipment>;\n  getShipmentByBlId(blId: string): Promise<Shipment | undefined>;\n  updateShipment(id: string, data: Partial<InsertShipment>): Promise<Shipment | undefined>;\n  \n  createTradeFinance(tf: InsertTradeFinance): Promise<TradeFinance>;\n  getTradeFinanceByBlId(blId: string): Promise<TradeFinance | undefined>;\n  updateTradeFinanceStatus(id: string, status: string): Promise<TradeFinance | undefined>;\n  \n  createTransaction(tx: InsertTransaction): Promise<Transaction>;\n  getTransactions(limit?: number): Promise<Transaction[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async createBillOfLading(bol: InsertBillOfLading): Promise<BillOfLading> {\n    const [billOfLading] = await db\n      .insert(billsOfLading)\n      .values(bol)\n      .returning();\n    return billOfLading;\n  }\n\n  async getBillsOfLading(userId?: string): Promise<BillOfLading[]> {\n    if (userId) {\n      return await db\n        .select()\n        .from(billsOfLading)\n        .where(eq(billsOfLading.createdBy, userId))\n        .orderBy(desc(billsOfLading.createdAt));\n    }\n    return await db\n      .select()\n      .from(billsOfLading)\n      .orderBy(desc(billsOfLading.createdAt))\n      .limit(100);\n  }\n\n  async getBillOfLadingById(id: string): Promise<BillOfLading | undefined> {\n    const [bol] = await db\n      .select()\n      .from(billsOfLading)\n      .where(eq(billsOfLading.id, id));\n    return bol;\n  }\n\n  async updateBillOfLadingStatus(\n    id: string,\n    status: string,\n    blockchainHash?: string\n  ): Promise<BillOfLading | undefined> {\n    const updates: any = { status };\n    if (blockchainHash) {\n      updates.blockchainHash = blockchainHash;\n      updates.blockchainStatus = 'confirmed';\n    }\n    \n    const [updated] = await db\n      .update(billsOfLading)\n      .set(updates)\n      .where(eq(billsOfLading.id, id))\n      .returning();\n    return updated;\n  }\n\n  async createShipment(shipment: InsertShipment): Promise<Shipment> {\n    const [created] = await db\n      .insert(shipments)\n      .values(shipment)\n      .returning();\n    return created;\n  }\n\n  async getShipmentByBlId(blId: string): Promise<Shipment | undefined> {\n    const [shipment] = await db\n      .select()\n      .from(shipments)\n      .where(eq(shipments.blId, blId));\n    return shipment;\n  }\n\n  async updateShipment(\n    id: string,\n    data: Partial<InsertShipment>\n  ): Promise<Shipment | undefined> {\n    const [updated] = await db\n      .update(shipments)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(shipments.id, id))\n      .returning();\n    return updated;\n  }\n\n  async createTradeFinance(tf: InsertTradeFinance): Promise<TradeFinance> {\n    const [created] = await db\n      .insert(tradeFinance)\n      .values(tf)\n      .returning();\n    return created;\n  }\n\n  async getTradeFinanceByBlId(blId: string): Promise<TradeFinance | undefined> {\n    const [tf] = await db\n      .select()\n      .from(tradeFinance)\n      .where(eq(tradeFinance.blId, blId));\n    return tf;\n  }\n\n  async updateTradeFinanceStatus(\n    id: string,\n    status: string\n  ): Promise<TradeFinance | undefined> {\n    const [updated] = await db\n      .update(tradeFinance)\n      .set({ paymentStatus: status })\n      .where(eq(tradeFinance.id, id))\n      .returning();\n    return updated;\n  }\n\n  async createTransaction(tx: InsertTransaction): Promise<Transaction> {\n    const [created] = await db\n      .insert(transactions)\n      .values(tx)\n      .returning();\n    return created;\n  }\n\n  async getTransactions(limit: number = 50): Promise<Transaction[]> {\n    return await db\n      .select()\n      .from(transactions)\n      .orderBy(desc(transactions.timestamp))\n      .limit(limit);\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":5077},"client/src/pages/CreateDocument.tsx":{"content":"import CreateBillOfLadingForm from '@/components/CreateBillOfLadingForm';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft } from 'lucide-react';\nimport { Link } from 'wouter';\n\nexport default function CreateDocument() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <Link href=\"/documents\">\n          <Button variant=\"ghost\" className=\"gap-2 mb-4\" data-testid=\"button-back\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to Documents\n          </Button>\n        </Link>\n        <h1 className=\"text-3xl font-semibold mb-2\">Create Bill of Lading</h1>\n        <p className=\"text-muted-foreground\">\n          Create a new digital Bill of Lading and submit to blockchain\n        </p>\n      </div>\n\n      <CreateBillOfLadingForm />\n    </div>\n  );\n}\n","size_bytes":798},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/examples/StakeholderSelector.tsx":{"content":"import { useState } from 'react';\nimport StakeholderSelector from '../StakeholderSelector';\n\nexport default function StakeholderSelectorExample() {\n  const [role, setRole] = useState('shipper');\n\n  return (\n    <div className=\"p-6\">\n      <StakeholderSelector \n        currentRole={role} \n        onRoleChange={(newRole) => {\n          setRole(newRole);\n          console.log('Role changed to:', newRole);\n        }} \n      />\n    </div>\n  );\n}\n","size_bytes":445},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/AppSidebar\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport StakeholderSelector from \"@/components/StakeholderSelector\";\nimport BlockchainStatus from \"@/components/BlockchainStatus\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { LogOut, User as UserIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport Landing from \"@/pages/Landing\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Documents from \"@/pages/Documents\";\nimport Tracking from \"@/pages/Tracking\";\nimport Finance from \"@/pages/Finance\";\nimport Transactions from \"@/pages/Transactions\";\nimport CreateDocument from \"@/pages/CreateDocument\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router({ currentRole }: { currentRole: string }) {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <Switch>\n        <Route path=\"/\" component={Landing} />\n        <Route component={NotFound} />\n      </Switch>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/\">\n        {() => <Dashboard currentRole={currentRole} />}\n      </Route>\n      <Route path=\"/documents\" component={Documents} />\n      <Route path=\"/tracking\" component={Tracking} />\n      <Route path=\"/finance\" component={Finance} />\n      <Route path=\"/transactions\" component={Transactions} />\n      <Route path=\"/create\" component={CreateDocument} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  const [currentRole, setCurrentRole] = useState('shipper');\n  \n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AuthWrapper \n          currentRole={currentRole} \n          setCurrentRole={setCurrentRole}\n          sidebarStyle={sidebarStyle}\n        />\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nfunction AuthWrapper({ \n  currentRole, \n  setCurrentRole, \n  sidebarStyle \n}: { \n  currentRole: string; \n  setCurrentRole: (role: string) => void;\n  sidebarStyle: Record<string, string>;\n}) {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading || !isAuthenticated) {\n    return <Router currentRole={currentRole} />;\n  }\n\n  return (\n    <SidebarProvider style={sidebarStyle as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"flex items-center justify-between gap-4 p-4 border-b bg-background\">\n            <div className=\"flex items-center gap-3\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div className=\"hidden md:block\">\n                <BlockchainStatus compact />\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <StakeholderSelector \n                currentRole={currentRole} \n                onRoleChange={setCurrentRole} \n              />\n              <ThemeToggle />\n              <UserMenu />\n            </div>\n          </header>\n          <main className=\"flex-1 overflow-auto p-6\">\n            <Router currentRole={currentRole} />\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nfunction UserMenu() {\n  const { user } = useAuth();\n\n  if (!user) return null;\n\n  const initials = `${user.firstName?.[0] || ''}${user.lastName?.[0] || ''}`.toUpperCase() || 'U';\n  const displayName = user.firstName && user.lastName \n    ? `${user.firstName} ${user.lastName}` \n    : user.email || 'User';\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger data-testid=\"button-user-menu\">\n        <Avatar className=\"h-9 w-9\">\n          <AvatarImage src={user.profileImageUrl || undefined} alt={displayName} />\n          <AvatarFallback>{initials}</AvatarFallback>\n        </Avatar>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuLabel>\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"text-sm font-medium\">{displayName}</div>\n            {user.email && <div className=\"text-xs text-muted-foreground\">{user.email}</div>}\n            {user.company && <div className=\"text-xs text-muted-foreground\">{user.company}</div>}\n          </div>\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <DropdownMenuItem asChild>\n          <a href=\"/api/logout\" className=\"flex items-center gap-2\" data-testid=\"button-logout\">\n            <LogOut className=\"h-4 w-4\" />\n            Logout\n          </a>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n\nexport default App;\n","size_bytes":5317},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"contracts/README.md":{"content":"# ShipLedger Smart Contracts\n\nThis directory contains the Solidity smart contracts for the ShipLedger blockchain-powered maritime shipping platform, designed to run on the BlockDAG network.\n\n## Contracts Overview\n\n### 1. BillOfLading.sol\nMain contract for managing digital Bills of Lading (eBL).\n\n**Key Features:**\n- Create and issue digital Bills of Lading\n- Transfer ownership between parties\n- Track document status throughout shipment lifecycle\n- Permission-based access control\n- Document verification and authentication\n\n**Main Functions:**\n- `createBillOfLading()` - Create a new BoL\n- `issueBillOfLading()` - Issue the BoL (move from draft to issued)\n- `transferOwnership()` - Transfer BoL to new owner\n- `updateStatus()` - Update shipment status\n- `surrenderBillOfLading()` - Final surrender upon delivery\n\n**Status Flow:**\nDraft → Issued → In Transit → At Port → Customs Clearance → Delivered → Surrendered\n\n### 2. TradeFinance.sol\nSmart contract for automated trade finance workflows and Letter of Credit management.\n\n**Key Features:**\n- Issue and manage Letters of Credit (L/C)\n- Define payment milestones with percentages\n- Automate payment releases based on milestone completion\n- Handle document presentation and acceptance\n- Expiry and cancellation management\n\n**Main Functions:**\n- `issueLetterOfCredit()` - Issue new L/C with escrow\n- `addMilestone()` - Define payment milestones\n- `presentDocuments()` - Beneficiary presents documents\n- `acceptDocuments()` - Bank accepts documents\n- `completeMilestone()` - Trigger automatic payment\n- `markAsExpired()` - Handle L/C expiration\n\n**Payment Flow:**\nIssued → Documents Presented → Under Review → Accepted → Milestones Completed → Paid\n\n### 3. ShipmentTracking.sol\nContract for immutable recording of shipment events and cargo movements.\n\n**Key Features:**\n- Record real-time shipment events on blockchain\n- Verify events by authorized parties\n- Track container movements and status\n- Authorize multiple recorders (carriers, ports, customs)\n- Maintain immutable audit trail\n\n**Main Functions:**\n- `createShipment()` - Initialize new shipment tracking\n- `recordEvent()` - Record shipment event (location, status)\n- `updateStatus()` - Update overall shipment status\n- `verifyEvent()` - Verify recorded events\n- `authorizeRecorder()` - Grant event recording permissions\n\n**Tracking Flow:**\nCreated → Loaded → In Transit → At Port → Customs Clearance → Out for Delivery → Delivered\n\n## Deployment on BlockDAG Network\n\n### Prerequisites\n1. BlockDAG wallet with testnet tokens\n2. Truffle, Hardhat, or Remix IDE\n3. BlockDAG RPC endpoint: `https://ide.awakening.bdagscan.com/`\n\n### Using Remix IDE (Recommended for BlockDAG)\n\n1. **Open Remix**: Navigate to https://remix.ethereum.org/\n2. **Load Contracts**: Copy the `.sol` files to Remix\n3. **Compile**: \n   - Select Solidity compiler version `0.8.20` or higher\n   - Click \"Compile BillOfLading.sol\" (repeat for other contracts)\n4. **Deploy**:\n   - Switch to \"Deploy & Run Transactions\" tab\n   - Environment: Select \"Injected Provider - MetaMask\"\n   - Connect MetaMask to BlockDAG network:\n     - Network Name: BlockDAG Testnet\n     - RPC URL: `https://ide.awakening.bdagscan.com/`\n     - Chain ID: (Check BlockDAG documentation)\n   - Deploy contracts one by one\n\n### Using Hardhat\n\n1. Install dependencies:\n```bash\nnpm install --save-dev hardhat @nomicfoundation/hardhat-toolbox\n```\n\n2. Create `hardhat.config.js`:\n```javascript\nrequire(\"@nomicfoundation/hardhat-toolbox\");\n\nmodule.exports = {\n  solidity: \"0.8.20\",\n  networks: {\n    blockdag: {\n      url: \"https://ide.awakening.bdagscan.com/\",\n      accounts: [process.env.PRIVATE_KEY]\n    }\n  }\n};\n```\n\n3. Create deployment script `scripts/deploy.js`:\n```javascript\nasync function main() {\n  // Deploy BillOfLading\n  const BillOfLading = await ethers.getContractFactory(\"BillOfLading\");\n  const bol = await BillOfLading.deploy();\n  await bol.deployed();\n  console.log(\"BillOfLading deployed to:\", bol.address);\n\n  // Deploy TradeFinance\n  const TradeFinance = await ethers.getContractFactory(\"TradeFinance\");\n  const tf = await TradeFinance.deploy();\n  await tf.deployed();\n  console.log(\"TradeFinance deployed to:\", tf.address);\n\n  // Deploy ShipmentTracking\n  const ShipmentTracking = await ethers.getContractFactory(\"ShipmentTracking\");\n  const st = await ShipmentTracking.deploy();\n  await st.deployed();\n  console.log(\"ShipmentTracking deployed to:\", st.address);\n}\n\nmain().catch((error) => {\n  console.error(error);\n  process.exitCode = 1;\n});\n```\n\n4. Deploy:\n```bash\nnpx hardhat run scripts/deploy.js --network blockdag\n```\n\n## Integration with Frontend\n\nAfter deploying contracts, update the frontend with:\n\n1. **Contract Addresses**: Save deployed addresses\n2. **ABIs**: Copy contract ABIs from Remix or Hardhat artifacts\n3. **Update Web3 Configuration**: \n\n```typescript\n// client/src/lib/contracts.ts\nexport const CONTRACTS = {\n  BillOfLading: {\n    address: '0x...', // Your deployed address\n    abi: [...] // Contract ABI\n  },\n  TradeFinance: {\n    address: '0x...',\n    abi: [...]\n  },\n  ShipmentTracking: {\n    address: '0x...',\n    abi: [...]\n  }\n};\n```\n\n## Smart Contract Interactions\n\n### Create Bill of Lading\n```javascript\nconst contract = new web3.eth.Contract(BillOfLading.abi, BillOfLading.address);\nawait contract.methods.createBillOfLading(\n  \"BL-2024-001\",\n  consigneeAddress,\n  carrierAddress,\n  \"MSC GÜLSÜN\",\n  \"V425E\",\n  \"Shanghai, China\",\n  \"Rotterdam, Netherlands\",\n  \"Electronic Components\"\n).send({ from: shipperAddress });\n```\n\n### Issue Letter of Credit\n```javascript\nconst contract = new web3.eth.Contract(TradeFinance.abi, TradeFinance.address);\nawait contract.methods.issueLetterOfCredit(\n  \"LC-2024-001\",\n  beneficiaryAddress,\n  applicantAddress,\n  web3.utils.toWei(\"125000\", \"ether\"),\n  expiryTimestamp\n).send({ \n  from: bankAddress,\n  value: web3.utils.toWei(\"125000\", \"ether\")\n});\n```\n\n### Record Shipment Event\n```javascript\nconst contract = new web3.eth.Contract(ShipmentTracking.abi, ShipmentTracking.address);\nawait contract.methods.recordEvent(\n  \"SHIP-2024-001\",\n  \"Container Loaded\",\n  \"Shanghai Port, China\",\n  \"Container loaded onto vessel MSC GÜLSÜN\"\n).send({ from: carrierAddress });\n```\n\n## Security Considerations\n\n1. **Access Control**: All contracts implement role-based access control\n2. **Reentrancy Protection**: Payment functions use checks-effects-interactions pattern\n3. **Input Validation**: All inputs are validated for correctness\n4. **Event Logging**: All critical actions emit events for transparency\n5. **Status Progression**: Status can only move forward, not backward\n\n## Gas Optimization\n\n- Use `string memory` for temporary strings\n- Pack struct variables efficiently\n- Use events instead of storage when possible\n- Minimize storage writes\n\n## Testing\n\nCreate test files in `test/` directory:\n\n```bash\nnpx hardhat test\n```\n\n## License\n\nMIT License - See individual contract files for details.\n\n## Support\n\nFor BlockDAG-specific questions:\n- BlockDAG Documentation: https://blockdag.network/docs\n- BlockDAG Explorer: https://bdagscan.com/\n- IDE: https://ide.awakening.bdagscan.com/\n","size_bytes":7154},"README.md":{"content":"# Technical Specifications\n\n# 1. Introduction\n\n## 1.1 Executive Summary\n\n### 1.1.1 Brief Overview of the Project\n\nShipLedger represents a revolutionary blockchain-powered digital shipping and trade finance platform designed to transform the global maritime trade ecosystem. Built on BlockDAG's fully EVM-compatible infrastructure, the platform enables developers familiar with Ethereum's toolset, including Solidity and other Ethereum-compatible programming languages, to easily build and deploy decentralized applications (dApps) on the network. The platform leverages BlockDAG's superior speed (1400 TPS and higher) and much lower transaction fees, while achieving full Ethereum Virtual Machine (EVM) compatibility to effectively build a high-speed bridge to Ethereum's massive $500 billion economy.\n\n### 1.1.2 Core Business Problem Being Solved\n\nThe global maritime trade industry faces critical inefficiencies that significantly impact operational costs and trade flow. The shipping industry has long been plagued by complex processes, data opacity, inefficiencies, and high operational costs. Traditional shipping processes involve multiple parties and extensive paperwork, leading to slow information transfer, coordination difficulties, and even fraud. For instance, a shipping trade from Kenya to the Netherlands typically requires over 30 parties, more than 200 interactions, and up to 10 days to process shipping documents.\n\nTransactions involving paper documentation often require physical inspection of documents, resulting in high transaction costs for shipments, and an estimated 20% of operational budgets are due to poor information management. The system inefficiencies associated with these transactions, including transaction costs and payment terms such as \"Cash Against Documents\", are estimated to cost over $34 billion.\n\n### 1.1.3 Key Stakeholders and Users\n\n| Stakeholder Category | Primary Users | Role in Platform |\n|---------------------|---------------|------------------|\n| **Shipping Operations** | Shippers, Carriers, Freight Forwarders | Document creation, cargo tracking, route management |\n| **Financial Services** | Banks, Trade Finance Providers, Insurance Companies | Payment processing, trade finance, risk management |\n| **Regulatory Bodies** | Customs Authorities, Port Authorities, Maritime Regulators | Compliance verification, clearance processing |\n| **Technology Partners** | Blockchain Developers, System Integrators | Platform development, maintenance, integration |\n\n### 1.1.4 Expected Business Impact and Value Proposition\n\nShipLedger addresses the maritime industry's core challenges through measurable improvements:\n\n- **Cost Reduction**: Blockchain implementation reduces costs by 6%, highlighting blockchain's potential to revolutionize maritime trade\n- **Process Efficiency**: The cost of a blockchain-based electronic Bill of Lading is only $15, approximately 15% of the price of a traditional paper BoL\n- **Payment Acceleration**: Addresses the issue where hundreds of billions of dollars are left unpaid as payments take an average of 42 days to reach the invoicing organization\n- **Transparency Enhancement**: Ensures that all stakeholders have real-time access to accurate and immutable data, with platforms like TradeLens demonstrating significant efficiency improvements by digitizing trade documentation and providing end-to-end visibility\n\n## 1.2 System Overview\n\n### 1.2.1 Project Context\n\n#### Business Context and Market Positioning\n\nMaritime shipping, as the primary mode of international trade, handles approximately 90% of global trade volume. According to the United Nations Conference on Trade and Development (UNCTAD), global maritime trade is expected to grow by 2% in 2024 and continue to expand at an average annual rate of 2.4% until 2029. In this context, the application of blockchain technology will provide critical technical support to the shipping industry.\n\nShipLedger positions itself within this expanding market by leveraging BlockDAG's EVM-compatible account-based subsystem that supports standardized smart contracts, enabling seamless integration with existing Ethereum-based financial and logistics applications.\n\n#### Current System Limitations\n\nThe maritime industry operates under significant technological constraints:\n\n- **Information Asymmetry**: Extant operation systems in the industry are characterized by bureaucracy, centralization, lack of bias, and information asymmetry. Information asymmetry is a complication caused by intermediate participants in the operating process\n- **Documentation Inefficiencies**: A single international shipment can involve more than 40 organizations, generating a large volume of documents in various formats. This inefficient operational model not only increases time costs\n- **Security Vulnerabilities**: Cybersecurity is an increasing concern in the maritime sector, with intentional cyber-attacks or unintentional errors having the potential to result in operational, safety or security failures\n\n#### Integration with Existing Enterprise Landscape\n\nShipLedger's architecture supports comprehensive integration through:\n\n| Integration Layer | Technology Stack | Compatibility Features |\n|------------------|------------------|----------------------|\n| **Blockchain Layer** | BlockDAG with EVM compatibility | Supports popular Ethereum development tools, such as Truffle, Remix, MetaMask, and Hardhat |\n| **Smart Contracts** | Solidity-based contracts | Supports Ethereum token standards like ERC-20 (fungible tokens) and ERC-721 (non-fungible tokens) |\n| **Development Tools** | Standard Ethereum toolchain | Existing dApps can move to BlockDAG with minimal adjustments, while teams continue to work with familiar resources |\n\n### 1.2.2 High-Level Description\n\n#### Primary System Capabilities\n\nShipLedger delivers comprehensive maritime trade digitalization through:\n\n1. **Digital Document Management**: Automated creation, verification, and sharing of Bills of Lading and shipping instructions\n2. **Real-Time Tracking**: Recording critical data such as cargo transportation information, vessel locations, and port handling records on the blockchain, enabling all parties to access and verify information in real time\n3. **Smart Contract Automation**: Smart contract functionality enables the automation of complex business processes\n4. **Permission-Based Access Control**: Granular control over data visibility and editing rights across stakeholders\n\n#### Major System Components\n\n```mermaid\ngraph TB\n    A[ShipLedger Platform] --> B[Blockchain Infrastructure]\n    A --> C[Smart Contract Layer]\n    A --> D[Document Management]\n    A --> E[Tracking & Analytics]\n    \n    B --> B1[BlockDAG Network]\n    B --> B2[EVM Compatibility]\n    B --> B3[Consensus Mechanism]\n    \n    C --> C1[Trade Finance Contracts]\n    C --> C2[Bill of Lading Contracts]\n    C --> C3[Payment Automation]\n    \n    D --> D1[Digital BoL Creation]\n    D --> D2[Document Verification]\n    D --> D3[Secure Storage]\n    \n    E --> E1[Real-Time Tracking]\n    E --> E2[Event Monitoring]\n    E --> E3[Analytics Dashboard]\n```\n\n#### Core Technical Approach\n\nThe platform utilizes BlockDAG's hybrid architecture that achieves a throughput of 10 blocks per second (10 TPS) for foundational operations, while supporting 2,000–15,000 TPS in high-load scenarios. This is achieved through a DAG layer that allows transactions to reference multiple predecessors for parallel validation, eliminating the bottlenecks of linear blockchains.\n\n### 1.2.3 Success Criteria\n\n#### Measurable Objectives\n\n| Objective Category | Target Metrics | Measurement Timeline |\n|-------------------|----------------|---------------------|\n| **Operational Efficiency** | 50% reduction in document processing time | 6 months post-deployment |\n| **Cost Optimization** | 30% reduction in administrative costs | 12 months post-deployment |\n| **Transaction Speed** | 95% of transactions processed within 24 hours | Ongoing operational metric |\n| **User Adoption** | 100+ active shipping companies within first year | 12 months post-launch |\n\n#### Critical Success Factors\n\n1. **Technical Performance**: Superior speed and much lower transaction fees compared to traditional blockchain networks\n2. **Regulatory Compliance**: Full adherence to international maritime and trade finance regulations\n3. **Stakeholder Integration**: Seamless onboarding of existing maritime ecosystem participants\n4. **Security Assurance**: Zero tolerance for data breaches or unauthorized access incidents\n\n#### Key Performance Indicators (KPIs)\n\n- **Platform Utilization**: Number of Bills of Lading processed monthly\n- **Network Performance**: Average transaction confirmation time\n- **Cost Savings**: Percentage reduction in operational expenses for participating organizations\n- **Error Reduction**: Decrease in documentation errors and disputes\n- **Compliance Rate**: Percentage of transactions meeting regulatory requirements\n\n## 1.3 Scope\n\n### 1.3.1 In-Scope\n\n#### Core Features and Functionalities\n\n**Digital Shipping Documentation**\n- Electronic Bill of Lading (eBL) creation and management\n- Automated shipping instruction processing\n- Digital certificate and permit handling\n- Smart contract-based document verification\n\n**Real-Time Tracking and Monitoring**\n- Container and cargo tracking across 120+ planned, estimated, and actual events\n- Vessel location and status monitoring\n- Port operation visibility\n- Supply chain event logging and timestamping\n\n**Trade Finance Integration**\n- Automated payment processing through smart contracts\n- Letter of credit digitalization\n- Trade finance workflow automation\n- Multi-currency transaction support\n\n**Stakeholder Collaboration Platform**\n- Permission-based data access control\n- Real-time notification system\n- Collaborative workflow management\n- Dispute resolution mechanisms\n\n#### Implementation Boundaries\n\n| Boundary Category | Included Elements | Coverage Scope |\n|------------------|------------------|----------------|\n| **Geographic Coverage** | Global maritime trade routes | All major shipping corridors and ports |\n| **User Groups** | Shippers, carriers, freight forwarders, banks, customs, ports | Complete maritime trade ecosystem |\n| **Document Types** | Bills of Lading, shipping instructions, customs declarations, certificates | Core trade documentation |\n| **Transaction Types** | Shipping payments, trade finance, insurance claims | Primary financial transactions |\n\n#### Essential Integrations\n\n- **Port Management Systems**: Integration with major port authorities' existing systems\n- **Customs Platforms**: Direct connectivity with customs clearance systems\n- **Banking Networks**: Integration with trade finance and payment systems\n- **ERP Systems**: Connectivity with shippers' and freight forwarders' enterprise systems\n\n#### Key Technical Requirements\n\n- Full Ethereum Virtual Machine (EVM) compatibility, allowing for seamless integration and deployment of Ethereum-based smart contracts, ensuring that developers familiar with Ethereum's toolset can easily build and deploy decentralized applications\n- High-throughput transaction processing capability\n- Enterprise-grade security and data protection\n- Regulatory compliance framework integration\n- Multi-language and multi-currency support\n\n### 1.3.2 Out-of-Scope\n\n#### Explicitly Excluded Features/Capabilities\n\n- **Physical Asset Management**: Warehouse management, inventory control systems\n- **Vessel Operations**: Ship navigation systems, crew management, maintenance scheduling\n- **Commodity Trading**: Spot market trading, commodity price discovery, futures contracts\n- **Insurance Underwriting**: Risk assessment algorithms, premium calculation engines\n- **Regulatory Reporting**: Automated generation of regulatory reports beyond trade documentation\n\n#### Future Phase Considerations\n\n- **Advanced Analytics**: Predictive analytics for trade route optimization\n- **IoT Integration**: Direct sensor data integration for cargo condition monitoring\n- **AI-Powered Insights**: Machine learning algorithms for trade pattern analysis\n- **Cross-Border Regulatory Harmonization**: Automated compliance across multiple jurisdictions\n\n#### Integration Points Not Covered\n\n- **Legacy System Migration**: Full data migration from existing proprietary systems\n- **Third-Party Logistics Providers**: Integration with specialized logistics service providers\n- **Commodity Exchanges**: Direct integration with commodity trading platforms\n- **Weather and Route Optimization Services**: Integration with maritime weather and routing services\n\n#### Unsupported Use Cases\n\n- **Passenger Shipping**: Cruise lines and passenger ferry operations\n- **Inland Waterway Transport**: River and canal transportation systems\n- **Military and Defense Shipping**: Government and defense-related maritime operations\n- **Recreational Boating**: Private yacht and recreational vessel documentation\n\n# 2. Product Requirements\n\n## 2.1 Feature Catalog\n\n### 2.1.1 Digital Document Management Features\n\n| Feature ID | Feature Name | Category | Priority | Status |\n|------------|--------------|----------|----------|---------|\n| F-001 | Electronic Bill of Lading Creation | Document Management | Critical | Proposed |\n| F-002 | Digital Shipping Instructions Processing | Document Management | Critical | Proposed |\n| F-003 | Smart Document Verification | Document Management | High | Proposed |\n| F-004 | Permission-Based Document Access | Security | Critical | Proposed |\n\n#### F-001: Electronic Bill of Lading Creation\n\n**Description**\n- **Overview**: BlockDAG is fully Ethereum Virtual Machine (EVM) compatible, allowing for seamless integration and deployment of Ethereum-based smart contracts. This compatibility ensures that developers familiar with Ethereum's toolset, including Solidity and other Ethereum-compatible programming languages, can easily build and deploy decentralized applications (dApps) on the BlockDAG network. The platform enables automated creation of blockchain-based electronic Bills of Lading using smart contracts.\n- **Business Value**: Bill of Lading cost $15, approximately 15% of the estimated typical cost for a document to be delivered such long-distance using courier services\n- **User Benefits**: Eliminates paper-based processes, reduces document transfer time from days to minutes, and provides tamper-proof documentation\n- **Technical Context**: CargoX has created a blockchain-based platform for sharing smart B/L. The system is paperless and is reported to cut transfer time from several days to minutes or seconds.\n\n**Dependencies**\n- **Prerequisite Features**: None (foundational feature)\n- **System Dependencies**: BlockDAG blockchain infrastructure, EVM compatibility layer\n- **External Dependencies**: BlockDAG also supports popular Ethereum development tools, such as Truffle, Remix, MetaMask, and Hardhat\n- **Integration Requirements**: Maritime regulatory compliance systems, carrier management systems\n\n#### F-002: Digital Shipping Instructions Processing\n\n**Description**\n- **Overview**: Automated processing and validation of shipping instructions through smart contracts\n- **Business Value**: Streamlines carrier operations and reduces manual processing errors\n- **User Benefits**: Real-time instruction processing, automated carrier notifications, reduced administrative overhead\n- **Technical Context**: Integration with existing carrier systems through API endpoints\n\n**Dependencies**\n- **Prerequisite Features**: F-001 (Electronic Bill of Lading Creation)\n- **System Dependencies**: Smart contract execution environment, document storage system\n- **External Dependencies**: Carrier management systems, port authority systems\n- **Integration Requirements**: EDI systems, freight forwarder platforms\n\n#### F-003: Smart Document Verification\n\n**Description**\n- **Overview**: Any validated record in a blockchain is irreversible and cannot be changed. The documents exchanged in real-time on the blockchain cannot be altered, which reduces the risk of fraud.\n- **Business Value**: The use of cryptography will reduce the risk of fraud in its traditional sense. Disputes arising from fraudulent presentation of Bills of Lading should decline.\n- **User Benefits**: Instant document authenticity verification, reduced fraud risk, automated compliance checking\n- **Technical Context**: Cryptographic hash verification, digital signature validation\n\n**Dependencies**\n- **Prerequisite Features**: F-001, F-002\n- **System Dependencies**: Cryptographic libraries, digital signature infrastructure\n- **External Dependencies**: Certificate authorities, regulatory compliance databases\n- **Integration Requirements**: Customs systems, port authority verification systems\n\n#### F-004: Permission-Based Document Access\n\n**Description**\n- **Overview**: For example, a Bill of Lading is exchanged between participants in the network, whose rights are coded. Each transaction is encrypted using a key which links relevant participants.\n- **Business Value**: Ensures data privacy while enabling necessary stakeholder access\n- **User Benefits**: Granular access control, secure data sharing, audit trail maintenance\n- **Technical Context**: Role-based access control (RBAC) implementation using smart contracts\n\n**Dependencies**\n- **Prerequisite Features**: F-001, F-003\n- **System Dependencies**: Identity management system, encryption infrastructure\n- **External Dependencies**: Enterprise authentication systems\n- **Integration Requirements**: Single sign-on (SSO) systems, directory services\n\n### 2.1.2 Real-Time Tracking Features\n\n| Feature ID | Feature Name | Category | Priority | Status |\n|------------|--------------|----------|----------|---------|\n| F-005 | Container Tracking System | Tracking | Critical | Proposed |\n| F-006 | Shipment Event Monitoring | Tracking | High | Proposed |\n| F-007 | Real-Time Status Updates | Tracking | High | Proposed |\n| F-008 | Multi-Party Visibility Dashboard | Analytics | Medium | Proposed |\n\n#### F-005: Container Tracking System\n\n**Description**\n- **Overview**: Comprehensive tracking system supporting 120+ planned, estimated, and actual events per shipment\n- **Business Value**: Thankfully, blockchain in shipping can track cargo more efficiently in real-time. Thankfully, blockchain in shipping can track cargo more efficiently in real-time.\n- **User Benefits**: End-to-end visibility, proactive issue identification, improved customer service\n- **Technical Context**: Integration with IoT sensors, GPS tracking, and port management systems\n\n**Dependencies**\n- **Prerequisite Features**: F-001 (Electronic Bill of Lading Creation)\n- **System Dependencies**: Event logging system, real-time data processing infrastructure\n- **External Dependencies**: Port management systems, carrier tracking systems, IoT sensor networks\n- **Integration Requirements**: AIS (Automatic Identification System), port terminal systems\n\n#### F-006: Shipment Event Monitoring\n\n**Description**\n- **Overview**: Automated monitoring and logging of critical shipment events on the blockchain\n- **Business Value**: Provides immutable audit trail and enables proactive issue resolution\n- **User Benefits**: Automated notifications, exception handling, compliance monitoring\n- **Technical Context**: Event-driven architecture with smart contract triggers\n\n**Dependencies**\n- **Prerequisite Features**: F-005 (Container Tracking System)\n- **System Dependencies**: Event processing engine, notification system\n- **External Dependencies**: Carrier systems, port operations systems\n- **Integration Requirements**: EDI messaging, API integrations with logistics providers\n\n### 2.1.3 Smart Contract Automation Features\n\n| Feature ID | Feature Name | Category | Priority | Status |\n|------------|--------------|----------|----------|---------|\n| F-009 | Trade Finance Smart Contracts | Financial | Critical | Proposed |\n| F-010 | Payment Automation | Financial | Critical | Proposed |\n| F-011 | Letter of Credit Processing | Financial | High | Proposed |\n| F-012 | Automated Compliance Checking | Compliance | High | Proposed |\n\n#### F-009: Trade Finance Smart Contracts\n\n**Description**\n- **Overview**: facilitates the use of smart contracts, programmable automata that can control and manage assets. Smart contracts lie at the heart of decentralized finance (DeFI) and other sophisticated decentralized applications (dApps).\n- **Business Value**: Every day, hundreds of billions of dollars are left unpaid as payments take an average of 42 days to reach the invoicing organization.\n- **User Benefits**: Automated payment processing, reduced settlement times, lower transaction costs\n- **Technical Context**: BlockDAG's EVM-compatible account-based subsystem supports standardized smart contracts\n\n**Dependencies**\n- **Prerequisite Features**: F-001, F-003\n- **System Dependencies**: BlockDAG supports Ethereum coin standards like ERC-20 (fungible coins) and ERC-721 (non-fungible coins)\n- **External Dependencies**: Banking systems, trade finance platforms\n- **Integration Requirements**: SWIFT network, correspondent banking systems\n\n#### F-010: Payment Automation\n\n**Description**\n- **Overview**: Smart contracts automate customer contracts using blockchain technology. These contracts are machines based on blockchain programmed with rules composing the legal agreement.\n- **Business Value**: Reduces payment processing time and eliminates manual intervention\n- **User Benefits**: Payments, for example, can be held until delivery is validated or until some inspections are carried out.\n- **Technical Context**: Integration with multi-currency payment systems and escrow mechanisms\n\n**Dependencies**\n- **Prerequisite Features**: F-009 (Trade Finance Smart Contracts)\n- **System Dependencies**: Payment processing infrastructure, multi-currency support\n- **External Dependencies**: Banking APIs, payment gateways\n- **Integration Requirements**: Treasury management systems, accounting platforms\n\n### 2.1.4 Stakeholder Collaboration Features\n\n| Feature ID | Feature Name | Category | Priority | Status |\n|------------|--------------|----------|----------|---------|\n| F-013 | Multi-Party Workflow Management | Collaboration | High | Proposed |\n| F-014 | Real-Time Notification System | Communication | High | Proposed |\n| F-015 | Dispute Resolution Framework | Legal | Medium | Proposed |\n| F-016 | Regulatory Compliance Portal | Compliance | High | Proposed |\n\n#### F-013: Multi-Party Workflow Management\n\n**Description**\n- **Overview**: Coordinated workflow management across all maritime trade stakeholders\n- **Business Value**: All parties to the contract will have copies of it on the distributive ledger. This will eliminate delays in the delivery of cargo upon arrival at the destination port.\n- **User Benefits**: Streamlined operations, reduced coordination overhead, improved transparency\n- **Technical Context**: Workflow engine with role-based task assignment and approval processes\n\n**Dependencies**\n- **Prerequisite Features**: F-004 (Permission-Based Document Access)\n- **System Dependencies**: Workflow management engine, user management system\n- **External Dependencies**: Enterprise systems of participating organizations\n- **Integration Requirements**: ERP systems, CRM platforms\n\n## 2.2 Functional Requirements Table\n\n### 2.2.1 Electronic Bill of Lading Creation (F-001)\n\n| Requirement ID | Description | Acceptance Criteria | Priority | Complexity |\n|----------------|-------------|-------------------|----------|------------|\n| F-001-RQ-001 | Smart contract-based eBL creation | System creates tamper-proof eBL using Solidity smart contracts | Must-Have | High |\n| F-001-RQ-002 | Multi-party digital signatures | Support for carrier, shipper, and consignee digital signatures | Must-Have | Medium |\n| F-001-RQ-003 | Document template management | Configurable eBL templates for different trade routes | Should-Have | Medium |\n| F-001-RQ-004 | Regulatory compliance validation | Automatic validation against international maritime regulations | Must-Have | High |\n\n**Technical Specifications**\n- **Input Parameters**: Shipment details, cargo information, party identities, route data\n- **Output/Response**: Blockchain-verified eBL with unique token ID, cryptographic hash\n- **Performance Criteria**: superior speed (1400 TPS and higher) and much lower transaction fees\n- **Data Requirements**: Structured shipment data, digital certificates, regulatory compliance data\n\n**Validation Rules**\n- **Business Rules**: eBL must contain all mandatory fields per international standards\n- **Data Validation**: Cargo weight, dimensions, and hazardous material classifications\n- **Security Requirements**: Multi-signature validation, encrypted data storage\n- **Compliance Requirements**: IMO regulations, customs requirements, port authority standards\n\n### 2.2.2 Container Tracking System (F-005)\n\n| Requirement ID | Description | Acceptance Criteria | Priority | Complexity |\n|----------------|-------------|-------------------|----------|------------|\n| F-005-RQ-001 | Real-time location tracking | GPS coordinates updated every 15 minutes during transit | Must-Have | Medium |\n| F-005-RQ-002 | Event milestone recording | 120+ predefined events tracked and recorded on blockchain | Must-Have | High |\n| F-005-RQ-003 | Multi-container shipment support | Track multiple containers within single shipment | Should-Have | Medium |\n| F-005-RQ-004 | Historical tracking data | Immutable history of all tracking events | Must-Have | Low |\n\n**Technical Specifications**\n- **Input Parameters**: Container ID, GPS coordinates, event type, timestamp, sensor data\n- **Output/Response**: Real-time tracking dashboard, event notifications, historical reports\n- **Performance Criteria**: Sub-second query response time, 99.9% uptime\n- **Data Requirements**: Geolocation data, sensor readings, event metadata\n\n**Validation Rules**\n- **Business Rules**: Location updates must be sequential and logical\n- **Data Validation**: GPS coordinate format validation, timestamp verification\n- **Security Requirements**: Encrypted data transmission, authenticated data sources\n- **Compliance Requirements**: Data retention policies, privacy regulations\n\n### 2.2.3 Trade Finance Smart Contracts (F-009)\n\n| Requirement ID | Description | Acceptance Criteria | Priority | Complexity |\n|----------------|-------------|-------------------|----------|------------|\n| F-009-RQ-001 | Automated payment triggers | Payments released upon document verification | Must-Have | High |\n| F-009-RQ-002 | Multi-currency support | Support for major trade currencies (USD, EUR, GBP, JPY) | Must-Have | Medium |\n| F-009-RQ-003 | Escrow functionality | Secure holding of funds until conditions met | Must-Have | High |\n| F-009-RQ-004 | Interest calculation | Automatic calculation of interest and fees | Should-Have | Medium |\n\n**Technical Specifications**\n- **Input Parameters**: Payment amount, currency, conditions, party addresses\n- **Output/Response**: Transaction confirmation, payment receipt, audit trail\n- **Performance Criteria**: Initially, there will be a per-transaction fee of about $0.01 per transaction\n- **Data Requirements**: Financial data, exchange rates, regulatory compliance data\n\n**Validation Rules**\n- **Business Rules**: Payment conditions must be verifiable on-chain\n- **Data Validation**: Currency amount limits, exchange rate validation\n- **Security Requirements**: Multi-signature wallets, encrypted financial data\n- **Compliance Requirements**: AML/KYC requirements, financial regulations\n\n## 2.3 Feature Relationships\n\n### 2.3.1 Feature Dependencies Map\n\n```mermaid\ngraph TD\n    F001[F-001: eBL Creation] --> F002[F-002: Shipping Instructions]\n    F001 --> F003[F-003: Document Verification]\n    F001 --> F005[F-005: Container Tracking]\n    F003 --> F004[F-004: Permission Access]\n    F001 --> F009[F-009: Trade Finance]\n    F005 --> F006[F-006: Event Monitoring]\n    F006 --> F007[F-007: Status Updates]\n    F009 --> F010[F-010: Payment Automation]\n    F009 --> F011[F-011: Letter of Credit]\n    F004 --> F013[F-013: Workflow Management]\n    F007 --> F014[F-014: Notifications]\n    F003 --> F012[F-012: Compliance Checking]\n    F012 --> F016[F-016: Regulatory Portal]\n    F013 --> F015[F-015: Dispute Resolution]\n    F007 --> F008[F-008: Visibility Dashboard]\n```\n\n### 2.3.2 Integration Points\n\n| Integration Category | Features Involved | Shared Components | Common Services |\n|---------------------|------------------|-------------------|-----------------|\n| **Document Management** | F-001, F-002, F-003, F-004 | Document storage, Cryptographic services | Identity management, Audit logging |\n| **Tracking & Monitoring** | F-005, F-006, F-007, F-008 | Event processing engine, Real-time data pipeline | Notification service, Analytics engine |\n| **Financial Processing** | F-009, F-010, F-011 | Payment gateway, Currency conversion | Compliance validation, Transaction logging |\n| **Stakeholder Collaboration** | F-013, F-014, F-015, F-016 | Workflow engine, Communication hub | User management, Role-based access |\n\n### 2.3.3 Shared Components\n\n| Component Name | Description | Used By Features | Technical Requirements |\n|----------------|-------------|------------------|----------------------|\n| **Smart Contract Engine** | The BlockDAG network supports both UTXO and account models. BlockDAG's EVM-compatible account-based subsystem supports standardized smart contracts. | F-001, F-003, F-009, F-010, F-011 | Solidity compiler, Gas optimization |\n| **Document Storage** | Distributed storage for shipping documents | F-001, F-002, F-003, F-004 | IPFS integration, Encryption at rest |\n| **Event Processing** | Real-time event handling and notification | F-005, F-006, F-007, F-014 | Message queuing, Event streaming |\n| **Identity Management** | User authentication and authorization | F-004, F-013, F-015, F-016 | Multi-factor authentication, SSO |\n\n## 2.4 Implementation Considerations\n\n### 2.4.1 Technical Constraints\n\n| Constraint Category | Description | Impact | Mitigation Strategy |\n|-------------------|-------------|---------|-------------------|\n| **Blockchain Performance** | throughput of 10 blocks per second (10 TPS) for foundational operations, while supporting 2,000–15,000 TPS in high-load scenarios | Transaction throughput limitations | Layer 2 scaling solutions, Transaction batching |\n| **EVM Compatibility** | For EVM transactions, the fee structure is similar to Ethereum's. BlockDAG prices gas the same as Ethereum | Gas cost optimization required | Smart contract optimization, Efficient algorithms |\n| **Regulatory Compliance** | First, not all countries accept electronic documents. Even worse, not all countries recognise electronic contracts, digital signatures and digital transactions. | Limited global adoption | Phased rollout, Regulatory engagement |\n| **Integration Complexity** | Legacy system integration challenges | Development timeline impact | API-first design, Middleware solutions |\n\n### 2.4.2 Performance Requirements\n\n| Performance Metric | Target Value | Measurement Method | Critical Features |\n|-------------------|--------------|-------------------|------------------|\n| **Transaction Throughput** | 1,400+ TPS | Blockchain network monitoring | F-009, F-010 |\n| **Document Processing Time** | <30 seconds | End-to-end timing | F-001, F-002 |\n| **Query Response Time** | <2 seconds | API response monitoring | F-005, F-008 |\n| **System Availability** | 99.9% uptime | Infrastructure monitoring | All features |\n\n### 2.4.3 Security Implications\n\n| Security Domain | Requirements | Implementation | Affected Features |\n|-----------------|-------------|----------------|------------------|\n| **Data Encryption** | End-to-end encryption for all documents | AES-256 encryption, TLS 1.3 | F-001, F-002, F-003, F-004 |\n| **Access Control** | Role-based permissions with audit trails | Smart contract-based RBAC | F-004, F-013, F-016 |\n| **Transaction Security** | Multi-signature validation for critical operations | Hardware security modules | F-009, F-010, F-011 |\n| **Network Security** | DDoS protection and intrusion detection | Cloud-based security services | All network-facing features |\n\n### 2.4.4 Scalability Considerations\n\n| Scalability Factor | Current Capacity | Growth Planning | Technical Solution |\n|-------------------|------------------|-----------------|-------------------|\n| **User Base** | 100+ shipping companies | 1,000+ companies within 3 years | Horizontal scaling, Load balancing |\n| **Document Volume** | 10,000 eBLs/month | 100,000 eBLs/month | Document sharding, Compression |\n| **Transaction Volume** | 50,000 transactions/day | 500,000 transactions/day | DAG layer that allows transactions to reference multiple predecessors for parallel validation |\n| **Geographic Coverage** | Major trade routes | Global coverage | Regional node deployment |\n\n### 2.4.5 Maintenance Requirements\n\n| Maintenance Category | Frequency | Scope | Resource Requirements |\n|---------------------|-----------|-------|----------------------|\n| **Smart Contract Updates** | Quarterly | Bug fixes, feature enhancements | Blockchain developers, Security auditors |\n| **System Monitoring** | 24/7 | Performance, security, availability | DevOps team, Monitoring tools |\n| **Regulatory Updates** | As needed | Compliance rule changes | Legal team, Compliance officers |\n| **Integration Maintenance** | Monthly | API updates, partner system changes | Integration specialists, QA team |\n\n## 2.5 Traceability Matrix\n\n| Business Requirement | Feature ID | Functional Requirements | Acceptance Criteria | Test Cases |\n|----------------------|------------|------------------------|-------------------|------------|\n| **Digital eBL Creation** | F-001 | F-001-RQ-001 to F-001-RQ-004 | Smart contract deployment, Multi-party signatures | TC-001 to TC-015 |\n| **Real-time Tracking** | F-005, F-006 | F-005-RQ-001 to F-005-RQ-004 | GPS tracking, Event recording | TC-016 to TC-030 |\n| **Payment Automation** | F-009, F-010 | F-009-RQ-001 to F-009-RQ-004 | Automated triggers, Multi-currency | TC-031 to TC-045 |\n| **Stakeholder Collaboration** | F-013, F-014 | Multi-party workflows, Notifications | Workflow completion, Real-time alerts | TC-046 to TC-060 |\n\n# 3. Technology Stack\n\n## 3.1 Programming Languages\n\n### 3.1.1 Blockchain Development\n\n| Language | Version | Platform/Component | Justification |\n|----------|---------|-------------------|---------------|\n| **Solidity** | ^0.8.30 | Smart Contracts | Latest version is a maintenance release in light of the Pectra Ethereum network upgrade scheduled for May 7, 2025 and changes the default EVM version from cancun to prague. BlockDAG is fully Ethereum Virtual Machine (EVM) compatible, allowing for seamless integration and deployment of Ethereum-based smart contracts. This compatibility ensures that developers familiar with Ethereum's toolset, including Solidity and other Ethereum-compatible programming languages, can easily build and deploy decentralized applications (dApps) on the BlockDAG network. |\n| **Go (Golang)** | 1.21+ | BlockDAG Core Development | Programming Languages: Go (Golang): Core blockchain development, Solidity: For smart contract development, leveraging existing Ethereum-based libraries and frameworks. Go provides excellent performance for blockchain infrastructure and is the standard for BlockDAG development. |\n\n### 3.1.2 Backend Development\n\n| Language | Version | Platform/Component | Justification |\n|----------|---------|-------------------|---------------|\n| **Python** | 3.11+ | Flask Backend, API Services | Python offers extensive libraries for blockchain integration, maritime industry APIs, and rapid development. Flask provides lightweight, flexible web framework capabilities ideal for microservices architecture. |\n| **TypeScript** | 5.0+ | Node.js Services, Type Safety | TypeScript ensures type safety across the application stack and provides excellent developer experience with modern IDE support. Essential for maintaining code quality in complex maritime trade workflows. |\n\n### 3.1.3 Frontend Development\n\n| Language | Version | Platform/Component | Justification |\n|----------|---------|-------------------|---------------|\n| **TypeScript** | 5.0+ | React Frontend, Mobile Apps | React 19.0.0 with TypeScript 4.9.5+ support. TypeScript provides type safety and enhanced developer experience for complex maritime trade interfaces. |\n| **JavaScript** | ES2022+ | Legacy Integration, Browser Compatibility | Required for integration with existing maritime industry systems and browser-based wallet interactions like MetaMask. |\n\n## 3.2 Frameworks & Libraries\n\n### 3.2.1 Blockchain & Smart Contract Frameworks\n\n| Framework/Library | Version | Purpose | Justification |\n|------------------|---------|---------|---------------|\n| **Hardhat** | 2.19+ | Smart Contract Development | BlockDAG also supports popular Ethereum development tools, such as Truffle, Remix, MetaMask, and Hardhat, simplifying the development and deployment processes. Hardhat provides comprehensive testing and deployment capabilities for Solidity contracts. |\n| **Truffle Suite** | 5.11+ | Smart Contract Testing | Truffle is a development framework that simplifies the process of building, testing, and deploying smart contracts. It provides a suite of tools, including a development console, testing framework, and asset pipeline, to make smart contract development more efficient. |\n| **OpenZeppelin Contracts** | 5.0+ | Secure Smart Contract Libraries | OpenZeppelin Contracts helps you minimize risk by using battle-tested libraries of smart contracts for Ethereum and other blockchains. It includes the most used implementations of ERC standards. |\n| **Web3.js** | 4.0+ | Blockchain Interaction | Provides JavaScript interface for interacting with BlockDAG network and smart contracts from frontend applications. |\n| **Ethers.js** | 6.0+ | Ethereum-Compatible Interactions | Modern library for blockchain interactions with better TypeScript support and modular architecture. |\n\n### 3.2.2 Backend Frameworks\n\n| Framework/Library | Version | Purpose | Justification |\n|------------------|---------|---------|---------------|\n| **Flask** | 3.0+ | Python Web Framework | Flask is a lightweight Python web framework that provides useful tools and features for creating web applications in the Python Language. It gives developers flexibility and is an accessible framework for new developers. Ideal for microservices and API development. |\n| **Flask-PyMongo** | 3.0+ | MongoDB Integration | PyMongo support for Flask applications. Flask-PyMongo bridges Flask and PyMongo and provides some convenience helpers. |\n| **Pydantic** | 2.5+ | Data Validation | Provides robust data validation and serialization for API endpoints and blockchain data structures. |\n| **Celery** | 5.3+ | Asynchronous Task Processing | Handles background tasks like blockchain transaction monitoring and document processing workflows. |\n\n### 3.2.3 Frontend Frameworks\n\n| Framework/Library | Version | Purpose | Justification |\n|------------------|---------|---------|---------------|\n| **React** | 19.0+ | Web Frontend | React 19.0.0 provides the latest features and performance improvements. React's component-based architecture is ideal for complex maritime trade interfaces. |\n| **TailwindCSS** | 4.0+ | CSS Framework | Tailwind v4 launched in late 2024 with a fundamental architectural change. The team rebuilt the engine in Rust, which makes everything faster. Tailwind now includes its own lightning-fast engine written in Rust, making setup simpler and builds faster. |\n| **React Router** | 6.20+ | Client-Side Routing | Provides declarative routing for single-page application navigation across maritime trade workflows. |\n| **React Query** | 5.0+ | Server State Management | Manages API calls, caching, and synchronization with blockchain data and maritime trade information. |\n\n### 3.2.4 Mobile Development\n\n| Framework/Library | Version | Purpose | Justification |\n|------------------|---------|---------|---------------|\n| **React Native** | 0.73+ | Cross-Platform Mobile | Enables code sharing between web and mobile platforms while providing native performance for maritime trade mobile applications. |\n| **Expo** | 50.0+ | Mobile Development Platform | Simplifies React Native development and deployment process with managed workflow and over-the-air updates. |\n\n## 3.3 Open Source Dependencies\n\n### 3.3.1 Blockchain & Cryptocurrency Libraries\n\n| Package | Version | Registry | Purpose |\n|---------|---------|----------|---------|\n| `@openzeppelin/contracts` | ^5.0.0 | npm | Secure smart contract implementations |\n| `@chainlink/contracts` | ^0.8.0 | npm | Oracle integration for external data |\n| `web3` | ^4.0.0 | npm | BlockDAG network interaction |\n| `ethers` | ^6.0.0 | npm | Blockchain utilities and wallet integration |\n| `@metamask/sdk` | ^0.14.0 | npm | MetaMask wallet integration |\n\n### 3.3.2 Backend Dependencies\n\n| Package | Version | Registry | Purpose |\n|---------|---------|----------|---------|\n| `flask` | ^3.0.0 | PyPI | Web framework |\n| `flask-pymongo` | ^3.0.0 | PyPI | MongoDB integration |\n| `pymongo` | ^4.6.0 | PyPI | MongoDB driver |\n| `pydantic` | ^2.5.0 | PyPI | Data validation |\n| `celery` | ^5.3.0 | PyPI | Task queue |\n| `redis` | ^5.0.0 | PyPI | Caching and message broker |\n| `cryptography` | ^41.0.0 | PyPI | Encryption and digital signatures |\n| `requests` | ^2.31.0 | PyPI | HTTP client for external APIs |\n\n### 3.3.3 Frontend Dependencies\n\n| Package | Version | Registry | Purpose |\n|---------|---------|----------|---------|\n| `react` | ^19.0.0 | npm | UI framework |\n| `react-dom` | ^19.0.0 | npm | React DOM rendering |\n| `@types/react` | ^19.0.0 | npm | TypeScript definitions |\n| `tailwindcss` | ^4.0.0 | npm | CSS framework |\n| `@tailwindcss/vite` | ^4.0.0 | npm | Vite integration |\n| `react-router-dom` | ^6.20.0 | npm | Client-side routing |\n| `@tanstack/react-query` | ^5.0.0 | npm | Server state management |\n| `axios` | ^1.6.0 | npm | HTTP client |\n| `date-fns` | ^3.0.0 | npm | Date manipulation |\n\n### 3.3.4 Development & Testing Dependencies\n\n| Package | Version | Registry | Purpose |\n|---------|---------|----------|---------|\n| `hardhat` | ^2.19.0 | npm | Smart contract development |\n| `@nomicfoundation/hardhat-toolbox` | ^4.0.0 | npm | Hardhat plugins bundle |\n| `pytest` | ^7.4.0 | PyPI | Python testing framework |\n| `pytest-asyncio` | ^0.21.0 | PyPI | Async testing support |\n| `jest` | ^29.7.0 | npm | JavaScript testing framework |\n| `@testing-library/react` | ^14.0.0 | npm | React testing utilities |\n| `eslint` | ^8.55.0 | npm | Code linting |\n| `prettier` | ^3.1.0 | npm | Code formatting |\n\n## 3.4 Third-Party Services\n\n### 3.4.1 Blockchain Infrastructure\n\n| Service | Purpose | Integration Method | Justification |\n|---------|---------|-------------------|---------------|\n| **BlockDAG Network** | Primary Blockchain | Direct RPC Connection | BlockDAG's superior speed (1400 TPS and higher) and much lower transaction fees. BlockDAG is fully Ethereum Virtual Machine (EVM) compatible. |\n| **MetaMask** | Wallet Integration | Web3 Provider | Because BlockDAG is EVM-compatible, you can use popular Ethereum wallets like MetaMask and Trust Wallet to manage your BDAG coins and interact with dApps on the network. |\n| **IPFS** | Distributed Storage | HTTP API | Decentralized storage for shipping documents and metadata. |\n\n### 3.4.2 Authentication & Security\n\n| Service | Purpose | Integration Method | Justification |\n|---------|---------|-------------------|---------------|\n| **Auth0** | User Authentication | REST API / SDK | Enterprise-grade authentication with support for multiple identity providers and compliance requirements. |\n| **AWS KMS** | Key Management | AWS SDK | Secure key storage and cryptographic operations for sensitive maritime trade data. |\n| **HashiCorp Vault** | Secrets Management | REST API | Centralized secrets management for API keys and database credentials. |\n\n### 3.4.3 External APIs & Integrations\n\n| Service | Purpose | Integration Method | Justification |\n|---------|---------|-------------------|---------------|\n| **Port Authority APIs** | Port Operations Data | REST API | Real-time port status and vessel tracking information. |\n| **Customs APIs** | Regulatory Compliance | REST API / EDI | Automated customs clearance and compliance verification. |\n| **Banking APIs** | Trade Finance | REST API / SWIFT | Integration with trade finance and payment systems. |\n| **Weather APIs** | Maritime Conditions | REST API | Weather data for route planning and risk assessment. |\n| **AIS (Automatic Identification System)** | Vessel Tracking | TCP/UDP Protocols | Real-time vessel position and movement data. |\n\n### 3.4.4 Monitoring & Analytics\n\n| Service | Purpose | Integration Method | Justification |\n|---------|---------|-------------------|---------------|\n| **AWS CloudWatch** | Infrastructure Monitoring | AWS SDK | Comprehensive monitoring for AWS resources and custom metrics. |\n| **Datadog** | Application Performance Monitoring | Agent / API | Real-time performance monitoring and alerting for maritime trade operations. |\n| **Sentry** | Error Tracking | SDK Integration | Error monitoring and performance tracking for both frontend and backend applications. |\n| **Google Analytics** | User Analytics | JavaScript SDK | User behavior tracking and business intelligence for platform optimization. |\n\n## 3.5 Databases & Storage\n\n### 3.5.1 Primary Databases\n\n| Database | Version | Purpose | Justification |\n|----------|---------|---------|---------------|\n| **MongoDB** | 7.0+ | Document Storage | MongoDB is a general-purpose, document-oriented, NoSQL database program that uses JSON-like documents to store data. Unlike tabular relations used in relational databases, JSON-like documents allow for flexible and dynamic schemas while maintaining simplicity. Ideal for maritime trade documents with varying structures. |\n| **BlockDAG** | Latest | Blockchain Data | Distributed, decentralized storage system for transaction history, DAG structure, and state databases. Primary storage for immutable shipping records and smart contracts. |\n\n### 3.5.2 Caching & Session Storage\n\n| Technology | Version | Purpose | Justification |\n|------------|---------|---------|---------------|\n| **Redis** | 7.2+ | Caching & Session Management | High-performance in-memory data structure store for caching frequently accessed maritime trade data and managing user sessions. |\n| **MongoDB GridFS** | 7.0+ | Large File Storage | MongoDB allows us to save binary data to its database using the GridFS specification. Flask-PyMongo provides the save_file() method for saving a file to GridFS and the send_file() method for retrieving files from GridFS. |\n\n### 3.5.3 Data Persistence Strategies\n\n| Strategy | Implementation | Use Case |\n|----------|----------------|----------|\n| **Document-Based Storage** | MongoDB Collections | Shipping documents, user profiles, trade records |\n| **Blockchain Storage** | Smart Contracts | Immutable trade transactions, Bills of Lading, compliance records |\n| **File Storage** | GridFS + IPFS | Large documents, images, certificates |\n| **Cache-First Strategy** | Redis + MongoDB | Frequently accessed trade data, user sessions |\n| **Event Sourcing** | MongoDB + Blockchain | Audit trails, transaction history |\n\n### 3.5.4 Storage Services\n\n| Service | Purpose | Configuration | Justification |\n|---------|---------|---------------|---------------|\n| **AWS S3** | Object Storage | Standard IA for documents, Glacier for archives | Cost-effective storage for maritime documents with different access patterns. |\n| **AWS EFS** | Shared File System | General Purpose mode | Shared storage for containerized applications across multiple availability zones. |\n| **IPFS** | Distributed Storage | Public and private networks | Decentralized storage ensuring document availability and integrity. |\n\n## 3.6 Development & Deployment\n\n### 3.6.1 Development Tools\n\n| Tool | Version | Purpose | Justification |\n|------|---------|---------|---------------|\n| **Visual Studio Code** | Latest | Primary IDE | Visual Studio Code (VS Code) is a popular open-source code editor developed by Microsoft. It is widely used by developers for its versatility and extensive features. Excellent support for TypeScript, Python, and blockchain development. |\n| **Remix IDE** | Latest | Smart Contract Development | Remix IDE is one of the most popular tools for developing smart contracts, particularly for Ethereum. It is a web-based IDE that provides a comprehensive suite of tools for writing, testing, and deploying smart contracts. |\n| **Git** | 2.40+ | Version Control | Industry standard for source code management and collaboration. |\n| **Node.js** | 20.0+ | JavaScript Runtime | Required for frontend development and blockchain tooling. |\n| **Python** | 3.11+ | Backend Runtime | Primary runtime for Flask applications and blockchain integration scripts. |\n\n### 3.6.2 Build System\n\n| Tool | Version | Purpose | Justification |\n|------|---------|---------|---------------|\n| **Vite** | 5.0+ | Frontend Build Tool | Instead of PostCSS configuration, you integrate Tailwind directly into your Vite setup. Fast build times and excellent development experience. |\n| **Webpack** | 5.89+ | Module Bundling | Advanced bundling for complex maritime trade applications with code splitting. |\n| **Poetry** | 1.7+ | Python Dependency Management | Modern dependency management and packaging for Python projects. |\n| **npm** | 10.0+ | Node.js Package Management | Standard package manager for JavaScript dependencies. |\n\n### 3.6.3 Containerization\n\n| Technology | Version | Purpose | Justification |\n|------------|---------|---------|---------------|\n| **Docker** | 24.0+ | Application Containerization | Containerization ensured consistent behavior across dev and prod. Ensures consistent deployment across different environments. |\n| **Docker Compose** | 2.23+ | Multi-Container Orchestration | Simplifies development environment setup with multiple services (MongoDB, Redis, Flask, React). |\n\n### 3.6.4 CI/CD Pipeline\n\n| Tool | Version | Purpose | Justification |\n|------|---------|---------|---------------|\n| **GitHub Actions** | Latest | Continuous Integration/Deployment | GitHub Actions is integrated into the GitHub platform to help you create, share, and run workflows within your GitHub repositories. You can use GitHub Actions to automate tasks such as building, testing, and deploying your code. |\n| **Terraform** | 1.6+ | Infrastructure as Code | Terraform is an infrastructure as code (IaC) tool from HashiCorp that helps you create and manage cloud and on-premises infrastructure. |\n| **AWS CLI** | 2.15+ | AWS Resource Management | Command-line interface for AWS service interactions and deployment automation. |\n\n### 3.6.5 Infrastructure Components\n\n```mermaid\ngraph TB\n    subgraph \"Development Environment\"\n        A[VS Code + Extensions] --> B[Local Docker Containers]\n        B --> C[MongoDB Local]\n        B --> D[Redis Local]\n        B --> E[BlockDAG Testnet]\n    end\n    \n    subgraph \"CI/CD Pipeline\"\n        F[GitHub Actions] --> G[Build & Test]\n        G --> H[Docker Image Build]\n        H --> I[Security Scanning]\n        I --> J[Deploy to AWS]\n    end\n    \n    subgraph \"Production Infrastructure\"\n        K[AWS ECS Fargate] --> L[Application Load Balancer]\n        M[MongoDB Atlas] --> N[Redis ElastiCache]\n        O[BlockDAG Mainnet] --> P[IPFS Network]\n    end\n    \n    F --> K\n    E --> O\n```\n\n### 3.6.6 Deployment Configuration\n\n| Environment | Configuration | Justification |\n|-------------|---------------|---------------|\n| **Development** | Local Docker + BlockDAG Testnet | Fast iteration and testing without blockchain costs |\n| **Staging** | AWS ECS + MongoDB Atlas + BlockDAG Testnet | Production-like environment for integration testing |\n| **Production** | AWS ECS + MongoDB Atlas + BlockDAG Mainnet | Scalable, secure production deployment |\n\n### 3.6.7 Security & Compliance\n\n| Tool/Practice | Implementation | Purpose |\n|---------------|----------------|---------|\n| **SAST (Static Analysis)** | ESLint, Bandit, Slither | Code security scanning for vulnerabilities |\n| **DAST (Dynamic Analysis)** | OWASP ZAP | Runtime security testing |\n| **Container Scanning** | Trivy, Snyk | Docker image vulnerability assessment |\n| **Secrets Management** | AWS Secrets Manager | Secure storage of API keys and credentials |\n| **Compliance Monitoring** | AWS Config, CloudTrail | Regulatory compliance and audit trails |\n\n### 3.6.8 Performance & Monitoring\n\n| Tool | Purpose | Integration |\n|------|---------|-------------|\n| **Application Monitoring** | Datadog APM | Real-time performance tracking |\n| **Log Management** | AWS CloudWatch Logs | Centralized logging and analysis |\n| **Metrics Collection** | Prometheus + Grafana | Custom metrics and dashboards |\n| **Uptime Monitoring** | Pingdom | Service availability monitoring |\n| **Blockchain Monitoring** | Custom BlockDAG monitoring | Transaction and smart contract monitoring |\n\n# 4. Process Flowchart\n\n## 4.1 System Workflows\n\n### 4.1.1 Core Business Processes\n\n#### 4.1.1.1 End-to-End Digital Shipping Process\n\nThe ShipLedger platform orchestrates a comprehensive digital shipping workflow that transforms traditional paper-based processes into blockchain-powered operations. Traditional shipping processes involve multiple parties and extensive paperwork, leading to slow information transfer, coordination difficulties, and even fraud. For instance, a shipping trade from Kenya to the Netherlands typically requires over 30 parties, more than 200 interactions, and up to 10 days to process shipping documents.\n\n```mermaid\nflowchart TD\n    A[Shipper Initiates Shipment] --> B{Validate Shipment Data}\n    B -->|Valid| C[Create Digital Shipping Instructions]\n    B -->|Invalid| D[Return Error to Shipper]\n    D --> A\n    \n    C --> E[Deploy Smart Contract]\n    E --> F[Generate Unique Shipment ID]\n    F --> G[Notify Carrier]\n    \n    G --> H[Carrier Reviews Instructions]\n    H --> I{Accept Shipment?}\n    I -->|Yes| J[Create Electronic Bill of Lading]\n    I -->|No| K[Reject with Reason]\n    K --> A\n    \n    J --> L[Multi-Party Digital Signatures]\n    L --> M{All Signatures Collected?}\n    M -->|No| N[Send Signature Requests]\n    N --> L\n    M -->|Yes| O[Publish eBL to Blockchain]\n    \n    O --> P[Distribute Access Permissions]\n    P --> Q[Initialize Real-Time Tracking]\n    Q --> R[Cargo Loading & Departure]\n    \n    R --> S[Transit Monitoring]\n    S --> T{Route Changes?}\n    T -->|Yes| U[Update Smart Contract]\n    T -->|No| V[Continue Tracking]\n    U --> W[Notify All Parties]\n    W --> V\n    V --> S\n    \n    S --> X{Arrival at Destination?}\n    X -->|No| V\n    X -->|Yes| Y[Customs Clearance Process]\n    Y --> Z[Cargo Release]\n    Z --> AA[Payment Settlement]\n    AA --> BB[Complete Shipment]\n```\n\n#### 4.1.1.2 Electronic Bill of Lading Creation Workflow\n\nBlockDAG is fully Ethereum Virtual Machine (EVM) compatible, allowing for seamless integration and deployment of Ethereum-based smart contracts. This compatibility ensures that developers familiar with Ethereum's toolset, including Solidity and other Ethereum-compatible programming languages, can easily build and deploy decentralized applications (dApps) on the BlockDAG network.\n\n```mermaid\nflowchart TD\n    A[Carrier Receives Shipping Instructions] --> B[Validate Cargo Information]\n    B --> C{Hazardous Materials?}\n    C -->|Yes| D[Apply Special Handling Rules]\n    C -->|No| E[Standard Processing]\n    D --> E\n    \n    E --> F[Generate eBL Template]\n    F --> G[Populate Shipment Details]\n    G --> H[Calculate Freight Charges]\n    H --> I[Add Regulatory Compliance Data]\n    \n    I --> J[Create Smart Contract Instance]\n    J --> K[Deploy to BlockDAG Network]\n    K --> L{Deployment Successful?}\n    L -->|No| M[Retry Deployment]\n    L -->|Yes| N[Generate eBL Token ID]\n    M --> K\n    \n    N --> O[Request Digital Signatures]\n    O --> P[Shipper Signature]\n    P --> Q[Carrier Signature]\n    Q --> R[Consignee Signature]\n    R --> S{All Required Signatures?}\n    S -->|No| T[Send Reminder Notifications]\n    T --> O\n    S -->|Yes| U[Finalize eBL on Blockchain]\n    \n    U --> V[Generate Cryptographic Hash]\n    V --> W[Store Document Metadata]\n    W --> X[Set Access Permissions]\n    X --> Y[Notify Stakeholders]\n    Y --> Z[eBL Creation Complete]\n```\n\n#### 4.1.1.3 Real-Time Tracking and Event Processing\n\nThe TradeLens system records transactions and tracks assets such as containers. Documents can be digitized and electronically signed. Over one hundred types of events can be tracked and recorded, including starting consignment tracking; planned loading on vessel; planned, estimated, and actual vessel departure and arrival times; submission of dangerous goods declarations.\n\n```mermaid\nflowchart TD\n    A[Shipment Departure] --> B[Initialize Tracking System]\n    B --> C[Register IoT Sensors]\n    C --> D[Set Event Monitoring Rules]\n    \n    D --> E[Continuous Monitoring Loop]\n    E --> F{New Event Detected?}\n    F -->|No| G[Wait for Next Scan]\n    G --> E\n    F -->|Yes| H[Validate Event Data]\n    \n    H --> I{Event Type Classification}\n    I -->|Location Update| J[Process GPS Coordinates]\n    I -->|Status Change| K[Update Shipment Status]\n    I -->|Exception Event| L[Trigger Alert System]\n    I -->|Milestone Event| M[Record Milestone]\n    \n    J --> N[Verify Location Accuracy]\n    K --> O[Validate Status Transition]\n    L --> P[Assess Risk Level]\n    M --> Q[Update Progress Timeline]\n    \n    N --> R[Update Blockchain Record]\n    O --> R\n    P --> S{Critical Alert?}\n    Q --> R\n    \n    S -->|Yes| T[Immediate Stakeholder Notification]\n    S -->|No| U[Standard Notification Queue]\n    T --> R\n    U --> R\n    \n    R --> V[Broadcast to Authorized Parties]\n    V --> W{Shipment Complete?}\n    W -->|No| E\n    W -->|Yes| X[Finalize Tracking Record]\n    X --> Y[Generate Delivery Confirmation]\n    Y --> Z[Archive Tracking Data]\n```\n\n### 4.1.2 Integration Workflows\n\n#### 4.1.2.1 Port Authority Integration Process\n\n```mermaid\nsequenceDiagram\n    participant S as ShipLedger Platform\n    participant P as Port Authority System\n    participant C as Customs System\n    participant V as Vessel\n    participant T as Terminal Operator\n    \n    S->>P: Submit Vessel Arrival Notification\n    P->>P: Validate Vessel Documentation\n    P->>C: Request Customs Clearance\n    C->>C: Process Import/Export Documents\n    C->>P: Clearance Status Update\n    P->>S: Berth Assignment Confirmation\n    \n    V->>P: Arrival at Port\n    P->>T: Notify Terminal of Vessel Arrival\n    T->>S: Update Container Discharge Status\n    S->>S: Record Event on Blockchain\n    S->>P: Confirm Container Status\n    \n    loop Container Processing\n        T->>S: Container Discharge Event\n        S->>C: Update Customs Status\n        C->>S: Release Authorization\n        S->>T: Container Release Confirmation\n    end\n    \n    T->>P: All Containers Processed\n    P->>S: Vessel Departure Clearance\n    S->>V: Departure Authorization\n```\n\n#### 4.1.2.2 Banking and Trade Finance Integration\n\nfacilitates the use of smart contracts, programmable automata that can control and manage assets. Smart contracts lie at the heart of decentralized finance (DeFI) and other sophisticated decentralized applications (dApps).\n\n```mermaid\nflowchart TD\n    A[Trade Finance Request] --> B[KYC/AML Verification]\n    B --> C{Compliance Check Passed?}\n    C -->|No| D[Request Additional Documentation]\n    C -->|Yes| E[Create Letter of Credit Smart Contract]\n    D --> B\n    \n    E --> F[Set Payment Conditions]\n    F --> G[Deploy Contract to BlockDAG]\n    G --> H[Notify Beneficiary Bank]\n    \n    H --> I[Document Submission]\n    I --> J[Automated Document Verification]\n    J --> K{Documents Compliant?}\n    K -->|No| L[Request Document Corrections]\n    K -->|Yes| M[Trigger Payment Release]\n    L --> I\n    \n    M --> N[Execute Smart Contract Payment]\n    N --> O[Multi-Currency Conversion]\n    O --> P[Transfer to Beneficiary Account]\n    P --> Q[Generate Payment Confirmation]\n    Q --> R[Update Trade Finance Record]\n    R --> S[Notify All Parties]\n    S --> T[Archive Transaction]\n```\n\n#### 4.1.2.3 Customs and Regulatory Compliance Workflow\n\n```mermaid\nflowchart TD\n    A[Shipment Approaching Port] --> B[Auto-Generate Customs Declaration]\n    B --> C[Validate Cargo Classification]\n    C --> D{Restricted/Prohibited Items?}\n    D -->|Yes| E[Flag for Manual Inspection]\n    D -->|No| F[Calculate Duties and Taxes]\n    \n    E --> G[Schedule Physical Inspection]\n    F --> H[Submit Electronic Declaration]\n    G --> I[Inspection Results]\n    H --> J[Customs System Processing]\n    \n    I --> K{Inspection Passed?}\n    K -->|No| L[Hold Cargo/Request Action]\n    K -->|Yes| M[Update Clearance Status]\n    L --> N[Notify Shipper of Issues]\n    M --> O[Release Authorization]\n    \n    J --> P{Auto-Clearance Eligible?}\n    P -->|Yes| O\n    P -->|No| Q[Manual Review Required]\n    Q --> R[Customs Officer Review]\n    R --> S{Approve Clearance?}\n    S -->|Yes| O\n    S -->|No| L\n    \n    O --> T[Update Blockchain Record]\n    T --> U[Notify Port Authority]\n    U --> V[Enable Cargo Release]\n    V --> W[Generate Clearance Certificate]\n    W --> X[Complete Customs Process]\n```\n\n## 4.2 State Management and Data Flow\n\n### 4.2.1 Blockchain State Transitions\n\nThe BlockDAG network supports both UTXO and account models. BlockDAG's UTXOs support fast, scalable payments, while BlockDAG's EVM-compatible account-based subsystem supports standardized smart contracts.\n\n```mermaid\nstateDiagram-v2\n    [*] --> ShipmentInitiated\n    ShipmentInitiated --> DocumentsCreated : Create eBL\n    DocumentsCreated --> SignaturesCollected : Multi-party signing\n    SignaturesCollected --> ContractDeployed : Deploy to blockchain\n    \n    ContractDeployed --> InTransit : Cargo loaded\n    InTransit --> InTransit : Location updates\n    InTransit --> ExceptionHandling : Route deviation/delay\n    ExceptionHandling --> InTransit : Issue resolved\n    InTransit --> ArrivedAtPort : Destination reached\n    \n    ArrivedAtPort --> CustomsClearance : Submit declarations\n    CustomsClearance --> CustomsApproved : Clearance granted\n    CustomsClearance --> CustomsHold : Additional review needed\n    CustomsHold --> CustomsApproved : Issues resolved\n    CustomsApproved --> CargoReleased : Release authorization\n    \n    CargoReleased --> PaymentProcessing : Trigger payment\n    PaymentProcessing --> PaymentCompleted : Funds transferred\n    PaymentCompleted --> ShipmentCompleted : Final settlement\n    ShipmentCompleted --> [*]\n    \n    note right of ExceptionHandling\n        Smart contract automatically\n        handles route changes and\n        notifies all stakeholders\n    end note\n    \n    note right of PaymentProcessing\n        Automated payment release\n        based on delivery confirmation\n        and document compliance\n    end note\n```\n\n### 4.2.2 Data Persistence and Caching Strategy\n\n```mermaid\nflowchart TD\n    A[User Request] --> B{Cache Hit?}\n    B -->|Yes| C[Return Cached Data]\n    B -->|No| D[Query MongoDB]\n    \n    D --> E{Data Found?}\n    E -->|Yes| F[Update Cache]\n    E -->|No| G[Query Blockchain]\n    \n    F --> H[Return Data to User]\n    G --> I{Blockchain Query Success?}\n    I -->|Yes| J[Store in MongoDB]\n    I -->|No| K[Return Error]\n    \n    J --> L[Update Cache]\n    L --> M[Return Data to User]\n    \n    C --> N[Log Access]\n    H --> N\n    M --> N\n    K --> O[Log Error]\n    \n    N --> P[Update Analytics]\n    O --> P\n    P --> Q[End Request]\n```\n\n## 4.3 Error Handling and Recovery Procedures\n\n### 4.3.1 Smart Contract Error Handling\n\nFor EVM transactions, the fee structure is similar to Ethereum's. As in the UTXO domain, the user attaches a fee to each transaction: the higher the fee, the more attractive that transaction to validators, and the higher that transaction's priority. When a user calls a smart contract, that user is also charged a certain amount of gas for each computational step the contract executes. BlockDAG prices gas the same as Ethereum: all transactions in a block pay the same price, which rises in periods of high demand, and falls in periods of low demand.\n\n```mermaid\nflowchart TD\n    A[Smart Contract Execution] --> B{Gas Limit Check}\n    B -->|Sufficient| C[Execute Contract Logic]\n    B -->|Insufficient| D[Revert Transaction]\n    \n    C --> E{Execution Successful?}\n    E -->|Yes| F[Update State]\n    E -->|No| G[Handle Contract Error]\n    \n    G --> H{Error Type}\n    H -->|Validation Error| I[Return Error Message]\n    H -->|Network Error| J[Retry with Backoff]\n    H -->|Critical Error| K[Emergency Stop]\n    \n    J --> L{Retry Count < Max?}\n    L -->|Yes| M[Increment Retry Counter]\n    L -->|No| N[Mark as Failed]\n    M --> O[Wait Backoff Period]\n    O --> A\n    \n    K --> P[Notify System Administrators]\n    P --> Q[Pause Contract Operations]\n    Q --> R[Investigate Issue]\n    \n    D --> S[Refund Gas Fees]\n    I --> T[Log Error Details]\n    N --> T\n    F --> U[Emit Success Event]\n    \n    S --> V[Notify User of Failure]\n    T --> V\n    U --> W[Continue Processing]\n    V --> X[End Transaction]\n    W --> X\n```\n\n### 4.3.2 Network Connectivity and Failover\n\n```mermaid\nflowchart TD\n    A[API Request] --> B[Primary BlockDAG Node]\n    B --> C{Node Responsive?}\n    C -->|Yes| D[Process Request]\n    C -->|No| E[Switch to Secondary Node]\n    \n    E --> F[Secondary BlockDAG Node]\n    F --> G{Node Responsive?}\n    G -->|Yes| H[Process Request]\n    G -->|No| I[Switch to Tertiary Node]\n    \n    I --> J[Tertiary BlockDAG Node]\n    J --> K{Node Responsive?}\n    K -->|Yes| L[Process Request]\n    K -->|No| M[All Nodes Down]\n    \n    M --> N[Enable Offline Mode]\n    N --> O[Queue Requests]\n    O --> P[Notify Operations Team]\n    P --> Q[Monitor Node Recovery]\n    \n    Q --> R{Primary Node Recovered?}\n    R -->|Yes| S[Switch Back to Primary]\n    R -->|No| T[Continue Monitoring]\n    T --> Q\n    \n    S --> U[Process Queued Requests]\n    U --> V[Resume Normal Operations]\n    \n    D --> W[Return Response]\n    H --> W\n    L --> W\n    W --> X[Log Transaction]\n    X --> Y[Update Metrics]\n    Y --> Z[End Request]\n```\n\n### 4.3.3 Data Consistency and Recovery\n\n```mermaid\nflowchart TD\n    A[Data Inconsistency Detected] --> B{Inconsistency Type}\n    B -->|Cache-DB Mismatch| C[Invalidate Cache]\n    B -->|DB-Blockchain Mismatch| D[Blockchain Reconciliation]\n    B -->|Partial Transaction| E[Transaction Rollback]\n    \n    C --> F[Reload from Database]\n    F --> G[Update Cache]\n    G --> H[Verify Consistency]\n    \n    D --> I[Query Blockchain State]\n    I --> J[Compare with Database]\n    J --> K{Blockchain is Source of Truth?}\n    K -->|Yes| L[Update Database]\n    K -->|No| M[Manual Review Required]\n    \n    E --> N[Identify Transaction Boundary]\n    N --> O[Rollback Partial Changes]\n    O --> P[Restore Previous State]\n    P --> Q[Retry Transaction]\n    \n    L --> R[Verify Data Integrity]\n    M --> S[Flag for Admin Review]\n    Q --> T{Retry Successful?}\n    T -->|Yes| U[Update Success Status]\n    T -->|No| V[Mark as Failed]\n    \n    H --> W{Consistency Restored?}\n    R --> W\n    U --> W\n    W -->|Yes| X[Resume Normal Operations]\n    W -->|No| Y[Escalate to Engineering]\n    \n    S --> Z[Create Support Ticket]\n    V --> Z\n    Y --> Z\n    Z --> AA[Manual Intervention]\n    X --> BB[Log Recovery Success]\n    AA --> BB\n    BB --> CC[End Recovery Process]\n```\n\n## 4.4 Performance and Scalability Considerations\n\n### 4.4.1 Transaction Processing Optimization\n\nBy combining the asynchronous, parallel processing of DAG with the security of PoW, it achieves a throughput of 10 blocks per second (10 TPS) for foundational operations, while supporting 2,000–15,000 TPS in high-load scenarios. This is achieved through a DAG layer that allows transactions to reference multiple predecessors for parallel validation, eliminating the bottlenecks of linear blockchains.\n\n```mermaid\nflowchart TD\n    A[High Transaction Volume] --> B[Load Balancer]\n    B --> C[Transaction Queue Manager]\n    C --> D{Queue Size Check}\n    D -->|Normal| E[Standard Processing]\n    D -->|High| F[Enable Batch Processing]\n    D -->|Critical| G[Priority Queue Activation]\n    \n    E --> H[Single Transaction Processing]\n    F --> I[Batch Transaction Assembly]\n    G --> J[Critical Transaction Fast Track]\n    \n    I --> K[Optimize Gas Usage]\n    K --> L[Submit Batch to BlockDAG]\n    L --> M{Batch Successful?}\n    M -->|Yes| N[Update All Records]\n    M -->|No| O[Process Individually]\n    \n    O --> P[Identify Failed Transactions]\n    P --> Q[Retry Failed Items]\n    Q --> R[Update Partial Results]\n    \n    H --> S[Submit to BlockDAG]\n    J --> S\n    S --> T[Monitor Confirmation]\n    T --> U{Confirmed?}\n    U -->|Yes| V[Update Database]\n    U -->|No| W[Check Timeout]\n    \n    W --> X{Timeout Exceeded?}\n    X -->|No| T\n    X -->|Yes| Y[Resubmit Transaction]\n    Y --> S\n    \n    N --> Z[Notify Stakeholders]\n    R --> Z\n    V --> Z\n    Z --> AA[Update Performance Metrics]\n    AA --> BB[End Processing]\n```\n\n### 4.4.2 Caching and Data Access Optimization\n\n```mermaid\nflowchart TD\n    A[Data Request] --> B[Check Redis Cache]\n    B --> C{Cache Hit?}\n    C -->|Yes| D[Return Cached Data]\n    C -->|No| E[Check Cache Tier 2]\n    \n    E --> F{Tier 2 Hit?}\n    F -->|Yes| G[Promote to Tier 1]\n    F -->|No| H[Query Database]\n    \n    H --> I{Data Found?}\n    I -->|Yes| J[Cache in Both Tiers]\n    I -->|No| K[Query Blockchain]\n    \n    K --> L{Blockchain Data Found?}\n    L -->|Yes| M[Store in Database]\n    L -->|No| N[Return Not Found]\n    \n    M --> O[Cache in Memory]\n    O --> P[Return Data]\n    \n    D --> Q[Update Access Statistics]\n    G --> Q\n    J --> Q\n    P --> Q\n    N --> R[Log Miss Event]\n    \n    Q --> S[Check Cache Expiry]\n    S --> T{Expired?}\n    T -->|Yes| U[Refresh from Source]\n    T -->|No| V[Extend TTL]\n    \n    U --> W[Update Cache]\n    W --> X[Return Fresh Data]\n    V --> Y[Return Current Data]\n    R --> Z[End Request]\n    X --> Z\n    Y --> Z\n```\n\n## 4.5 Security and Compliance Workflows\n\n### 4.5.1 Multi-Signature Authorization Process\n\n```mermaid\nflowchart TD\n    A[Critical Operation Request] --> B[Identify Required Signers]\n    B --> C[Generate Signature Request]\n    C --> D[Send to First Signer]\n    \n    D --> E[Signer Authentication]\n    E --> F{Authentication Successful?}\n    F -->|No| G[Reject Request]\n    F -->|Yes| H[Present Operation Details]\n    \n    H --> I[Signer Review]\n    I --> J{Approve Operation?}\n    J -->|No| K[Record Rejection]\n    J -->|Yes| L[Collect Digital Signature]\n    \n    L --> M[Validate Signature]\n    M --> N{Signature Valid?}\n    N -->|No| O[Request Re-signature]\n    N -->|Yes| P[Store Signature]\n    \n    P --> Q{All Signatures Collected?}\n    Q -->|No| R[Send to Next Signer]\n    Q -->|Yes| S[Validate Signature Set]\n    \n    R --> E\n    S --> T{Threshold Met?}\n    T -->|No| U[Insufficient Signatures]\n    T -->|Yes| V[Execute Operation]\n    \n    V --> W[Record on Blockchain]\n    W --> X[Notify All Parties]\n    X --> Y[Archive Signature Data]\n    \n    G --> Z[Log Security Event]\n    K --> Z\n    O --> Z\n    U --> Z\n    Y --> AA[Complete Process]\n    Z --> AA\n```\n\n### 4.5.2 Regulatory Compliance Monitoring\n\n```mermaid\nflowchart TD\n    A[Transaction Initiated] --> B[Extract Compliance Data]\n    B --> C[Check Sanctions Lists]\n    C --> D{Sanctioned Entity?}\n    D -->|Yes| E[Block Transaction]\n    D -->|No| F[Validate Documentation]\n    \n    F --> G{Documents Complete?}\n    G -->|No| H[Request Missing Documents]\n    G -->|Yes| I[Check Regulatory Rules]\n    \n    I --> J{Compliance Rules Met?}\n    J -->|No| K[Flag for Review]\n    J -->|Yes| L[Generate Compliance Report]\n    \n    L --> M[Submit to Authorities]\n    M --> N{Auto-Approval Eligible?}\n    N -->|Yes| O[Automatic Clearance]\n    N -->|No| P[Manual Review Queue]\n    \n    P --> Q[Compliance Officer Review]\n    Q --> R{Approve Transaction?}\n    R -->|Yes| S[Grant Clearance]\n    R -->|No| T[Reject with Reason]\n    \n    E --> U[Notify Compliance Team]\n    H --> V[Suspend Transaction]\n    K --> V\n    T --> V\n    \n    O --> W[Process Transaction]\n    S --> W\n    W --> X[Update Compliance Records]\n    X --> Y[Archive Documentation]\n    \n    U --> Z[Generate Alert Report]\n    V --> Z\n    Y --> AA[Complete Compliance Check]\n    Z --> AA\n```\n\n## 4.6 Monitoring and Analytics Workflows\n\n### 4.6.1 Real-Time System Monitoring\n\n```mermaid\nflowchart TD\n    A[System Metrics Collection] --> B[Performance Data Aggregation]\n    B --> C[Threshold Analysis]\n    C --> D{Threshold Exceeded?}\n    D -->|No| E[Continue Monitoring]\n    D -->|Yes| F[Classify Alert Severity]\n    \n    F --> G{Severity Level}\n    G -->|Low| H[Log Warning]\n    G -->|Medium| I[Send Notification]\n    G -->|High| J[Immediate Alert]\n    G -->|Critical| K[Emergency Response]\n    \n    K --> L[Auto-Scale Resources]\n    L --> M[Notify On-Call Team]\n    M --> N[Initiate Incident Response]\n    \n    J --> O[Alert Operations Team]\n    O --> P[Assess Impact]\n    P --> Q{Service Degradation?}\n    Q -->|Yes| R[Implement Mitigation]\n    Q -->|No| S[Monitor Closely]\n    \n    I --> T[Update Dashboard]\n    H --> U[Record in Logs]\n    \n    R --> V[Monitor Recovery]\n    V --> W{Issue Resolved?}\n    W -->|No| X[Escalate Response]\n    W -->|Yes| Y[Return to Normal]\n    \n    E --> Z[Update Metrics Database]\n    S --> Z\n    T --> Z\n    U --> Z\n    Y --> Z\n    X --> N\n    Z --> AA[Generate Reports]\n    AA --> BB[End Monitoring Cycle]\n```\n\n### 4.6.2 Business Intelligence and Reporting\n\n```mermaid\nflowchart TD\n    A[Data Collection from Multiple Sources] --> B[Data Validation and Cleansing]\n    B --> C[Transform to Analytics Format]\n    C --> D[Load into Data Warehouse]\n    \n    D --> E[Real-Time Analytics Processing]\n    E --> F[Generate Key Metrics]\n    F --> G[Update Executive Dashboard]\n    \n    G --> H[Stakeholder Access Control]\n    H --> I{User Authorization Level}\n    I -->|Executive| J[Full Dashboard Access]\n    I -->|Manager| K[Department Metrics]\n    I -->|Operator| L[Operational Views]\n    I -->|External| M[Limited Public Data]\n    \n    J --> N[Strategic KPI Reports]\n    K --> O[Operational Performance]\n    L --> P[System Status Views]\n    M --> Q[Public Transparency Reports]\n    \n    N --> R[Automated Report Generation]\n    O --> R\n    P --> R\n    Q --> R\n    \n    R --> S[Schedule Report Delivery]\n    S --> T[Email/SMS Notifications]\n    T --> U[Archive Reports]\n    U --> V[Update Report Catalog]\n    V --> W[End Reporting Cycle]\n```\n\nThis comprehensive process flowchart section provides detailed workflows for all major ShipLedger operations, from core business processes to error handling and monitoring. The diagrams illustrate the complex interactions between blockchain technology, traditional maritime systems, and stakeholder requirements while maintaining focus on superior speed (1400 TPS and higher) and much lower transaction fees that BlockDAG's EVM-compatible infrastructure provides to the maritime trade ecosystem.\n\n# 5. System Architecture\n\n## 5.1 High-Level Architecture\n\n### 5.1.1 System Overview\n\nShipLedger employs a hybrid blockchain-microservices architecture that combines BlockDAG's fully Ethereum Virtual Machine (EVM) compatible infrastructure with a distributed microservices ecosystem. The architecture follows Domain-Driven Design (DDD) principles, organizing the system around core maritime business domains while leveraging BlockDAG's superior speed (1400 TPS and higher) and much lower transaction fees.\n\nThe system adopts an event-driven architecture pattern where smart contracts facilitate programmable automata that can control and manage assets, lying at the heart of decentralized finance (DeFI) and other sophisticated decentralized applications (dApps). This approach enables real-time responsiveness to maritime trade events while maintaining data consistency across distributed services.\n\nThe architectural style emphasizes loose coupling between services through well-defined APIs and asynchronous messaging patterns. Choosing a microservice architecture over monolithic architectures proves more effective as each logistical operational process can be treated as an individual component, particularly beneficial for companies with complex operational flows including multiple logistics processes.\n\nKey architectural principles include:\n\n- **Blockchain-First Design**: All critical maritime documents and transactions are anchored on BlockDAG's immutable ledger\n- **Domain Separation**: Each maritime business function operates as an independent microservice\n- **Event-Driven Communication**: Services communicate through blockchain events and message queues\n- **API Gateway Pattern**: Centralized entry point for all client interactions\n- **Database Per Service**: Each microservice maintains its own data store for optimal independence\n\n### 5.1.2 Core Components Table\n\n| Component Name | Primary Responsibility | Key Dependencies | Integration Points | Critical Considerations |\n|----------------|----------------------|------------------|-------------------|----------------------|\n| **Blockchain Service Layer** | Smart contract deployment and blockchain interactions | BlockDAG Network, EVM Runtime | All microservices via events | Gas pricing similar to Ethereum with dynamic fee adjustment |\n| **Document Management Service** | Electronic Bill of Lading creation and verification | Blockchain Service, IPFS Storage | Port Authority APIs, Customs Systems | Document immutability and regulatory compliance |\n| **Tracking Service** | Real-time cargo and vessel monitoring | IoT Gateways, GPS Systems | AIS Networks, Port Management Systems | Supporting 120+ planned, estimated, and actual events per shipment |\n| **Trade Finance Service** | Payment automation and letter of credit processing | Banking APIs, Multi-currency Systems | SWIFT Network, Correspondent Banks | Initial per-transaction fee of about $0.01 per transaction |\n\n### 5.1.3 Data Flow Description\n\nThe primary data flow follows a hub-and-spoke pattern with the blockchain serving as the central source of truth. When a shipper initiates a new shipment, the Document Management Service creates digital shipping instructions and deploys a smart contract to BlockDAG. This contract serves as the coordination mechanism for all subsequent operations.\n\nEvent-driven data propagation ensures that when blockchain state changes occur, relevant microservices receive notifications through the Event Bus. The event bus facilitates asynchronous communication between services, where services publish events to the event bus which are then picked up by services that need to respond, decoupling services and allowing each to operate independently.\n\nData transformation occurs at service boundaries, where each microservice maintains its own data model optimized for its specific domain requirements. The API Gateway aggregates responses from multiple services to provide unified views to client applications.\n\nCritical data stores include MongoDB for operational data, Redis for caching frequently accessed information, and IPFS for distributed document storage. The blockchain maintains distributed, decentralized storage for transaction history, DAG structure, and state databases.\n\n### 5.1.4 External Integration Points\n\n| System Name | Integration Type | Data Exchange Pattern | Protocol/Format | SLA Requirements |\n|-------------|------------------|----------------------|-----------------|------------------|\n| **Port Authority Systems** | Real-time API | Bidirectional event streaming | REST/JSON, EDI X12 | 99.5% uptime, <2s response |\n| **Customs Platforms** | Batch and Real-time | Document submission and status updates | REST/JSON, XML | 99.9% uptime, <5s response |\n| **Banking Networks** | Secure API | Payment instructions and confirmations | SWIFT MT, ISO 20022 | 99.99% uptime, <10s response |\n| **IoT Sensor Networks** | Message Queue | Continuous telemetry data | MQTT, CoAP | 95% uptime, <30s latency |\n\n## 5.2 Component Details\n\n### 5.2.1 Blockchain Service Layer\n\n**Purpose and Responsibilities**\nThe Blockchain Service Layer serves as the primary interface between ShipLedger's microservices and the BlockDAG network. The BlockDAG network supports both UTXO and account models, with BlockDAG's UTXOs supporting fast, scalable payments while BlockDAG's EVM-compatible account-based subsystem supports standardized smart contracts.\n\n**Technologies and Frameworks Used**\n- **Smart Contract Runtime**: Solidity for smart contract development, leveraging existing Ethereum-based libraries and frameworks\n- **Development Tools**: Popular Ethereum development tools such as Truffle, Remix, MetaMask, and Hardhat\n- **Token Standards**: Ethereum token standards like ERC-20 (fungible tokens) and ERC-721 (non-fungible tokens)\n\n**Key Interfaces and APIs**\n- Smart Contract Deployment API for creating new maritime trade contracts\n- Transaction Monitoring API for tracking blockchain state changes\n- Event Subscription API for real-time blockchain event notifications\n- Gas Optimization API for managing transaction costs\n\n**Data Persistence Requirements**\nSmart contracts maintain immutable state on BlockDAG while operational metadata is cached in Redis for performance optimization.\n\n**Scaling Considerations**\nThe system achieves a throughput of 10 blocks per second (10 TPS) for foundational operations while supporting 2,000–15,000 TPS in high-load scenarios through a DAG layer that allows transactions to reference multiple predecessors for parallel validation.\n\n### 5.2.2 Document Management Service\n\n**Purpose and Responsibilities**\nManages the complete lifecycle of maritime shipping documents, with primary focus on Electronic Bills of Lading (eBL) creation, verification, and distribution. The service ensures regulatory compliance while maintaining document integrity through blockchain anchoring.\n\n**Technologies and Frameworks Used**\n- **Backend Framework**: Flask 3.0+ with Python 3.11+\n- **Document Storage**: IPFS for distributed storage, MongoDB GridFS for large files\n- **Cryptographic Libraries**: Python cryptography library for digital signatures\n- **Template Engine**: Jinja2 for dynamic document generation\n\n**Key Interfaces and APIs**\n- Document Creation API for generating new shipping documents\n- Verification API for validating document authenticity\n- Access Control API for managing permission-based document sharing\n- Template Management API for customizable document formats\n\n**Data Persistence Requirements**\nDocument metadata stored in MongoDB with cryptographic hashes, while actual document content distributed across IPFS network for redundancy and availability.\n\n**Scaling Considerations**\nHorizontal scaling through containerized deployment with load balancing across multiple service instances.\n\n### 5.2.3 Tracking Service\n\n**Purpose and Responsibilities**\nProvides comprehensive real-time tracking capabilities for containers, vessels, and cargo throughout the maritime supply chain. The system supports over 120 planned, estimated, and actual events per shipment, giving real-time insights and ensuring compliance with global trade standards.\n\n**Technologies and Frameworks Used**\n- **Event Processing**: Apache Kafka for high-throughput event streaming\n- **Time Series Database**: InfluxDB for storing tracking data\n- **Geospatial Processing**: PostGIS for location-based queries\n- **Real-time Communication**: WebSocket connections for live updates\n\n**Key Interfaces and APIs**\n- Location Update API for receiving GPS coordinates and sensor data\n- Event Processing API for handling milestone events\n- Query API for retrieving historical tracking information\n- Notification API for alerting stakeholders of status changes\n\n**Data Persistence Requirements**\nTime-series data stored in InfluxDB for optimal query performance, with event metadata replicated to MongoDB for cross-service access.\n\n**Scaling Considerations**\nEvent streaming architecture enables horizontal scaling with partitioned message queues and distributed processing nodes.\n\n### 5.2.4 Trade Finance Service\n\n**Purpose and Responsibilities**\nAutomates trade finance operations including payment processing, letter of credit management, and multi-currency transactions. Smart contracts facilitate programmable automata that can control and manage assets, lying at the heart of decentralized finance (DeFI) and other sophisticated decentralized applications.\n\n**Technologies and Frameworks Used**\n- **Payment Processing**: Integration with banking APIs and SWIFT network\n- **Smart Contracts**: Solidity-based contracts for automated payment triggers\n- **Currency Conversion**: Real-time exchange rate APIs\n- **Compliance**: AML/KYC verification services\n\n**Key Interfaces and APIs**\n- Payment Automation API for triggering smart contract payments\n- Letter of Credit API for managing trade finance instruments\n- Currency Exchange API for multi-currency support\n- Compliance API for regulatory verification\n\n**Data Persistence Requirements**\nFinancial transaction data stored with encryption in MongoDB, with audit trails maintained on blockchain for immutability.\n\n**Scaling Considerations**\nService replication with database sharding for handling high-volume financial transactions while maintaining ACID properties.\n\n```mermaid\ngraph TB\n    subgraph \"Client Layer\"\n        A[Web Dashboard] --> B[Mobile App]\n        B --> C[API Clients]\n    end\n    \n    subgraph \"API Gateway Layer\"\n        D[Load Balancer] --> E[API Gateway]\n        E --> F[Authentication Service]\n    end\n    \n    subgraph \"Microservices Layer\"\n        G[Document Management] --> H[Tracking Service]\n        H --> I[Trade Finance Service]\n        I --> J[Notification Service]\n    end\n    \n    subgraph \"Blockchain Layer\"\n        K[Smart Contract Engine] --> L[BlockDAG Network]\n        L --> M[Event Processing]\n    end\n    \n    subgraph \"Data Layer\"\n        N[MongoDB Cluster] --> O[Redis Cache]\n        O --> P[IPFS Storage]\n    end\n    \n    A --> D\n    E --> G\n    G --> K\n    K --> N\n    \n    style L fill:#e1f5fe\n    style G fill:#f3e5f5\n    style N fill:#e8f5e8\n```\n\n### 5.2.5 Component Interaction Sequence\n\n```mermaid\nsequenceDiagram\n    participant C as Client\n    participant AG as API Gateway\n    participant DM as Document Management\n    participant BC as Blockchain Service\n    participant TS as Tracking Service\n    participant TF as Trade Finance\n    \n    C->>AG: Create Shipment Request\n    AG->>DM: Generate eBL\n    DM->>BC: Deploy Smart Contract\n    BC->>BC: Execute on BlockDAG\n    BC-->>DM: Contract Address\n    DM->>TS: Initialize Tracking\n    TS->>BC: Subscribe to Events\n    BC->>TF: Setup Payment Triggers\n    TF-->>AG: Confirmation\n    AG-->>C: Shipment Created\n    \n    Note over BC: Blockchain events trigger<br/>cross-service updates\n    \n    BC->>TS: Location Update Event\n    BC->>TF: Payment Due Event\n    BC->>DM: Document Status Change\n```\n\n### 5.2.6 State Transition Management\n\n```mermaid\nstateDiagram-v2\n    [*] --> DocumentCreation\n    DocumentCreation --> ContractDeployment : eBL Generated\n    ContractDeployment --> TrackingActive : Smart Contract Live\n    TrackingActive --> InTransit : Cargo Loaded\n    InTransit --> CustomsClearance : Arrived at Port\n    CustomsClearance --> PaymentProcessing : Clearance Approved\n    PaymentProcessing --> Completed : Payment Confirmed\n    \n    InTransit --> ExceptionHandling : Route Deviation\n    ExceptionHandling --> InTransit : Issue Resolved\n    CustomsClearance --> Hold : Additional Review\n    Hold --> CustomsClearance : Documentation Updated\n    \n    Completed --> [*]\n    \n    note right of ContractDeployment\n        BlockDAG smart contract\n        manages state transitions\n        automatically\n    end note\n```\n\n## 5.3 Technical Decisions\n\n### 5.3.1 Architecture Style Decisions and Tradeoffs\n\n**Microservices vs Monolithic Architecture**\n\n| Decision Factor | Microservices (Chosen) | Monolithic Alternative | Rationale |\n|----------------|------------------------|----------------------|-----------|\n| **Scalability** | Independent service scaling | Entire application scaling | Microservices increase scalability and decrease downtime as each microservice can be scaled and monitored individually, achieving faster scalability without scaling the application as a whole |\n| **Technology Diversity** | Service-specific tech stacks | Uniform technology stack | Enables optimal technology choices per domain |\n| **Development Velocity** | Parallel team development | Sequential development cycles | Developers focus on learning specific microservices rather than overall system architecture, leading to increased innovation and productivity while reducing errors |\n| **Operational Complexity** | Higher operational overhead | Simpler deployment model | Justified by maritime industry's complex operational flows |\n\n**Blockchain Integration Strategy**\n\nThe decision to use BlockDAG's full Ethereum Virtual Machine (EVM) compatibility effectively builds a high-speed bridge to Ethereum's massive $500 billion economy provides several advantages:\n\n- **Developer Ecosystem**: Allows thousands of existing Ethereum projects to move to BlockDAG without rewriting their code\n- **Tooling Compatibility**: Popular Ethereum wallets like MetaMask and Trust Wallet can manage BDAG coins and interact with dApps on the network\n- **Performance Benefits**: Superior speed (1400 TPS and higher) and much lower transaction fees offering a smoother experience for users\n\n### 5.3.2 Communication Pattern Choices\n\n**Event-Driven Architecture Selection**\n\nTechnology has moved toward event-driven microservices, where the \"event\" is any interaction with a system, meaning the system responds to events in real time, creating a more dynamic and seamless user experience.\n\n| Communication Pattern | Use Case | Implementation | Benefits |\n|----------------------|----------|----------------|----------|\n| **Synchronous REST** | Client-facing APIs | HTTP/JSON over TLS | Simple debugging, immediate responses |\n| **Asynchronous Events** | Inter-service communication | Kafka + Blockchain Events | Decouples services, allowing each to operate independently and handle only relevant events |\n| **Message Queues** | Background processing | Redis Pub/Sub | Reliable delivery, load leveling |\n| **WebSocket Streams** | Real-time updates | Socket.IO connections | Live tracking updates, instant notifications |\n\n**API Gateway Pattern Implementation**\n\nThe BFF (Backend for Frontend) API acts as an intermediary layer between the UI and the microservices, providing:\n\n- Unified client interface across multiple microservices\n- Authentication and authorization enforcement\n- Request routing and load balancing\n- Response aggregation and transformation\n\n### 5.3.3 Data Storage Solution Rationale\n\n**Database Per Service Pattern**\n\nThe Database per Service pattern describes how each service has its own database in order to ensure loose coupling. This approach provides:\n\n| Service | Database Choice | Justification | Consistency Model |\n|---------|----------------|---------------|-------------------|\n| **Document Management** | MongoDB + IPFS | Document-oriented data with large file support | Eventual consistency with blockchain anchoring |\n| **Tracking Service** | InfluxDB + PostGIS | Time-series data with geospatial queries | Strong consistency for location data |\n| **Trade Finance** | MongoDB + Redis | Complex financial documents with caching | ACID transactions for financial operations |\n| **User Management** | PostgreSQL | Relational user data with strong consistency | Strong consistency for authentication |\n\n**Blockchain as Source of Truth**\n\nCritical maritime trade data is anchored on BlockDAG to ensure immutability and provide a single source of truth across all services. This hybrid approach balances performance requirements with data integrity needs.\n\n### 5.3.4 Caching Strategy Justification\n\n**Multi-Level Caching Architecture**\n\n| Cache Level | Technology | Purpose | TTL Strategy |\n|-------------|------------|---------|--------------|\n| **Application Cache** | Redis Cluster | Frequently accessed data | Dynamic TTL based on data volatility |\n| **API Gateway Cache** | Nginx + Redis | Response caching | Short TTL for real-time data |\n| **Database Query Cache** | MongoDB Cache | Query result optimization | Invalidation on data updates |\n| **CDN Cache** | AWS CloudFront | Static asset delivery | Long TTL for immutable content |\n\nThe caching strategy addresses the maritime industry's need for real-time data access while managing the latency inherent in blockchain operations and external system integrations.\n\n### 5.3.5 Security Mechanism Selection\n\n**Multi-Layered Security Architecture**\n\n```mermaid\ngraph TD\n    A[Client Request] --> B[TLS Termination]\n    B --> C[API Gateway Authentication]\n    C --> D[Service-to-Service mTLS]\n    D --> E[Blockchain Signature Verification]\n    E --> F[Database Encryption at Rest]\n    \n    G[Identity Provider] --> C\n    H[Certificate Authority] --> D\n    I[Hardware Security Module] --> E\n    J[Key Management Service] --> F\n    \n    style E fill:#ffeb3b\n    style C fill:#4caf50\n    style F fill:#2196f3\n```\n\n**Security Decision Matrix**\n\n| Security Domain | Implementation | Rationale |\n|-----------------|----------------|-----------|\n| **Authentication** | OAuth 2.0 + JWT tokens | Industry standard with maritime partner compatibility |\n| **Authorization** | RBAC with smart contracts | Blockchain-enforced permissions for document access |\n| **Data Encryption** | AES-256 + TLS 1.3 | Maritime regulatory compliance requirements |\n| **Network Security** | mTLS + VPN tunnels | Secure communication across global maritime networks |\n\n## 5.4 Cross-Cutting Concerns\n\n### 5.4.1 Monitoring and Observability Approach\n\n**Comprehensive Observability Stack**\n\nThe monitoring strategy implements the three pillars of observability: metrics, logs, and traces. Tracing issues in a distributed system can be difficult, especially when a request passes through multiple services, requiring advanced monitoring, centralized logging, and distributed tracing tools to maintain observability and quickly diagnose problems.\n\n| Observability Type | Technology Stack | Coverage | Retention Policy |\n|-------------------|------------------|----------|------------------|\n| **Metrics** | Prometheus + Grafana | System and business metrics | 90 days detailed, 1 year aggregated |\n| **Logging** | ELK Stack (Elasticsearch, Logstash, Kibana) | Application and system logs | 30 days searchable, 1 year archived |\n| **Tracing** | Jaeger + OpenTelemetry | Distributed request tracing | 7 days detailed, 30 days sampled |\n| **Blockchain Monitoring** | Custom BlockDAG monitoring | Smart contract events and gas usage | Permanent on-chain, 1 year off-chain |\n\n**Key Performance Indicators (KPIs)**\n\n- **System Performance**: API response times, throughput, error rates\n- **Blockchain Metrics**: Transaction confirmation times, gas costs, smart contract execution success rates\n- **Business Metrics**: Document processing times, shipment tracking accuracy, payment settlement duration\n- **User Experience**: Page load times, mobile app performance, notification delivery rates\n\n### 5.4.2 Logging and Tracing Strategy\n\n**Structured Logging Implementation**\n\nAll services implement structured logging using JSON format with standardized fields:\n\n```json\n{\n  \"timestamp\": \"2024-11-04T10:30:00Z\",\n  \"service\": \"document-management\",\n  \"level\": \"INFO\",\n  \"trace_id\": \"abc123def456\",\n  \"span_id\": \"789ghi012jkl\",\n  \"user_id\": \"user_12345\",\n  \"shipment_id\": \"SHIP_67890\",\n  \"message\": \"eBL created successfully\",\n  \"blockchain_tx\": \"0x1234567890abcdef\",\n  \"duration_ms\": 250\n}\n```\n\n**Distributed Tracing Architecture**\n\nTraces follow requests across the entire system, from client interaction through multiple microservices to blockchain confirmation. This enables rapid identification of performance bottlenecks and failure points in complex maritime trade workflows.\n\n### 5.4.3 Error Handling Patterns\n\n**Circuit Breaker Pattern Implementation**\n\nMicroservices architecture enhances resilience and reliability by designing services to be independent and isolated, meaning that a failure in one service does not directly affect other services, allowing the application to continue functioning even if one or more services fail.\n\n```mermaid\nflowchart TD\n    A[Service Request] --> B{Circuit Breaker State}\n    B -->|Closed| C[Execute Request]\n    B -->|Open| D[Return Cached Response]\n    B -->|Half-Open| E[Test Request]\n    \n    C --> F{Request Success?}\n    F -->|Yes| G[Reset Failure Count]\n    F -->|No| H[Increment Failure Count]\n    \n    H --> I{Threshold Exceeded?}\n    I -->|Yes| J[Open Circuit]\n    I -->|No| K[Continue Normal Operation]\n    \n    E --> L{Test Success?}\n    L -->|Yes| M[Close Circuit]\n    L -->|No| N[Keep Circuit Open]\n    \n    style J fill:#ff5722\n    style M fill:#4caf50\n    style D fill:#ff9800\n```\n\n**Error Handling Strategy Matrix**\n\n| Error Type | Handling Strategy | Recovery Mechanism | User Impact |\n|------------|------------------|-------------------|-------------|\n| **Blockchain Network Issues** | Circuit breaker + retry with exponential backoff | Queue transactions for later processing | Delayed confirmation notifications |\n| **External API Failures** | Fallback to cached data + circuit breaker | Alternative data sources where available | Graceful degradation of features |\n| **Database Connection Issues** | Connection pooling + automatic failover | Read replicas for query operations | Temporary read-only mode |\n| **Smart Contract Failures** | Transaction revert handling + gas optimization | Automatic retry with adjusted parameters | Transaction failure notifications |\n\n### 5.4.4 Authentication and Authorization Framework\n\n**Multi-Tenant Security Model**\n\nThe authentication framework supports multiple maritime organizations with role-based access control (RBAC) enforced both at the application level and through blockchain smart contracts.\n\n| User Role | System Access | Document Permissions | Blockchain Operations |\n|-----------|---------------|---------------------|----------------------|\n| **Shipper** | Create shipments, view own data | Create/edit shipping instructions | Deploy shipment contracts |\n| **Carrier** | Manage assigned shipments | Create/edit Bills of Lading | Update shipment status |\n| **Port Authority** | View port-related shipments | Read customs documents | Verify clearance status |\n| **Bank/Finance** | Process trade finance | Access financial documents | Execute payment contracts |\n\n**Smart Contract-Based Authorization**\n\nPermission management is partially enforced through blockchain smart contracts, ensuring that document access rights are immutable and auditable. Each transaction is encrypted using a key which links relevant participants, with rights coded into the system.\n\n### 5.4.5 Performance Requirements and SLAs\n\n**Service Level Agreements**\n\n| Service Category | Availability Target | Response Time Target | Throughput Target | Recovery Time Objective |\n|------------------|-------------------|---------------------|-------------------|------------------------|\n| **Critical Services** (Document Management, Blockchain) | 99.9% | <2 seconds | 1000 requests/second | <15 minutes |\n| **Standard Services** (Tracking, Notifications) | 99.5% | <5 seconds | 500 requests/second | <30 minutes |\n| **Batch Services** (Reporting, Analytics) | 99.0% | <30 seconds | 100 requests/second | <2 hours |\n| **External Integrations** | 95.0% | <10 seconds | Variable | <1 hour |\n\n**Performance Optimization Strategies**\n\n- **Database Optimization**: Query optimization, indexing strategies, connection pooling\n- **Caching**: Multi-level caching with intelligent invalidation\n- **Load Balancing**: Geographic distribution with health checks\n- **Blockchain Optimization**: Gas pricing optimization with dynamic fee adjustment based on network demand\n\n### 5.4.6 Disaster Recovery Procedures\n\n**Business Continuity Planning**\n\nThe disaster recovery strategy ensures minimal disruption to global maritime trade operations through redundant systems and automated failover mechanisms.\n\n| Recovery Scenario | RTO (Recovery Time Objective) | RPO (Recovery Point Objective) | Recovery Strategy |\n|-------------------|-------------------------------|-------------------------------|-------------------|\n| **Single Service Failure** | <5 minutes | <1 minute | Automatic failover to healthy instances |\n| **Database Failure** | <15 minutes | <5 minutes | Failover to read replicas, promote to primary |\n| **Blockchain Network Issues** | <30 minutes | 0 (immutable ledger) | Switch to backup blockchain nodes |\n| **Complete Data Center Outage** | <2 hours | <15 minutes | Geographic failover to secondary region |\n\n**Backup and Recovery Architecture**\n\n```mermaid\ngraph TB\n    subgraph \"Primary Region\"\n        A[Application Services] --> B[Primary Database]\n        B --> C[Blockchain Nodes]\n    end\n    \n    subgraph \"Secondary Region\"\n        D[Standby Services] --> E[Replica Database]\n        E --> F[Backup Blockchain Nodes]\n    end\n    \n    subgraph \"Backup Storage\"\n        G[Encrypted Backups] --> H[Geographic Distribution]\n        H --> I[Point-in-Time Recovery]\n    end\n    \n    B -.->|Continuous Replication| E\n    C -.->|Blockchain Sync| F\n    B -->|Daily Snapshots| G\n    \n    style A fill:#4caf50\n    style D fill:#ff9800\n    style G fill:#2196f3\n```\n\n**Recovery Testing and Validation**\n\n- **Monthly**: Automated backup restoration tests\n- **Quarterly**: Failover scenario testing\n- **Annually**: Full disaster recovery simulation with stakeholder participation\n- **Continuous**: Blockchain network resilience monitoring\n\nThe comprehensive disaster recovery plan ensures that critical maritime trade operations can continue even during significant system failures, maintaining the integrity of global supply chain operations that depend on ShipLedger's services.\n\n# 6. SYSTEM COMPONENTS DESIGN\n\n## 6.1 Smart Contract Architecture\n\n### 6.1.1 Core Smart Contract Components\n\nBlockDAG is fully Ethereum Virtual Machine (EVM) compatible, allowing for seamless integration and deployment of Ethereum-based smart contracts. This compatibility ensures that developers familiar with Ethereum's toolset, including Solidity and other Ethereum-compatible programming languages, can easily build and deploy decentralized applications (dApps) on the BlockDAG network.\n\nThe ShipLedger smart contract architecture consists of four primary contract types that manage the complete maritime trade lifecycle:\n\n| Contract Type | Primary Function | Key Features | Gas Optimization |\n|---------------|------------------|--------------|------------------|\n| **ShipmentContract** | Core shipment management | Multi-party signatures, state transitions, event emissions | Batch operations, efficient storage patterns |\n| **BillOfLadingContract** | Electronic BoL creation and verification | Document hashing, access control, transfer mechanisms | Minimal storage, IPFS integration |\n| **TradeFinanceContract** | Payment automation and escrow | Multi-currency support, conditional releases, interest calculations | Gas-efficient payment triggers |\n| **ComplianceContract** | Regulatory verification | KYC/AML checks, sanctions screening, audit trails | Optimized validation logic |\n\n### 6.1.2 Smart Contract Inheritance Hierarchy\n\n```mermaid\nclassDiagram\n    class BaseContract {\n        +address owner\n        +mapping(address => bool) authorized\n        +modifier onlyOwner()\n        +modifier onlyAuthorized()\n        +function transferOwnership()\n        +function addAuthorized()\n    }\n    \n    class ShipmentContract {\n        +struct Shipment\n        +enum ShipmentStatus\n        +mapping(bytes32 => Shipment) shipments\n        +function createShipment()\n        +function updateStatus()\n        +function getShipment()\n    }\n    \n    class BillOfLadingContract {\n        +struct BillOfLading\n        +mapping(bytes32 => BillOfLading) bills\n        +mapping(bytes32 => address[]) signatories\n        +function createBillOfLading()\n        +function signBillOfLading()\n        +function transferOwnership()\n    }\n    \n    class TradeFinanceContract {\n        +struct PaymentTerms\n        +mapping(bytes32 => PaymentTerms) payments\n        +function setupPayment()\n        +function releasePayment()\n        +function calculateInterest()\n    }\n    \n    class ComplianceContract {\n        +mapping(address => bool) kycVerified\n        +mapping(address => bool) sanctioned\n        +function verifyKYC()\n        +function checkSanctions()\n        +function auditCompliance()\n    }\n    \n    BaseContract <|-- ShipmentContract\n    BaseContract <|-- BillOfLadingContract\n    BaseContract <|-- TradeFinanceContract\n    BaseContract <|-- ComplianceContract\n    \n    ShipmentContract --> BillOfLadingContract : creates\n    ShipmentContract --> TradeFinanceContract : triggers\n    ShipmentContract --> ComplianceContract : validates\n```\n\n### 6.1.3 Smart Contract State Management\n\nBlockDAG's EVM-compatible account-based subsystem supports standardized smart contracts. A library is provided to connect these two worlds, providing developers with the best of both worlds.\n\nThe state management system employs a hierarchical approach where each contract maintains its own state while coordinating through event-driven communication:\n\n**Primary State Variables:**\n\n```solidity\n// ShipmentContract.sol\nstruct Shipment {\n    bytes32 shipmentId;\n    address shipper;\n    address carrier;\n    address consignee;\n    ShipmentStatus status;\n    bytes32 billOfLadingHash;\n    uint256 createdAt;\n    uint256 updatedAt;\n    mapping(string => string) metadata;\n}\n\nenum ShipmentStatus {\n    Created,\n    DocumentsGenerated,\n    InTransit,\n    ArrivedAtPort,\n    CustomsCleared,\n    Delivered,\n    Completed\n}\n```\n\n**Event-Driven State Synchronization:**\n\n```solidity\nevent ShipmentCreated(bytes32 indexed shipmentId, address indexed shipper);\nevent StatusUpdated(bytes32 indexed shipmentId, ShipmentStatus newStatus);\nevent DocumentGenerated(bytes32 indexed shipmentId, bytes32 documentHash);\nevent PaymentTriggered(bytes32 indexed shipmentId, uint256 amount);\n```\n\n### 6.1.4 Multi-Signature Implementation\n\nThe multi-signature mechanism ensures that critical operations require consensus from multiple authorized parties:\n\n```solidity\ncontract MultiSigBillOfLading {\n    struct Signature {\n        address signer;\n        bytes signature;\n        uint256 timestamp;\n        bool isValid;\n    }\n    \n    mapping(bytes32 => Signature[]) public signatures;\n    mapping(bytes32 => uint256) public requiredSignatures;\n    \n    function signDocument(bytes32 documentHash, bytes memory signature) external {\n        require(isAuthorizedSigner(msg.sender, documentHash), \"Unauthorized signer\");\n        \n        signatures[documentHash].push(Signature({\n            signer: msg.sender,\n            signature: signature,\n            timestamp: block.timestamp,\n            isValid: true\n        }));\n        \n        if (signatures[documentHash].length >= requiredSignatures[documentHash]) {\n            emit DocumentFullySigned(documentHash);\n            _finalizeDocument(documentHash);\n        }\n    }\n}\n```\n\n### 6.1.5 Gas Optimization Strategies\n\nNevertheless, linear blockchains can struggle with scalability issues, as every node must process every transaction, leading to slower transaction times, and putting pressure on fees. Moreover, many transactions are unrelated to one another, so there is no need for nodes to order them, because executing them in any order yields the same results.\n\nTo address gas efficiency concerns, the smart contracts implement several optimization techniques:\n\n| Optimization Technique | Implementation | Gas Savings |\n|------------------------|----------------|-------------|\n| **Packed Structs** | Efficient storage layout with uint256 alignment | 20-30% storage costs |\n| **Batch Operations** | Multiple operations in single transaction | 40-60% per additional operation |\n| **Event-Based Communication** | Minimal on-chain storage, off-chain indexing | 70-80% for data retrieval |\n| **Lazy Evaluation** | Compute values only when needed | 15-25% computational costs |\n\n**Example Gas-Optimized Storage Pattern:**\n\n```solidity\n// Optimized struct packing\nstruct OptimizedShipment {\n    address shipper;        // 20 bytes\n    address carrier;        // 20 bytes  \n    address consignee;      // 20 bytes\n    uint64 createdAt;       // 8 bytes\n    uint64 updatedAt;       // 8 bytes\n    uint32 status;          // 4 bytes\n    bytes32 documentHash;   // 32 bytes\n}\n```\n\n## 6.2 Database Schema Design\n\n### 6.2.1 MongoDB Document Structure\n\nThe database design follows a document-oriented approach optimized for maritime trade operations, with each collection representing a core business entity:\n\n**Shipments Collection:**\n\n```json\n{\n  \"_id\": \"ObjectId\",\n  \"shipmentId\": \"SHIP_2024_001234\",\n  \"blockchainTxHash\": \"0x1234567890abcdef\",\n  \"contractAddress\": \"0xabcdef1234567890\",\n  \"shipper\": {\n    \"companyId\": \"SHIPPER_001\",\n    \"name\": \"Global Shipping Corp\",\n    \"address\": {\n      \"street\": \"123 Port Avenue\",\n      \"city\": \"Singapore\",\n      \"country\": \"Singapore\",\n      \"postalCode\": \"018956\"\n    },\n    \"contact\": {\n      \"email\": \"operations@globalship.com\",\n      \"phone\": \"+65-6123-4567\"\n    }\n  },\n  \"carrier\": {\n    \"companyId\": \"CARRIER_001\",\n    \"name\": \"Maritime Transport Ltd\",\n    \"vesselIMO\": \"IMO1234567\",\n    \"vesselName\": \"MV Ocean Pioneer\"\n  },\n  \"consignee\": {\n    \"companyId\": \"CONSIGNEE_001\",\n    \"name\": \"European Imports Inc\",\n    \"deliveryAddress\": {\n      \"street\": \"456 Harbor Road\",\n      \"city\": \"Rotterdam\",\n      \"country\": \"Netherlands\",\n      \"postalCode\": \"3011 AD\"\n    }\n  },\n  \"cargo\": {\n    \"description\": \"Electronics Components\",\n    \"hsCode\": \"8542.31.0000\",\n    \"weight\": {\n      \"value\": 15000,\n      \"unit\": \"kg\"\n    },\n    \"volume\": {\n      \"value\": 45,\n      \"unit\": \"cbm\"\n    },\n    \"containerNumbers\": [\"TCLU1234567\", \"TCLU1234568\"],\n    \"hazardousGoods\": false\n  },\n  \"route\": {\n    \"portOfLoading\": {\n      \"code\": \"SGSIN\",\n      \"name\": \"Port of Singapore\",\n      \"country\": \"Singapore\"\n    },\n    \"portOfDischarge\": {\n      \"code\": \"NLRTM\",\n      \"name\": \"Port of Rotterdam\",\n      \"country\": \"Netherlands\"\n    },\n    \"transitPorts\": [\n      {\n        \"code\": \"AEJEA\",\n        \"name\": \"Jebel Ali\",\n        \"country\": \"UAE\",\n        \"estimatedArrival\": \"2024-11-15T08:00:00Z\"\n      }\n    ]\n  },\n  \"status\": {\n    \"current\": \"IN_TRANSIT\",\n    \"lastUpdated\": \"2024-11-04T14:30:00Z\",\n    \"history\": [\n      {\n        \"status\": \"CREATED\",\n        \"timestamp\": \"2024-11-01T09:00:00Z\",\n        \"location\": \"Singapore\",\n        \"updatedBy\": \"system\"\n      },\n      {\n        \"status\": \"DOCUMENTS_GENERATED\",\n        \"timestamp\": \"2024-11-01T15:30:00Z\",\n        \"location\": \"Singapore\",\n        \"updatedBy\": \"carrier_001\"\n      }\n    ]\n  },\n  \"documents\": {\n    \"billOfLading\": {\n      \"documentId\": \"BL_2024_001234\",\n      \"ipfsHash\": \"QmX1Y2Z3...\",\n      \"blockchainHash\": \"0xdef456...\",\n      \"status\": \"SIGNED\",\n      \"signatures\": [\n        {\n          \"party\": \"shipper\",\n          \"address\": \"0x123...\",\n          \"timestamp\": \"2024-11-01T16:00:00Z\",\n          \"txHash\": \"0x789...\"\n        }\n      ]\n    },\n    \"commercialInvoice\": {\n      \"documentId\": \"INV_2024_001234\",\n      \"ipfsHash\": \"QmA1B2C3...\",\n      \"amount\": {\n        \"value\": 125000,\n        \"currency\": \"USD\"\n      }\n    }\n  },\n  \"tracking\": {\n    \"currentLocation\": {\n      \"latitude\": 25.2048,\n      \"longitude\": 55.2708,\n      \"timestamp\": \"2024-11-04T14:30:00Z\",\n      \"source\": \"AIS\"\n    },\n    \"events\": [\n      {\n        \"eventType\": \"CONTAINER_LOADED\",\n        \"timestamp\": \"2024-11-02T10:00:00Z\",\n        \"location\": \"SGSIN\",\n        \"description\": \"Container TCLU1234567 loaded onto vessel\"\n      }\n    ]\n  },\n  \"finance\": {\n    \"paymentTerms\": \"LC_AT_SIGHT\",\n    \"totalAmount\": {\n      \"value\": 125000,\n      \"currency\": \"USD\"\n    },\n    \"letterOfCredit\": {\n      \"lcNumber\": \"LC2024001234\",\n      \"issuingBank\": \"Standard Chartered Bank\",\n      \"expiryDate\": \"2024-12-01T23:59:59Z\"\n    },\n    \"paymentStatus\": \"PENDING\"\n  },\n  \"compliance\": {\n    \"customsDeclarations\": [\n      {\n        \"country\": \"Singapore\",\n        \"declarationNumber\": \"SG2024001234\",\n        \"status\": \"CLEARED\",\n        \"clearedAt\": \"2024-11-02T08:00:00Z\"\n      }\n    ],\n    \"certificates\": [\n      {\n        \"type\": \"CERTIFICATE_OF_ORIGIN\",\n        \"issuingAuthority\": \"Singapore Chamber of Commerce\",\n        \"certificateNumber\": \"COO2024001234\",\n        \"ipfsHash\": \"QmD1E2F3...\"\n      }\n    ]\n  },\n  \"createdAt\": \"2024-11-01T09:00:00Z\",\n  \"updatedAt\": \"2024-11-04T14:30:00Z\",\n  \"version\": 1\n}\n```\n\n### 6.2.2 Indexing Strategy\n\nTo optimize query performance for maritime trade operations, the following indexes are implemented:\n\n| Collection | Index Type | Fields | Purpose |\n|------------|------------|--------|---------|\n| **shipments** | Compound | `{shipmentId: 1, status.current: 1}` | Fast shipment lookup and status filtering |\n| **shipments** | Geospatial | `{tracking.currentLocation: \"2dsphere\"}` | Location-based queries |\n| **shipments** | Text | `{cargo.description: \"text\", shipper.name: \"text\"}` | Full-text search capabilities |\n| **shipments** | TTL | `{updatedAt: 1}` | Automatic archival of old records |\n| **documents** | Compound | `{shipmentId: 1, documentType: 1, status: 1}` | Document management queries |\n| **tracking_events** | Compound | `{shipmentId: 1, timestamp: -1}` | Chronological event retrieval |\n\n### 6.2.3 Data Partitioning Strategy\n\nFor scalability, the database implements horizontal partitioning based on temporal and geographical factors:\n\n```mermaid\ngraph TB\n    subgraph \"Shipments Collection Sharding\"\n        A[Shard Key: shipmentId + createdAt] --> B[Shard 1: 2024-Q1]\n        A --> C[Shard 2: 2024-Q2]\n        A --> D[Shard 3: 2024-Q3]\n        A --> E[Shard 4: 2024-Q4]\n    end\n    \n    subgraph \"Tracking Events Sharding\"\n        F[Shard Key: shipmentId + timestamp] --> G[Hot Data: Last 30 days]\n        F --> H[Warm Data: 30-90 days]\n        F --> I[Cold Data: >90 days]\n    end\n    \n    subgraph \"Regional Distribution\"\n        J[Asia-Pacific] --> K[Singapore Cluster]\n        L[Europe] --> M[Amsterdam Cluster]\n        N[Americas] --> O[New York Cluster]\n    end\n```\n\n### 6.2.4 Data Consistency and Integrity\n\nThe system maintains data consistency through multiple mechanisms:\n\n**Blockchain Anchoring:**\n- Critical state changes are anchored on BlockDAG blockchain\n- Document hashes stored both on-chain and in MongoDB\n- Periodic reconciliation between blockchain and database states\n\n**Referential Integrity:**\n```javascript\n// MongoDB Schema Validation\ndb.createCollection(\"shipments\", {\n  validator: {\n    $jsonSchema: {\n      bsonType: \"object\",\n      required: [\"shipmentId\", \"shipper\", \"carrier\", \"consignee\"],\n      properties: {\n        shipmentId: {\n          bsonType: \"string\",\n          pattern: \"^SHIP_[0-9]{4}_[0-9]{6}$\"\n        },\n        status: {\n          bsonType: \"object\",\n          required: [\"current\", \"lastUpdated\"],\n          properties: {\n            current: {\n              enum: [\"CREATED\", \"DOCUMENTS_GENERATED\", \"IN_TRANSIT\", \n                     \"ARRIVED_AT_PORT\", \"CUSTOMS_CLEARED\", \"DELIVERED\", \"COMPLETED\"]\n            }\n          }\n        }\n      }\n    }\n  }\n})\n```\n\n## 6.3 API Design Specifications\n\n### 6.3.1 RESTful API Architecture\n\nThe ShipLedger API follows RESTful principles with resource-based URLs and standard HTTP methods. BlockDAG also supports popular Ethereum development tools, such as Truffle, Remix, MetaMask, and Hardhat, simplifying the development and deployment processes.\n\n**Base API Structure:**\n\n| Resource | HTTP Method | Endpoint | Description |\n|----------|-------------|----------|-------------|\n| **Shipments** | GET | `/api/v1/shipments` | List shipments with filtering |\n| **Shipments** | POST | `/api/v1/shipments` | Create new shipment |\n| **Shipments** | GET | `/api/v1/shipments/{id}` | Get specific shipment |\n| **Shipments** | PUT | `/api/v1/shipments/{id}` | Update shipment |\n| **Documents** | POST | `/api/v1/shipments/{id}/documents` | Create document |\n| **Documents** | GET | `/api/v1/documents/{id}` | Retrieve document |\n| **Tracking** | GET | `/api/v1/shipments/{id}/tracking` | Get tracking information |\n| **Tracking** | POST | `/api/v1/shipments/{id}/tracking/events` | Add tracking event |\n\n### 6.3.2 API Request/Response Specifications\n\n**Create Shipment Request:**\n\n```json\n{\n  \"method\": \"POST\",\n  \"endpoint\": \"/api/v1/shipments\",\n  \"headers\": {\n    \"Content-Type\": \"application/json\",\n    \"Authorization\": \"Bearer {jwt_token}\",\n    \"X-API-Version\": \"1.0\"\n  },\n  \"body\": {\n    \"shipper\": {\n      \"companyId\": \"SHIPPER_001\",\n      \"contactPerson\": \"John Smith\",\n      \"email\": \"john.smith@globalship.com\"\n    },\n    \"carrier\": {\n      \"companyId\": \"CARRIER_001\",\n      \"vesselIMO\": \"IMO1234567\"\n    },\n    \"consignee\": {\n      \"companyId\": \"CONSIGNEE_001\",\n      \"deliveryAddress\": {\n        \"street\": \"456 Harbor Road\",\n        \"city\": \"Rotterdam\",\n        \"country\": \"Netherlands\",\n        \"postalCode\": \"3011 AD\"\n      }\n    },\n    \"cargo\": {\n      \"description\": \"Electronics Components\",\n      \"hsCode\": \"8542.31.0000\",\n      \"weight\": {\"value\": 15000, \"unit\": \"kg\"},\n      \"containerNumbers\": [\"TCLU1234567\"]\n    },\n    \"route\": {\n      \"portOfLoading\": \"SGSIN\",\n      \"portOfDischarge\": \"NLRTM\",\n      \"estimatedDeparture\": \"2024-11-05T10:00:00Z\",\n      \"estimatedArrival\": \"2024-11-20T14:00:00Z\"\n    },\n    \"paymentTerms\": {\n      \"type\": \"LC_AT_SIGHT\",\n      \"amount\": {\"value\": 125000, \"currency\": \"USD\"}\n    }\n  }\n}\n```\n\n**Create Shipment Response:**\n\n```json\n{\n  \"status\": \"success\",\n  \"data\": {\n    \"shipmentId\": \"SHIP_2024_001234\",\n    \"blockchainTxHash\": \"0x1234567890abcdef\",\n    \"contractAddress\": \"0xabcdef1234567890\",\n    \"status\": \"CREATED\",\n    \"createdAt\": \"2024-11-04T15:30:00Z\",\n    \"estimatedCompletion\": \"2024-11-25T12:00:00Z\"\n  },\n  \"links\": {\n    \"self\": \"/api/v1/shipments/SHIP_2024_001234\",\n    \"tracking\": \"/api/v1/shipments/SHIP_2024_001234/tracking\",\n    \"documents\": \"/api/v1/shipments/SHIP_2024_001234/documents\"\n  },\n  \"meta\": {\n    \"version\": \"1.0\",\n    \"timestamp\": \"2024-11-04T15:30:00Z\",\n    \"requestId\": \"req_abc123def456\"\n  }\n}\n```\n\n### 6.3.3 WebSocket Real-Time API\n\nFor real-time updates, the system provides WebSocket connections that deliver live tracking and status updates:\n\n**WebSocket Connection Establishment:**\n\n```javascript\n// Client-side WebSocket connection\nconst ws = new WebSocket('wss://api.shibledger.com/v1/ws');\n\nws.onopen = function(event) {\n  // Subscribe to shipment updates\n  ws.send(JSON.stringify({\n    action: 'subscribe',\n    resource: 'shipment',\n    shipmentId: 'SHIP_2024_001234',\n    events: ['status_change', 'location_update', 'document_signed']\n  }));\n};\n\nws.onmessage = function(event) {\n  const update = JSON.parse(event.data);\n  console.log('Received update:', update);\n};\n```\n\n**Real-Time Update Message Format:**\n\n```json\n{\n  \"type\": \"shipment_update\",\n  \"shipmentId\": \"SHIP_2024_001234\",\n  \"event\": \"location_update\",\n  \"timestamp\": \"2024-11-04T15:45:00Z\",\n  \"data\": {\n    \"location\": {\n      \"latitude\": 25.2048,\n      \"longitude\": 55.2708,\n      \"accuracy\": 10\n    },\n    \"vessel\": {\n      \"name\": \"MV Ocean Pioneer\",\n      \"speed\": 18.5,\n      \"heading\": 285\n    },\n    \"estimatedArrival\": \"2024-11-20T14:30:00Z\"\n  },\n  \"source\": \"AIS\",\n  \"confidence\": 0.95\n}\n```\n\n### 6.3.4 GraphQL API Implementation\n\nFor complex queries requiring multiple related resources, a GraphQL endpoint provides flexible data fetching:\n\n**GraphQL Schema Definition:**\n\n```graphql\ntype Shipment {\n  id: ID!\n  shipmentId: String!\n  status: ShipmentStatus!\n  shipper: Company!\n  carrier: Company!\n  consignee: Company!\n  cargo: Cargo!\n  route: Route!\n  documents: [Document!]!\n  tracking: TrackingInfo!\n  finance: FinanceInfo!\n  createdAt: DateTime!\n  updatedAt: DateTime!\n}\n\ntype TrackingInfo {\n  currentLocation: Location\n  events: [TrackingEvent!]!\n  estimatedArrival: DateTime\n}\n\ntype Query {\n  shipment(id: ID!): Shipment\n  shipments(\n    filter: ShipmentFilter\n    pagination: PaginationInput\n    sort: SortInput\n  ): ShipmentConnection!\n  \n  trackingEvents(\n    shipmentId: ID!\n    dateRange: DateRangeInput\n  ): [TrackingEvent!]!\n}\n\ntype Mutation {\n  createShipment(input: CreateShipmentInput!): ShipmentPayload!\n  updateShipmentStatus(\n    shipmentId: ID!\n    status: ShipmentStatus!\n  ): ShipmentPayload!\n  \n  signDocument(\n    documentId: ID!\n    signature: String!\n  ): DocumentPayload!\n}\n\ntype Subscription {\n  shipmentUpdates(shipmentId: ID!): ShipmentUpdate!\n  trackingUpdates(shipmentIds: [ID!]!): TrackingUpdate!\n}\n```\n\n### 6.3.5 API Security and Authentication\n\nThe API implements multiple layers of security to protect maritime trade data:\n\n**JWT Token Structure:**\n\n```json\n{\n  \"header\": {\n    \"alg\": \"RS256\",\n    \"typ\": \"JWT\",\n    \"kid\": \"shibledger-key-1\"\n  },\n  \"payload\": {\n    \"sub\": \"user_12345\",\n    \"iss\": \"https://auth.shibledger.com\",\n    \"aud\": \"https://api.shibledger.com\",\n    \"exp\": 1699200000,\n    \"iat\": 1699113600,\n    \"scope\": \"shipments:read shipments:write documents:sign\",\n    \"company_id\": \"SHIPPER_001\",\n    \"role\": \"operations_manager\",\n    \"permissions\": [\n      \"create_shipment\",\n      \"view_own_shipments\",\n      \"sign_documents\"\n    ]\n  }\n}\n```\n\n**API Rate Limiting:**\n\n| User Tier | Requests/Minute | Burst Limit | WebSocket Connections |\n|-----------|-----------------|-------------|----------------------|\n| **Free** | 100 | 200 | 5 |\n| **Professional** | 1,000 | 2,000 | 25 |\n| **Enterprise** | 10,000 | 20,000 | 100 |\n| **Partner** | Unlimited | Unlimited | Unlimited |\n\n### 6.3.6 Error Handling and Status Codes\n\nThe API follows standard HTTP status codes with detailed error responses:\n\n**Error Response Format:**\n\n```json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Invalid shipment data provided\",\n    \"details\": [\n      {\n        \"field\": \"cargo.weight.value\",\n        \"message\": \"Weight must be a positive number\",\n        \"code\": \"INVALID_VALUE\"\n      },\n      {\n        \"field\": \"route.portOfLoading\",\n        \"message\": \"Port code INVALID is not recognized\",\n        \"code\": \"INVALID_PORT_CODE\"\n      }\n    ],\n    \"timestamp\": \"2024-11-04T15:30:00Z\",\n    \"requestId\": \"req_abc123def456\",\n    \"documentation\": \"https://docs.shibledger.com/api/errors#validation-error\"\n  }\n}\n```\n\n**Standard Status Codes:**\n\n| Status Code | Description | Use Case |\n|-------------|-------------|----------|\n| **200** | OK | Successful GET, PUT requests |\n| **201** | Created | Successful POST requests |\n| **202** | Accepted | Asynchronous operations initiated |\n| **400** | Bad Request | Invalid request data |\n| **401** | Unauthorized | Missing or invalid authentication |\n| **403** | Forbidden | Insufficient permissions |\n| **404** | Not Found | Resource doesn't exist |\n| **409** | Conflict | Resource state conflict |\n| **422** | Unprocessable Entity | Valid JSON but business logic errors |\n| **429** | Too Many Requests | Rate limit exceeded |\n| **500** | Internal Server Error | Unexpected server errors |\n\n## 6.4 User Interface Components\n\n### 6.4.1 Component Architecture Overview\n\nThe ShipLedger user interface follows a component-based architecture using React 19.0+ with TypeScript, implementing a design system that ensures consistency across all maritime trade workflows.\n\n```mermaid\ngraph TB\n    subgraph \"UI Component Hierarchy\"\n        A[App Shell] --> B[Navigation Header]\n        A --> C[Main Content Area]\n        A --> D[Notification Center]\n        \n        C --> E[Dashboard Components]\n        C --> F[Shipment Components]\n        C --> G[Document Components]\n        C --> H[Tracking Components]\n        \n        E --> E1[KPI Cards]\n        E --> E2[Activity Feed]\n        E --> E3[Quick Actions]\n        \n        F --> F1[Shipment List]\n        F --> F2[Shipment Details]\n        F --> F3[Create Shipment Form]\n        \n        G --> G1[Document Viewer]\n        G --> G2[Signature Panel]\n        G --> G3[Document History]\n        \n        H --> H1[Map Component]\n        H --> H2[Timeline View]\n        H --> H3[Event Log]\n    end\n    \n    style A fill:#e1f5fe\n    style E fill:#f3e5f5\n    style F fill:#e8f5e8\n    style G fill:#fff3e0\n    style H fill:#fce4ec\n```\n\n### 6.4.2 Core UI Components Specification\n\n**Dashboard Component:**\n\n```typescript\ninterface DashboardProps {\n  userId: string;\n  companyId: string;\n  timeRange: DateRange;\n  refreshInterval?: number;\n}\n\ninterface DashboardState {\n  shipments: ShipmentSummary[];\n  kpis: KPIMetrics;\n  recentActivity: ActivityItem[];\n  loading: boolean;\n  error?: string;\n}\n\nconst Dashboard: React.FC<DashboardProps> = ({\n  userId,\n  companyId,\n  timeRange,\n  refreshInterval = 30000\n}) => {\n  const [state, setState] = useState<DashboardState>({\n    shipments: [],\n    kpis: {},\n    recentActivity: [],\n    loading: true\n  });\n\n  // Real-time data subscription\n  useEffect(() => {\n    const ws = new WebSocket(`wss://api.shibledger.com/v1/ws`);\n    ws.onmessage = (event) => {\n      const update = JSON.parse(event.data);\n      handleRealTimeUpdate(update);\n    };\n    \n    return () => ws.close();\n  }, []);\n\n  return (\n    <div className=\"dashboard-container\">\n      <KPISection metrics={state.kpis} />\n      <ShipmentOverview shipments={state.shipments} />\n      <ActivityFeed activities={state.recentActivity} />\n    </div>\n  );\n};\n```\n\n**Shipment Management Components:**\n\n| Component Name | Purpose | Key Features | Props Interface |\n|----------------|---------|--------------|-----------------|\n| **ShipmentList** | Display shipments with filtering | Pagination, sorting, real-time updates | `{shipments, filters, onSelect}` |\n| **ShipmentCard** | Individual shipment summary | Status indicators, quick actions | `{shipment, onClick, actions}` |\n| **CreateShipmentWizard** | Multi-step shipment creation | Form validation, progress tracking | `{onComplete, initialData}` |\n| **ShipmentDetails** | Comprehensive shipment view | Tabbed interface, document access | `{shipmentId, activeTab}` |\n\n### 6.4.3 Document Management Interface\n\nThe document management interface provides secure access to maritime trade documents with blockchain verification:\n\n**Document Viewer Component:**\n\n```typescript\ninterface DocumentViewerProps {\n  documentId: string;\n  documentType: DocumentType;\n  accessLevel: AccessLevel;\n  onSign?: (signature: string) => void;\n  onDownload?: () => void;\n}\n\nconst DocumentViewer: React.FC<DocumentViewerProps> = ({\n  documentId,\n  documentType,\n  accessLevel,\n  onSign,\n  onDownload\n}) => {\n  const [document, setDocument] = useState<Document | null>(null);\n  const [signatures, setSignatures] = useState<Signature[]>([]);\n  const [verificationStatus, setVerificationStatus] = useState<VerificationStatus>('pending');\n\n  // Blockchain verification\n  useEffect(() => {\n    verifyDocumentOnBlockchain(documentId)\n      .then(status => setVerificationStatus(status))\n      .catch(error => console.error('Verification failed:', error));\n  }, [documentId]);\n\n  return (\n    <div className=\"document-viewer\">\n      <DocumentHeader \n        document={document}\n        verificationStatus={verificationStatus}\n      />\n      \n      <DocumentContent \n        content={document?.content}\n        type={documentType}\n      />\n      \n      <SignaturePanel\n        signatures={signatures}\n        canSign={accessLevel === 'write' && onSign}\n        onSign={onSign}\n      />\n      \n      <DocumentActions\n        canDownload={accessLevel !== 'none'}\n        onDownload={onDownload}\n      />\n    </div>\n  );\n};\n```\n\n### 6.4.4 Real-Time Tracking Interface\n\nThe tracking interface provides live updates on shipment location and status using interactive maps and timeline views:\n\n**Map Component with Real-Time Updates:**\n\n```typescript\ninterface TrackingMapProps {\n  shipmentId: string;\n  showRoute?: boolean;\n  showPorts?: boolean;\n  autoCenter?: boolean;\n}\n\nconst TrackingMap: React.FC<TrackingMapProps> = ({\n  shipmentId,\n  showRoute = true,\n  showPorts = true,\n  autoCenter = true\n}) => {\n  const [currentLocation, setCurrentLocation] = useState<Location | null>(null);\n  const [route, setRoute] = useState<RoutePoint[]>([]);\n  const [events, setEvents] = useState<TrackingEvent[]>([]);\n\n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    const ws = new WebSocket(`wss://api.shibledger.com/v1/tracking/${shipmentId}`);\n    \n    ws.onmessage = (event) => {\n      const update = JSON.parse(event.data);\n      \n      if (update.type === 'location_update') {\n        setCurrentLocation(update.location);\n      } else if (update.type === 'tracking_event') {\n        setEvents(prev => [update.event, ...prev]);\n      }\n    };\n\n    return () => ws.close();\n  }, [shipmentId]);\n\n  return (\n    <div className=\"tracking-map-container\">\n      <MapView\n        center={currentLocation}\n        zoom={autoCenter ? 'auto' : 8}\n        markers={[\n          {\n            position: currentLocation,\n            type: 'vessel',\n            popup: <VesselPopup location={currentLocation} />\n          }\n        ]}\n        polylines={showRoute ? [{ points: route, color: '#2196f3' }] : []}\n      />\n      \n      <MapControls\n        onZoomToFit={() => fitMapToRoute(route)}\n        onToggleRoute={() => setShowRoute(!showRoute)}\n        onTogglePorts={() => setShowPorts(!showPorts)}\n      />\n      \n      <EventTimeline\n        events={events}\n        onEventClick={(event) => centerMapOnEvent(event)}\n      />\n    </div>\n  );\n};\n```\n\n### 6.4.5 Responsive Design System\n\nThe UI components implement a responsive design system that adapts to different screen sizes and devices:\n\n**Breakpoint System:**\n\n| Breakpoint | Screen Size | Layout Adjustments |\n|------------|-------------|-------------------|\n| **Mobile** | < 768px | Single column, collapsible navigation, touch-optimized controls |\n| **Tablet** | 768px - 1024px | Two-column layout, sidebar navigation, hybrid touch/mouse |\n| **Desktop** | 1024px - 1440px | Multi-column layout, full navigation, mouse-optimized |\n| **Large Desktop** | > 1440px | Wide layout, additional panels, enhanced data density |\n\n**CSS Grid Layout Implementation:**\n\n```css\n.dashboard-grid {\n  display: grid;\n  gap: 1.5rem;\n  padding: 1rem;\n}\n\n/* Mobile Layout */\n@media (max-width: 767px) {\n  .dashboard-grid {\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"kpis\"\n      \"shipments\"\n      \"activity\";\n  }\n}\n\n/* Tablet Layout */\n@media (min-width: 768px) and (max-width: 1023px) {\n  .dashboard-grid {\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      \"kpis kpis\"\n      \"shipments activity\";\n  }\n}\n\n/* Desktop Layout */\n@media (min-width: 1024px) {\n  .dashboard-grid {\n    grid-template-columns: 2fr 1fr;\n    grid-template-areas:\n      \"kpis activity\"\n      \"shipments activity\";\n  }\n}\n```\n\n### 6.4.6 Accessibility and Internationalization\n\nThe UI components implement comprehensive accessibility features and multi-language support:\n\n**Accessibility Features:**\n\n| Feature | Implementation | WCAG Compliance |\n|---------|----------------|-----------------|\n| **Keyboard Navigation** | Tab order, focus management, keyboard shortcuts | AA |\n| **Screen Reader Support** | ARIA labels, semantic HTML, live regions | AA |\n| **Color Contrast** | 4.5:1 minimum ratio, color-blind friendly palette | AA |\n| **Text Scaling** | Responsive typography, up to 200% zoom support | AA |\n\n**Internationalization Support:**\n\n```typescript\ninterface LocalizationProps {\n  locale: string;\n  messages: Record<string, string>;\n  dateFormat: string;\n  numberFormat: Intl.NumberFormatOptions;\n}\n\nconst useLocalization = (locale: string) => {\n  const [messages, setMessages] = useState<Record<string, string>>({});\n  \n  useEffect(() => {\n    import(`../locales/${locale}.json`)\n      .then(module => setMessages(module.default))\n      .catch(error => console.error(`Failed to load locale ${locale}:`, error));\n  }, [locale]);\n\n  const t = useCallback((key: string, params?: Record<string, any>) => {\n    let message = messages[key] || key;\n    \n    if (params) {\n      Object.entries(params).forEach(([param, value]) => {\n        message = message.replace(`{{${param}}}`, String(value));\n      });\n    }\n    \n    return message;\n  }, [messages]);\n\n  return { t, locale };\n};\n```\n\n**Supported Languages:**\n\n| Language | Code | Coverage | Regional Variants |\n|----------|------|----------|-------------------|\n| **English** | en | 100% | US, UK, AU |\n| **Chinese** | zh | 95% | Simplified, Traditional |\n| **Spanish** | es | 90% | ES, MX, AR |\n| **French** | fr | 85% | FR, CA |\n| **German** | de | 85% | DE, AT, CH |\n| **Japanese** | ja | 80% | JP |\n| **Korean** | ko | 75% | KR |\n| **Arabic** | ar | 70% | SA, AE, EG |\n\nThe comprehensive system components design ensures that ShipLedger provides a robust, scalable, and user-friendly platform for maritime trade operations, leveraging BlockDAG's full alignment with the Ethereum Virtual Machine (EVM), which lets developers use common Ethereum tools and build smart contracts in Solidity. This ensures existing dApps can move to BlockDAG with minimal adjustments, while teams continue to work with familiar resources such as MetaMask, Truffle, or Hardhat.\n\n## 6.1 Core Services Architecture\n\n### 6.1.1 Service Components Overview\n\nShipLedger employs a comprehensive microservices architecture designed specifically for the complex operational flows of maritime trade and logistics. Choosing a microservice architecture over monolithic architectures proves to be more effective as each logistical operational process can be treated as an individual component. Companies with complex operational flows which include multiple logistics processes can use logistics microservices to easily build, manage and deploy changes.\n\nThe platform leverages BlockDAG's full Ethereum Virtual Machine (EVM) compatibility which effectively builds a high-speed bridge to Ethereum's massive $500 billion economy. This compatibility ensures existing dApps can move to BlockDAG with minimal adjustments, while BlockDAG offers a multi-lane superhighway compared to Ethereum's congestion.\n\n### 6.1.2 Service Boundaries and Responsibilities\n\n| Service Name | Primary Domain | Core Responsibilities | Business Justification |\n|--------------|----------------|----------------------|------------------------|\n| **Blockchain Service** | Smart Contract Management | Contract deployment, transaction processing, event monitoring | BlockDAG is fully Ethereum Virtual Machine (EVM) compatible, allowing for seamless integration and deployment of Ethereum-based smart contracts with developers familiar with Ethereum's toolset |\n| **Document Management Service** | Digital Documentation | eBL creation, document verification, access control | Handles the digitization of Bills of Lading and shipping instructions with blockchain anchoring |\n| **Tracking Service** | Real-Time Monitoring | Container tracking, event processing, location updates | Supports over 120 planned, estimated, and actual events per shipment for comprehensive visibility |\n| **Trade Finance Service** | Payment Processing | Smart contract payments, letter of credit automation, multi-currency support | Automates trade finance workflows reducing payment settlement times |\n\n### 6.1.3 Inter-Service Communication Patterns\n\nThe event bus facilitates asynchronous communication between services. Services publish events to the event bus, which are then picked up by services that need to respond. The event bus decouples services, allowing each to operate independently and handle only relevant events.\n\n```mermaid\ngraph TB\n    subgraph \"Communication Patterns\"\n        A[Synchronous REST APIs] --> B[Client-Facing Operations]\n        C[Asynchronous Events] --> D[Inter-Service Communication]\n        E[Message Queues] --> F[Background Processing]\n        G[WebSocket Streams] --> H[Real-Time Updates]\n    end\n    \n    subgraph \"Event-Driven Architecture\"\n        I[Blockchain Events] --> J[Smart Contract State Changes]\n        K[Business Events] --> L[Document Status Updates]\n        M[System Events] --> N[Tracking Location Changes]\n    end\n    \n    subgraph \"Service Mesh\"\n        O[API Gateway] --> P[Load Balancing]\n        Q[Service Discovery] --> R[Health Monitoring]\n        S[Circuit Breakers] --> T[Fault Tolerance]\n    end\n    \n    A --> O\n    C --> I\n    E --> K\n    G --> M\n```\n\n### 6.1.4 Service Discovery Mechanisms\n\nThe platform implements a hybrid service discovery approach combining DNS-based discovery with service mesh capabilities:\n\n| Discovery Method | Implementation | Use Case | Benefits |\n|------------------|----------------|----------|----------|\n| **DNS-Based Discovery** | Kubernetes DNS | Internal service resolution | Simple, reliable, built-in Kubernetes support |\n| **Service Registry** | Consul/Eureka | Dynamic service registration | Health checking, metadata storage |\n| **Service Mesh** | Istio/Linkerd | Advanced traffic management | Load balancing, security, observability |\n| **API Gateway** | Kong/Ambassador | External client routing | Rate limiting, authentication, monitoring |\n\n### 6.1.5 Load Balancing Strategy\n\nUsing microservices increases scalability and decreases downtime. Companies are able to scale and monitor each microservice individually. This means that scalability can be achieved faster as you do not have to scale the application as a whole but just the individual microservice.\n\n```mermaid\ngraph TB\n    subgraph \"Load Balancing Layers\"\n        A[Global Load Balancer] --> B[Regional Distribution]\n        B --> C[Service-Level Balancing]\n        C --> D[Instance-Level Routing]\n    end\n    \n    subgraph \"Balancing Algorithms\"\n        E[Round Robin] --> F[Standard Distribution]\n        G[Weighted Round Robin] --> H[Capacity-Based Routing]\n        I[Least Connections] --> J[Performance Optimization]\n        K[Geographic Routing] --> L[Latency Minimization]\n    end\n    \n    subgraph \"Health Monitoring\"\n        M[Health Checks] --> N[Service Availability]\n        O[Performance Metrics] --> P[Response Time Monitoring]\n        Q[Circuit Breaker Status] --> R[Fault Detection]\n    end\n    \n    A --> E\n    C --> M\n    D --> O\n```\n\n### 6.1.6 Circuit Breaker Patterns\n\nA Circuit Breaker monitors the success and failure rates of requests to a service and switches between three states: Closed Circuit, Open Circuit, and Half-Open Circuit. The Circuit Breaker pattern addresses challenges by isolating faulty services to prevent cascading failures, ensuring other services remain operational.\n\n| Circuit Breaker State | Behavior | Trigger Conditions | Recovery Mechanism |\n|----------------------|----------|-------------------|-------------------|\n| **Closed** | Normal operation, all requests pass through | Service operating normally | Continuous monitoring of failure rates |\n| **Open** | Requests blocked, immediate failure response | Failures exceed predefined threshold, avoiding further strain on failing service | Timeout period before transitioning to half-open |\n| **Half-Open** | Limited test requests allowed to check if service has recovered | Timeout period expires | Success returns to closed, failure returns to open |\n\n### 6.1.7 Retry and Fallback Mechanisms\n\nMicroservices architecture enhances resilience and reliability by designing services to be independent and isolated. This means that a failure in one service does not directly affect other services, allowing the application to continue functioning even if one or more services fail.\n\n```mermaid\nflowchart TD\n    A[Service Request] --> B{Primary Service Available?}\n    B -->|Yes| C[Execute Request]\n    B -->|No| D[Circuit Breaker Open?]\n    \n    D -->|Yes| E[Return Cached Response]\n    D -->|No| F[Retry with Exponential Backoff]\n    \n    F --> G{Retry Successful?}\n    G -->|Yes| H[Update Circuit Breaker]\n    G -->|No| I{Max Retries Reached?}\n    \n    I -->|No| J[Wait and Retry]\n    I -->|Yes| K[Activate Fallback]\n    \n    K --> L[Secondary Service]\n    L --> M{Secondary Available?}\n    M -->|Yes| N[Execute on Secondary]\n    M -->|No| O[Return Default Response]\n    \n    C --> P[Success Response]\n    E --> Q[Cached Response]\n    H --> P\n    N --> P\n    O --> R[Degraded Response]\n    J --> F\n```\n\n### 6.1.8 Scalability Design\n\n### 6.1.9 Horizontal and Vertical Scaling Approach\n\nBlockDAG achieves a throughput of 10 blocks per second (10 TPS) for foundational operations, while supporting 2,000–15,000 TPS in high-load scenarios. This is achieved through a DAG layer that allows transactions to reference multiple predecessors for parallel validation, eliminating the bottlenecks of linear blockchains.\n\n| Scaling Dimension | Implementation Strategy | Trigger Conditions | Resource Allocation |\n|-------------------|------------------------|-------------------|-------------------|\n| **Horizontal Scaling** | Container orchestration with Kubernetes | CPU > 70%, Memory > 80%, Queue depth > 1000 | Auto-scaling groups with min/max replicas |\n| **Vertical Scaling** | Resource limit adjustments | Sustained high resource usage > 85% | CPU/Memory limit increases up to node capacity |\n| **Database Scaling** | Read replicas and sharding | Query response time > 2s, Connection pool > 80% | Geographic read replicas, horizontal sharding |\n| **Blockchain Scaling** | Superior speed (1400 TPS and higher) and much lower transaction fees | Transaction queue backlog, Gas price increases | Parallel transaction processing, batch operations |\n\n### 6.1.10 Auto-Scaling Triggers and Rules\n\nTechnology has moved toward event-driven microservices, where the \"event\" is any interaction with a system. This means that the system responds to events in real time, creating a more dynamic and seamless user experience with each microservice triggered automatically by events.\n\n```mermaid\ngraph TB\n    subgraph \"Scaling Triggers\"\n        A[CPU Utilization > 70%] --> B[Scale Out Decision]\n        C[Memory Usage > 80%] --> B\n        D[Request Queue > 1000] --> B\n        E[Response Time > 2s] --> B\n    end\n    \n    subgraph \"Scaling Actions\"\n        B --> F[Horizontal Pod Autoscaler]\n        F --> G[Add New Instances]\n        G --> H[Load Balancer Update]\n        H --> I[Health Check Validation]\n    end\n    \n    subgraph \"Scale Down Triggers\"\n        J[CPU < 30% for 10min] --> K[Scale In Decision]\n        L[Low Request Volume] --> K\n        K --> M[Graceful Shutdown]\n        M --> N[Connection Draining]\n    end\n    \n    subgraph \"Resource Optimization\"\n        O[Resource Monitoring] --> P[Usage Analytics]\n        P --> Q[Capacity Planning]\n        Q --> R[Cost Optimization]\n    end\n    \n    I --> O\n    N --> O\n```\n\n### 6.1.11 Performance Optimization Techniques\n\n| Optimization Category | Technique | Implementation | Expected Improvement |\n|----------------------|-----------|----------------|---------------------|\n| **Database Performance** | Connection pooling, query optimization, indexing | MongoDB compound indexes, Redis caching | 60% reduction in query response time |\n| **Network Optimization** | HTTP/2, compression, CDN | Gzip compression, CloudFront CDN | 40% reduction in data transfer time |\n| **Application Performance** | Lazy loading, caching, async processing | Redis cache, background job queues | 50% improvement in API response time |\n| **Blockchain Optimization** | Gas optimization, batch transactions, parallel processing | Smart contract optimization, transaction batching | 70% reduction in transaction costs |\n\n### 6.1.12 Resilience Patterns\n\n### 6.1.13 Fault Tolerance Mechanisms\n\nThe circuit breaker pattern is primarily used to improve a system's resilience and fault tolerance. It helps avoid resource exhaustion by preventing repeated attempts to connect to a failing service. Thus, it fails fast rather than allowing prolonged delays.\n\n```mermaid\ngraph TB\n    subgraph \"Fault Detection\"\n        A[Health Checks] --> B[Service Monitoring]\n        C[Error Rate Monitoring] --> D[Threshold Analysis]\n        E[Response Time Tracking] --> F[Performance Degradation Detection]\n    end\n    \n    subgraph \"Fault Isolation\"\n        G[Circuit Breakers] --> H[Service Isolation]\n        I[Bulkhead Pattern] --> J[Resource Segregation]\n        K[Timeout Controls] --> L[Request Limiting]\n    end\n    \n    subgraph \"Fault Recovery\"\n        M[Retry Mechanisms] --> N[Exponential Backoff]\n        O[Fallback Responses] --> P[Graceful Degradation]\n        Q[Self-Healing] --> R[Automatic Recovery]\n    end\n    \n    B --> G\n    D --> I\n    F --> K\n    H --> M\n    J --> O\n    L --> Q\n```\n\n### 6.1.14 Disaster Recovery Procedures\n\n| Recovery Scenario | RTO (Recovery Time Objective) | RPO (Recovery Point Objective) | Recovery Strategy |\n|-------------------|-------------------------------|-------------------------------|-------------------|\n| **Single Service Failure** | < 5 minutes | < 1 minute | Automatic failover to healthy instances with circuit breaker activation |\n| **Database Corruption** | < 15 minutes | < 5 minutes | Failover to read replicas, promote to primary, restore from backup |\n| **Blockchain Network Issues** | < 30 minutes | 0 (immutable ledger) | Switch to backup BlockDAG nodes, queue transactions for replay |\n| **Complete Regional Outage** | < 2 hours | < 15 minutes | Geographic failover to secondary region with data replication |\n\n### 6.1.15 Data Redundancy Approach\n\nBlockDAG uses distributed, decentralized storage system for transaction history, DAG structure, and state databases ensuring data availability and consistency across the maritime trade platform.\n\n```mermaid\ngraph TB\n    subgraph \"Primary Data Layer\"\n        A[MongoDB Primary] --> B[Real-time Replication]\n        C[Redis Primary] --> D[Memory Replication]\n        E[BlockDAG Primary] --> F[Blockchain Consensus]\n    end\n    \n    subgraph \"Secondary Data Layer\"\n        B --> G[MongoDB Secondary]\n        D --> H[Redis Secondary]\n        F --> I[BlockDAG Network Nodes]\n    end\n    \n    subgraph \"Backup Strategy\"\n        J[Automated Backups] --> K[Point-in-Time Recovery]\n        L[Geographic Distribution] --> M[Cross-Region Replication]\n        N[Immutable Blockchain] --> O[Permanent Audit Trail]\n    end\n    \n    G --> J\n    H --> L\n    I --> N\n```\n\n### 6.1.16 Failover Configurations\n\n| Component | Primary Location | Secondary Location | Failover Trigger | Failover Time |\n|-----------|------------------|-------------------|------------------|---------------|\n| **API Gateway** | US-East-1 | EU-West-1 | Health check failure > 3 consecutive | < 30 seconds |\n| **Database Cluster** | Primary Region | Secondary Region | Primary unavailable > 60 seconds | < 2 minutes |\n| **Blockchain Nodes** | Multi-region | Global distribution | Node consensus failure | < 1 minute |\n| **Message Queues** | Active cluster | Standby cluster | Queue unavailable > 30 seconds | < 45 seconds |\n\n### 6.1.17 Service Degradation Policies\n\nConsider a logistics platform where order processing, shipment tracking, and inventory management are structured as services. If the shipment tracking service fails, a business can still place orders and manage their inventories, but they might be unable to track the real-time location of their shipments.\n\n```mermaid\nflowchart TD\n    A[Service Health Check] --> B{Service Status}\n    B -->|Healthy| C[Full Functionality]\n    B -->|Degraded| D[Reduced Functionality]\n    B -->|Failed| E[Fallback Mode]\n    \n    D --> F[Non-Critical Features Disabled]\n    F --> G[Core Features Maintained]\n    G --> H[User Notification]\n    \n    E --> I[Cached Data Only]\n    I --> J[Read-Only Operations]\n    J --> K[Maintenance Message]\n    \n    C --> L[Monitor Performance]\n    H --> L\n    K --> L\n    \n    L --> M{Performance Threshold}\n    M -->|Below Threshold| N[Trigger Degradation]\n    M -->|Above Threshold| O[Maintain Current State]\n    \n    N --> D\n    O --> A\n```\n\n### 6.1.18 Service Interaction Diagrams\n\n### 6.1.19 End-to-End Shipment Processing Flow\n\n```mermaid\nsequenceDiagram\n    participant Client as Web Client\n    participant Gateway as API Gateway\n    participant Auth as Auth Service\n    participant Doc as Document Service\n    participant BC as Blockchain Service\n    participant Track as Tracking Service\n    participant Finance as Trade Finance Service\n    participant Notify as Notification Service\n    \n    Client->>Gateway: Create Shipment Request\n    Gateway->>Auth: Validate JWT Token\n    Auth-->>Gateway: Token Valid\n    \n    Gateway->>Doc: Create Shipping Instructions\n    Doc->>BC: Deploy Smart Contract\n    BC-->>Doc: Contract Address\n    Doc->>Track: Initialize Tracking\n    Doc->>Finance: Setup Payment Terms\n    \n    BC->>Notify: Contract Deployed Event\n    Notify->>Client: Shipment Created Notification\n    \n    Track->>BC: Location Update Event\n    BC->>Doc: Update Document Status\n    BC->>Finance: Trigger Payment Condition\n    \n    Finance->>BC: Execute Payment\n    BC->>Notify: Payment Completed Event\n    Notify->>Client: Payment Confirmation\n```\n\n### 6.1.20 Circuit Breaker Implementation Flow\n\n```mermaid\nflowchart TD\n    A[Service Request] --> B{Circuit Breaker State}\n    \n    B -->|Closed| C[Forward Request]\n    B -->|Open| D[Return Fallback]\n    B -->|Half-Open| E[Test Request]\n    \n    C --> F{Request Success?}\n    F -->|Yes| G[Reset Failure Count]\n    F -->|No| H[Increment Failure Count]\n    \n    H --> I{Failure Threshold Exceeded?}\n    I -->|Yes| J[Open Circuit]\n    I -->|No| K[Continue Monitoring]\n    \n    E --> L{Test Success?}\n    L -->|Yes| M[Close Circuit]\n    L -->|No| N[Keep Circuit Open]\n    \n    D --> O[Log Circuit Open Event]\n    J --> P[Start Recovery Timer]\n    P --> Q[Wait for Timeout]\n    Q --> R[Transition to Half-Open]\n    \n    style J fill:#ff6b6b\n    style M fill:#51cf66\n    style D fill:#ffd43b\n```\n\n### 6.1.21 Auto-Scaling Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Monitoring Layer\"\n        A[Prometheus Metrics] --> B[Grafana Dashboards]\n        C[Custom Metrics] --> D[Alert Manager]\n        E[Health Checks] --> F[Service Discovery]\n    end\n    \n    subgraph \"Decision Engine\"\n        G[Horizontal Pod Autoscaler] --> H[Scaling Decisions]\n        I[Vertical Pod Autoscaler] --> J[Resource Adjustments]\n        K[Cluster Autoscaler] --> L[Node Management]\n    end\n    \n    subgraph \"Execution Layer\"\n        M[Kubernetes API] --> N[Pod Creation/Deletion]\n        O[Load Balancer] --> P[Traffic Distribution]\n        Q[Service Mesh] --> R[Traffic Management]\n    end\n    \n    B --> G\n    D --> I\n    F --> K\n    H --> M\n    J --> M\n    L --> M\n    N --> O\n    N --> Q\n```\n\n### 6.1.22 Resilience Pattern Integration\n\n```mermaid\ngraph TB\n    subgraph \"Request Flow\"\n        A[Client Request] --> B[API Gateway]\n        B --> C[Load Balancer]\n        C --> D[Service Instance]\n    end\n    \n    subgraph \"Resilience Patterns\"\n        E[Circuit Breaker] --> F[Fail Fast]\n        G[Retry Pattern] --> H[Exponential Backoff]\n        I[Timeout Pattern] --> J[Request Limiting]\n        K[Bulkhead Pattern] --> L[Resource Isolation]\n    end\n    \n    subgraph \"Fallback Mechanisms\"\n        M[Cached Response] --> N[Stale Data]\n        O[Default Response] --> P[Minimal Functionality]\n        Q[Alternative Service] --> R[Backup Processing]\n    end\n    \n    D --> E\n    E --> G\n    G --> I\n    I --> K\n    \n    F --> M\n    H --> O\n    J --> Q\n    L --> R\n```\n\nThe Core Services Architecture for ShipLedger provides a robust, scalable, and resilient foundation for maritime trade operations. By leveraging BlockDAG's superior speed (1400 TPS and higher) and much lower transaction fees, combined with full EVM compatibility that builds a high-speed bridge to Ethereum's massive $500 billion economy, the platform delivers enterprise-grade performance while maintaining the flexibility and reliability required for global shipping operations.\n\nThe microservices architecture ensures that developers focus on learning specific microservices rather than overall system architecture, leading to increased innovation and productivity while reducing errors, making the platform both maintainable and scalable for the complex requirements of international maritime trade.\n\n## 6.2 Database Design\n\n### 6.2.1 Schema Design Overview\n\nShipLedger employs a hybrid database architecture that combines distributed, decentralized storage system for transaction history, DAG structure, and state databases on the BlockDAG blockchain with MongoDB for operational data management. Based on MongoDB, one of the most popular NoSQL databases, the construction of NoSQL ship database was studied, including feasibility analysis, data models and geospatial indexes, etc, which provided a new solution for ship data management.\n\nThe database design follows a document-oriented approach optimized for maritime trade operations, where using MongoDB one can create a single document that is self-contained, easy to understand, and simply maps into an object oriented application. This approach is particularly beneficial for managing various entities such as vehicles, drivers, customers, shipments, and routes in the maritime logistics domain.\n\n### 6.2.2 Entity Relationships\n\nThe ShipLedger database schema is designed around core maritime business entities with the following primary relationships:\n\n```mermaid\nerDiagram\n    SHIPMENT ||--o{ DOCUMENT : contains\n    SHIPMENT ||--o{ TRACKING_EVENT : generates\n    SHIPMENT ||--|| TRADE_FINANCE : requires\n    SHIPMENT }o--|| SHIPPER : created_by\n    SHIPMENT }o--|| CARRIER : handled_by\n    SHIPMENT }o--|| CONSIGNEE : delivered_to\n    \n    DOCUMENT ||--o{ SIGNATURE : requires\n    DOCUMENT }o--|| BLOCKCHAIN_RECORD : anchored_to\n    \n    TRACKING_EVENT }o--|| CONTAINER : tracks\n    TRACKING_EVENT }o--|| VESSEL : monitors\n    \n    TRADE_FINANCE ||--o{ PAYMENT : processes\n    TRADE_FINANCE }o--|| LETTER_OF_CREDIT : uses\n    \n    BLOCKCHAIN_RECORD ||--|| SMART_CONTRACT : deployed_as\n    SMART_CONTRACT ||--o{ TRANSACTION : executes\n    \n    USER }o--|| COMPANY : belongs_to\n    COMPANY ||--o{ SHIPMENT : owns\n    \n    PORT ||--o{ TRACKING_EVENT : location_of\n    ROUTE }o--|| PORT : origin\n    ROUTE }o--|| PORT : destination\n    SHIPMENT }o--|| ROUTE : follows\n```\n\n### 6.2.3 Data Models and Structures\n\n#### 6.2.3.1 Core Collections Structure\n\n| Collection Name | Primary Purpose | Document Structure | Key Relationships |\n|----------------|-----------------|-------------------|-------------------|\n| **shipments** | Core shipment management | Embedded cargo, route, status | References to companies, documents |\n| **documents** | Digital document storage | Metadata with IPFS links | References to shipments, signatures |\n| **tracking_events** | Real-time event logging | Time-series location data | References to shipments, containers |\n| **companies** | Stakeholder management | Company profiles and contacts | Referenced by shipments, users |\n\n#### 6.2.3.2 Shipments Collection Schema\n\n```json\n{\n  \"_id\": \"ObjectId\",\n  \"shipmentId\": \"String (Unique Index)\",\n  \"blockchainTxHash\": \"String\",\n  \"contractAddress\": \"String\",\n  \"shipper\": {\n    \"companyId\": \"ObjectId (Reference)\",\n    \"name\": \"String\",\n    \"address\": {\n      \"street\": \"String\",\n      \"city\": \"String\", \n      \"country\": \"String\",\n      \"postalCode\": \"String\"\n    },\n    \"contact\": {\n      \"email\": \"String\",\n      \"phone\": \"String\"\n    }\n  },\n  \"carrier\": {\n    \"companyId\": \"ObjectId (Reference)\",\n    \"name\": \"String\",\n    \"vesselIMO\": \"String\",\n    \"vesselName\": \"String\"\n  },\n  \"consignee\": {\n    \"companyId\": \"ObjectId (Reference)\",\n    \"name\": \"String\",\n    \"deliveryAddress\": \"Object\"\n  },\n  \"cargo\": {\n    \"description\": \"String\",\n    \"hsCode\": \"String\",\n    \"weight\": {\n      \"value\": \"Number\",\n      \"unit\": \"String\"\n    },\n    \"volume\": {\n      \"value\": \"Number\", \n      \"unit\": \"String\"\n    },\n    \"containerNumbers\": [\"String\"],\n    \"hazardousGoods\": \"Boolean\"\n  },\n  \"route\": {\n    \"portOfLoading\": {\n      \"code\": \"String\",\n      \"name\": \"String\",\n      \"country\": \"String\"\n    },\n    \"portOfDischarge\": {\n      \"code\": \"String\", \n      \"name\": \"String\",\n      \"country\": \"String\"\n    },\n    \"transitPorts\": [\"Object\"]\n  },\n  \"status\": {\n    \"current\": \"String (Enum)\",\n    \"lastUpdated\": \"Date\",\n    \"history\": [\"Object\"]\n  },\n  \"documents\": {\n    \"billOfLading\": {\n      \"documentId\": \"String\",\n      \"ipfsHash\": \"String\",\n      \"blockchainHash\": \"String\",\n      \"status\": \"String\",\n      \"signatures\": [\"Object\"]\n    }\n  },\n  \"tracking\": {\n    \"currentLocation\": {\n      \"latitude\": \"Number\",\n      \"longitude\": \"Number\", \n      \"timestamp\": \"Date\",\n      \"source\": \"String\"\n    },\n    \"events\": [\"ObjectId (Reference)\"]\n  },\n  \"finance\": {\n    \"paymentTerms\": \"String\",\n    \"totalAmount\": {\n      \"value\": \"Number\",\n      \"currency\": \"String\"\n    },\n    \"letterOfCredit\": \"Object\",\n    \"paymentStatus\": \"String\"\n  },\n  \"compliance\": {\n    \"customsDeclarations\": [\"Object\"],\n    \"certificates\": [\"Object\"]\n  },\n  \"createdAt\": \"Date\",\n  \"updatedAt\": \"Date\",\n  \"version\": \"Number\"\n}\n```\n\n#### 6.2.3.3 Tracking Events Collection Schema\n\n```json\n{\n  \"_id\": \"ObjectId\",\n  \"shipmentId\": \"ObjectId (Reference)\",\n  \"eventType\": \"String (Enum)\",\n  \"timestamp\": \"Date\",\n  \"location\": {\n    \"type\": \"Point\",\n    \"coordinates\": [\"Number\", \"Number\"]\n  },\n  \"portCode\": \"String\",\n  \"vesselInfo\": {\n    \"imo\": \"String\",\n    \"name\": \"String\",\n    \"speed\": \"Number\",\n    \"heading\": \"Number\"\n  },\n  \"containerInfo\": {\n    \"containerNumber\": \"String\",\n    \"sealNumber\": \"String\",\n    \"temperature\": \"Number\"\n  },\n  \"description\": \"String\",\n  \"source\": \"String\",\n  \"confidence\": \"Number\",\n  \"metadata\": \"Object\",\n  \"blockchainTxHash\": \"String\"\n}\n```\n\n### 6.2.4 Indexing Strategy\n\nThe indexing strategy is designed to optimize query performance for maritime trade operations:\n\n#### 6.2.4.1 Primary Indexes\n\n| Collection | Index Type | Fields | Purpose | Performance Impact |\n|------------|------------|--------|---------|-------------------|\n| **shipments** | Compound | `{shipmentId: 1, status.current: 1}` | Fast shipment lookup and status filtering | 95% query optimization |\n| **shipments** | Geospatial | `{tracking.currentLocation: \"2dsphere\"}` | Location-based queries | Enables radius searches |\n| **shipments** | Text | `{cargo.description: \"text\", shipper.name: \"text\"}` | Full-text search | Search functionality |\n| **tracking_events** | Compound | `{shipmentId: 1, timestamp: -1}` | Chronological event retrieval | Time-series optimization |\n\n#### 6.2.4.2 Secondary Indexes\n\n```javascript\n// Shipments Collection Indexes\ndb.shipments.createIndex({\"shipmentId\": 1}, {unique: true})\ndb.shipments.createIndex({\"shipper.companyId\": 1, \"createdAt\": -1})\ndb.shipments.createIndex({\"carrier.companyId\": 1, \"status.current\": 1})\ndb.shipments.createIndex({\"route.portOfLoading.code\": 1, \"route.portOfDischarge.code\": 1})\ndb.shipments.createIndex({\"documents.billOfLading.status\": 1})\ndb.shipments.createIndex({\"finance.paymentStatus\": 1})\n\n// Tracking Events Collection Indexes  \ndb.tracking_events.createIndex({\"shipmentId\": 1, \"timestamp\": -1})\ndb.tracking_events.createIndex({\"location\": \"2dsphere\"})\ndb.tracking_events.createIndex({\"eventType\": 1, \"timestamp\": -1})\ndb.tracking_events.createIndex({\"vesselInfo.imo\": 1, \"timestamp\": -1})\n\n// TTL Index for automatic data archival\ndb.tracking_events.createIndex({\"timestamp\": 1}, {expireAfterSeconds: 7776000}) // 90 days\n```\n\n### 6.2.5 Partitioning Approach\n\n#### 6.2.5.1 Horizontal Sharding Strategy\n\nThe database implements horizontal partitioning to handle the scale of global maritime trade:\n\n```mermaid\ngraph TB\n    subgraph \"Sharding Strategy\"\n        A[Shard Key: shipmentId + createdAt] --> B[Shard 1: Q1 2024]\n        A --> C[Shard 2: Q2 2024] \n        A --> D[Shard 3: Q3 2024]\n        A --> E[Shard 4: Q4 2024]\n    end\n    \n    subgraph \"Geographic Distribution\"\n        F[Asia-Pacific Shard] --> G[Singapore Cluster]\n        H[Europe Shard] --> I[Amsterdam Cluster]\n        J[Americas Shard] --> K[New York Cluster]\n    end\n    \n    subgraph \"Data Temperature\"\n        L[Hot Data: 0-30 days] --> M[SSD Storage]\n        N[Warm Data: 30-90 days] --> O[Hybrid Storage]\n        P[Cold Data: >90 days] --> Q[Archive Storage]\n    end\n```\n\n#### 6.2.5.2 Partitioning Rules\n\n| Partition Type | Criteria | Implementation | Benefits |\n|----------------|----------|----------------|----------|\n| **Temporal** | Creation date (quarterly) | Range-based sharding | Efficient archival and query performance |\n| **Geographic** | Port regions | Hash-based on port codes | Reduced latency for regional queries |\n| **Operational** | Data access patterns | Hot/warm/cold classification | Cost optimization and performance |\n\n### 6.2.6 Replication Configuration\n\n#### 6.2.6.1 MongoDB Replica Set Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Primary Replica Set\"\n        A[Primary Node] --> B[Secondary Node 1]\n        A --> C[Secondary Node 2]\n        A --> D[Arbiter Node]\n    end\n    \n    subgraph \"Cross-Region Replication\"\n        E[Primary Region] --> F[Secondary Region]\n        F --> G[Disaster Recovery Region]\n    end\n    \n    subgraph \"Read Preference Strategy\"\n        H[Write Operations] --> I[Primary Only]\n        J[Read Operations] --> K[Secondary Preferred]\n        L[Analytics Queries] --> M[Secondary Only]\n    end\n    \n    A --> E\n    B --> F\n    C --> G\n```\n\n#### 6.2.6.2 Replication Settings\n\n| Configuration | Setting | Justification | Recovery Objective |\n|---------------|---------|---------------|-------------------|\n| **Write Concern** | `{w: \"majority\", j: true}` | Ensures data durability across majority of nodes | RPO < 1 minute |\n| **Read Preference** | `secondaryPreferred` | Distributes read load while maintaining consistency | Improved performance |\n| **Replica Set Size** | 3 data nodes + 1 arbiter | Optimal balance of availability and cost | 99.9% uptime |\n| **Oplog Size** | 10% of storage capacity | Sufficient for replication lag during maintenance | 24-hour recovery window |\n\n### 6.2.7 Backup Architecture\n\n#### 6.2.7.1 Multi-Tier Backup Strategy\n\n```mermaid\ngraph TB\n    subgraph \"Backup Tiers\"\n        A[Continuous Oplog Backup] --> B[Point-in-Time Recovery]\n        C[Daily Full Backup] --> D[Compressed Archive]\n        E[Weekly Snapshot] --> F[Long-term Storage]\n    end\n    \n    subgraph \"Storage Locations\"\n        G[Primary Backup] --> H[Same Region S3]\n        I[Secondary Backup] --> J[Cross-Region S3]\n        K[Archive Backup] --> L[Glacier Deep Archive]\n    end\n    \n    subgraph \"Recovery Testing\"\n        M[Monthly Recovery Test] --> N[Automated Validation]\n        O[Quarterly DR Drill] --> P[Full System Recovery]\n    end\n    \n    B --> G\n    D --> I\n    F --> K\n```\n\n#### 6.2.7.2 Backup Schedule and Retention\n\n| Backup Type | Frequency | Retention Period | Storage Location | Recovery Time |\n|-------------|-----------|------------------|------------------|---------------|\n| **Oplog Backup** | Continuous | 7 days | Regional S3 | < 15 minutes |\n| **Full Backup** | Daily | 30 days | Cross-region S3 | < 2 hours |\n| **Snapshot Backup** | Weekly | 1 year | Glacier Standard | < 12 hours |\n| **Archive Backup** | Monthly | 7 years | Glacier Deep Archive | < 48 hours |\n\n### 6.2.8 Data Management\n\n#### 6.2.8.1 Migration Procedures\n\nThe migration strategy addresses the transition from traditional maritime systems to the blockchain-powered platform:\n\n##### 6.2.8.1.1 Legacy System Migration\n\nThe ship data migration program from Oracle database to MongoDB database was designed and implemented based on the Spring Batch framework, which provided a stable and flexible solution for the transition from SQL to NoSQL ship database.\n\n```mermaid\nflowchart TD\n    A[Legacy Oracle Database] --> B[Data Extraction Service]\n    B --> C[Data Transformation Layer]\n    C --> D[Validation Engine]\n    D --> E{Data Quality Check}\n    E -->|Pass| F[MongoDB Import]\n    E -->|Fail| G[Error Handling]\n    G --> H[Manual Review Queue]\n    H --> C\n    F --> I[Blockchain Anchoring]\n    I --> J[Migration Complete]\n    \n    K[Spring Batch Framework] --> B\n    K --> C\n    K --> D\n```\n\n##### 6.2.8.1.2 Migration Phases\n\n| Phase | Duration | Scope | Success Criteria |\n|-------|----------|-------|------------------|\n| **Phase 1: Historical Data** | 4 weeks | Completed shipments (last 2 years) | 100% data integrity validation |\n| **Phase 2: Active Shipments** | 2 weeks | In-transit shipments | Zero disruption to operations |\n| **Phase 3: Real-time Sync** | 1 week | Live data synchronization | < 1 minute replication lag |\n| **Phase 4: Cutover** | 1 week | Full system transition | 99.9% uptime during transition |\n\n#### 6.2.8.2 Versioning Strategy\n\n##### 6.2.8.2.1 Document Versioning\n\n```javascript\n// Document versioning schema\n{\n  \"_id\": \"ObjectId\",\n  \"documentId\": \"String\",\n  \"version\": \"Number\",\n  \"versionHistory\": [\n    {\n      \"version\": \"Number\",\n      \"timestamp\": \"Date\",\n      \"changes\": [\"String\"],\n      \"changedBy\": \"ObjectId\",\n      \"blockchainTxHash\": \"String\"\n    }\n  ],\n  \"currentVersion\": {\n    \"content\": \"Object\",\n    \"ipfsHash\": \"String\",\n    \"blockchainHash\": \"String\"\n  }\n}\n```\n\n##### 6.2.8.2.2 Schema Evolution Strategy\n\n| Change Type | Implementation | Backward Compatibility | Migration Required |\n|-------------|----------------|------------------------|-------------------|\n| **Field Addition** | Default values provided | Full compatibility | No |\n| **Field Modification** | Gradual type conversion | Partial compatibility | Gradual |\n| **Field Removal** | Deprecation period | Limited compatibility | Yes |\n| **Structure Change** | Version-specific handlers | No compatibility | Full migration |\n\n#### 6.2.8.3 Archival Policies\n\n##### 6.2.8.3.1 Data Lifecycle Management\n\n```mermaid\nstateDiagram-v2\n    [*] --> Active\n    Active --> Warm : 30 days\n    Warm --> Cold : 90 days\n    Cold --> Archive : 1 year\n    Archive --> DeepArchive : 3 years\n    DeepArchive --> [*] : 7 years (regulatory requirement)\n    \n    Active --> Archive : Shipment completed\n    Warm --> Archive : Manual archive\n    Cold --> Active : Data access request\n```\n\n##### 6.2.8.3.2 Archival Rules\n\n| Data Category | Active Period | Archive Trigger | Storage Tier | Access Time |\n|---------------|---------------|-----------------|--------------|-------------|\n| **Active Shipments** | Until completion | Shipment delivered | Hot storage | Immediate |\n| **Completed Shipments** | 30 days | Automatic | Warm storage | < 1 minute |\n| **Historical Data** | 90 days | Automatic | Cold storage | < 15 minutes |\n| **Regulatory Archive** | 7 years | Compliance requirement | Deep archive | < 12 hours |\n\n#### 6.2.8.4 Data Storage and Retrieval Mechanisms\n\n##### 6.2.8.4.1 Hybrid Storage Architecture\n\nThe platform implements a hybrid storage approach combining MongoDB for operational data and IPFS for document storage:\n\n```mermaid\ngraph TB\n    subgraph \"Application Layer\"\n        A[ShipLedger API] --> B[Data Access Layer]\n    end\n    \n    subgraph \"Storage Layer\"\n        C[MongoDB Cluster] --> D[Operational Data]\n        E[IPFS Network] --> F[Document Storage]\n        G[BlockDAG Network] --> H[Immutable Records]\n    end\n    \n    subgraph \"Caching Layer\"\n        I[Redis Cluster] --> J[Frequently Accessed Data]\n        K[CDN] --> L[Static Documents]\n    end\n    \n    B --> C\n    B --> E\n    B --> G\n    B --> I\n    E --> K\n```\n\n##### 6.2.8.4.2 Storage Allocation Strategy\n\n| Data Type | Primary Storage | Secondary Storage | Caching Strategy | Retrieval Pattern |\n|-----------|----------------|-------------------|------------------|-------------------|\n| **Shipment Metadata** | MongoDB | BlockDAG anchoring | Redis (30 min TTL) | High frequency |\n| **Documents** | IPFS | MongoDB metadata | CDN (24 hour TTL) | Medium frequency |\n| **Tracking Events** | MongoDB (time-series) | Archive after 90 days | Redis (15 min TTL) | Real-time |\n| **Blockchain Data** | BlockDAG | MongoDB cache | Redis (60 min TTL) | Verification queries |\n\n#### 6.2.8.5 Caching Policies\n\n##### 6.2.8.5.1 Multi-Level Caching Strategy\n\nGiven that time series is core to our business needs, it was super important that whichever database provider we decided on could handle time series data well, and MongoDB does just that. We've managed to maximize data accessibility and readability while minimizing storage size.\n\n```mermaid\ngraph TB\n    subgraph \"Cache Hierarchy\"\n        A[Application Cache] --> B[L1: In-Memory Cache]\n        C[Distributed Cache] --> D[L2: Redis Cluster]\n        E[Database Cache] --> F[L3: MongoDB Cache]\n        G[CDN Cache] --> H[L4: Edge Cache]\n    end\n    \n    subgraph \"Cache Policies\"\n        I[Write-Through] --> J[Immediate Consistency]\n        K[Write-Behind] --> L[Performance Optimization]\n        M[Cache-Aside] --> N[Selective Caching]\n    end\n    \n    subgraph \"Invalidation Strategy\"\n        O[TTL-Based] --> P[Time Expiration]\n        Q[Event-Based] --> R[Data Change Triggers]\n        S[Manual] --> T[Administrative Control]\n    end\n```\n\n##### 6.2.8.5.2 Cache Configuration\n\n| Cache Level | Technology | TTL Policy | Eviction Strategy | Use Case |\n|-------------|------------|------------|-------------------|----------|\n| **L1 Application** | Node.js Memory | 5 minutes | LRU | Frequently accessed objects |\n| **L2 Distributed** | Redis Cluster | 30 minutes | LRU with TTL | Session data, API responses |\n| **L3 Database** | MongoDB WiredTiger | 60 minutes | LRU | Query result sets |\n| **L4 Edge** | CloudFront CDN | 24 hours | TTL-based | Static documents, images |\n\n### 6.2.9 Compliance Considerations\n\n#### 6.2.9.1 Data Retention Rules\n\nMaritime trade operations are subject to various international regulations requiring specific data retention periods:\n\n##### 6.2.9.1.1 Regulatory Requirements\n\n| Regulation | Data Category | Retention Period | Geographic Scope | Compliance Level |\n|------------|---------------|------------------|------------------|------------------|\n| **SOLAS Convention** | Safety documentation | 5 years | International | Mandatory |\n| **MARPOL** | Environmental records | 3 years | International | Mandatory |\n| **ISM Code** | Management records | 3 years | International | Mandatory |\n| **GDPR** | Personal data | Variable (with consent) | EU | Mandatory |\n\n##### 6.2.9.1.2 Implementation Strategy\n\n```javascript\n// Retention policy implementation\nconst retentionPolicies = {\n  shipmentRecords: {\n    period: \"7 years\",\n    trigger: \"shipment_completion\",\n    exceptions: [\"legal_hold\", \"audit_requirement\"]\n  },\n  trackingData: {\n    period: \"3 years\", \n    trigger: \"automatic\",\n    archiveAfter: \"90 days\"\n  },\n  personalData: {\n    period: \"consent_based\",\n    trigger: \"consent_withdrawal\",\n    anonymizeAfter: \"retention_period\"\n  }\n};\n```\n\n#### 6.2.9.2 Backup and Fault Tolerance Policies\n\n##### 6.2.9.2.1 Business Continuity Requirements\n\nThe maritime industry requires high availability due to the time-sensitive nature of shipping operations:\n\n```mermaid\ngraph TB\n    subgraph \"Fault Tolerance Architecture\"\n        A[Primary Data Center] --> B[Synchronous Replication]\n        B --> C[Secondary Data Center]\n        C --> D[Asynchronous Replication]\n        D --> E[DR Data Center]\n    end\n    \n    subgraph \"Recovery Objectives\"\n        F[RTO: 15 minutes] --> G[Automatic Failover]\n        H[RPO: 1 minute] --> I[Continuous Backup]\n        J[99.9% Uptime] --> K[Redundant Systems]\n    end\n    \n    subgraph \"Testing Strategy\"\n        L[Monthly DR Tests] --> M[Automated Recovery]\n        N[Quarterly Full Tests] --> O[Manual Validation]\n    end\n```\n\n##### 6.2.9.2.2 Fault Tolerance Metrics\n\n| Metric | Target | Measurement | Recovery Procedure |\n|--------|--------|-------------|-------------------|\n| **Recovery Time Objective (RTO)** | < 15 minutes | Automated monitoring | Automatic failover to secondary |\n| **Recovery Point Objective (RPO)** | < 1 minute | Oplog monitoring | Point-in-time recovery |\n| **Mean Time to Recovery (MTTR)** | < 30 minutes | Incident tracking | Escalation procedures |\n| **Data Durability** | 99.999999999% | Replication validation | Multi-region backup |\n\n#### 6.2.9.3 Privacy Controls\n\n##### 6.2.9.3.1 Data Classification and Protection\n\n```javascript\n// Privacy control implementation\nconst privacyControls = {\n  dataClassification: {\n    public: {\n      encryption: \"none\",\n      access: \"unrestricted\"\n    },\n    internal: {\n      encryption: \"AES-256\",\n      access: \"role_based\"\n    },\n    confidential: {\n      encryption: \"AES-256 + field_level\",\n      access: \"need_to_know\"\n    },\n    restricted: {\n      encryption: \"AES-256 + HSM\",\n      access: \"multi_factor_auth\"\n    }\n  },\n  personalDataHandling: {\n    collection: \"explicit_consent\",\n    processing: \"lawful_basis\",\n    storage: \"purpose_limitation\",\n    deletion: \"right_to_erasure\"\n  }\n};\n```\n\n##### 6.2.9.3.2 Privacy Implementation\n\n| Privacy Control | Implementation | Technology | Compliance Standard |\n|-----------------|----------------|------------|-------------------|\n| **Data Encryption** | Field-level encryption for PII | MongoDB Client-Side Field Level Encryption | GDPR Article 32 |\n| **Access Control** | Role-based permissions | MongoDB RBAC + LDAP | ISO 27001 |\n| **Data Anonymization** | Automated PII removal | Custom anonymization scripts | GDPR Article 17 |\n| **Consent Management** | Granular consent tracking | Custom consent service | GDPR Article 7 |\n\n#### 6.2.9.4 Audit Mechanisms\n\n##### 6.2.9.4.1 Comprehensive Audit Trail\n\nThe platform maintains detailed audit logs for all data access and modifications:\n\n```mermaid\nsequenceDiagram\n    participant U as User\n    participant A as Application\n    participant DB as Database\n    participant BC as Blockchain\n    participant AL as Audit Log\n    \n    U->>A: Data Request\n    A->>AL: Log Access Attempt\n    A->>DB: Query Data\n    DB->>AL: Log Data Access\n    DB-->>A: Return Data\n    A->>BC: Verify Data Integrity\n    BC-->>A: Confirmation\n    A->>AL: Log Successful Access\n    A-->>U: Return Data\n    \n    Note over AL: All operations logged with:<br/>- User ID<br/>- Timestamp<br/>- Action Type<br/>- Data Accessed<br/>- Result Status\n```\n\n##### 6.2.9.4.2 Audit Log Structure\n\n```javascript\n// Audit log schema\n{\n  \"_id\": \"ObjectId\",\n  \"timestamp\": \"Date\",\n  \"userId\": \"ObjectId\",\n  \"sessionId\": \"String\",\n  \"action\": \"String\", // CREATE, READ, UPDATE, DELETE\n  \"resource\": \"String\", // Collection/document accessed\n  \"resourceId\": \"String\",\n  \"ipAddress\": \"String\",\n  \"userAgent\": \"String\",\n  \"result\": \"String\", // SUCCESS, FAILURE, UNAUTHORIZED\n  \"changes\": {\n    \"before\": \"Object\",\n    \"after\": \"Object\"\n  },\n  \"blockchainTxHash\": \"String\", // For critical operations\n  \"complianceFlags\": [\"String\"]\n}\n```\n\n#### 6.2.9.5 Access Controls\n\n##### 6.2.9.5.1 Role-Based Access Control (RBAC)\n\nThe platform implements a comprehensive RBAC system aligned with maritime industry roles:\n\n| Role | Database Permissions | Collection Access | Field-Level Restrictions |\n|------|---------------------|-------------------|-------------------------|\n| **Shipper** | Read/Write own shipments | shipments, documents | Cannot modify carrier data |\n| **Carrier** | Read/Write assigned shipments | shipments, tracking_events | Cannot modify financial terms |\n| **Port Authority** | Read port-related data | shipments, tracking_events | Location and customs data only |\n| **Bank/Finance** | Read/Write financial data | shipments (finance section) | Financial and compliance data only |\n\n##### 6.2.9.5.2 Dynamic Access Control\n\n```javascript\n// Dynamic access control implementation\nconst accessControl = {\n  shipmentAccess: (user, shipment) => {\n    const userRole = user.role;\n    const userCompany = user.companyId;\n    \n    switch(userRole) {\n      case 'shipper':\n        return shipment.shipper.companyId.equals(userCompany);\n      case 'carrier':\n        return shipment.carrier.companyId.equals(userCompany);\n      case 'consignee':\n        return shipment.consignee.companyId.equals(userCompany);\n      case 'port_authority':\n        return isPortInRoute(user.portCode, shipment.route);\n      default:\n        return false;\n    }\n  }\n};\n```\n\n### 6.2.10 Performance Optimization\n\n#### 6.2.10.1 Query Optimization Patterns\n\n##### 6.2.10.1.1 Optimized Query Patterns\n\nThe database implements several query optimization patterns specific to maritime trade operations:\n\n```javascript\n// Optimized shipment lookup with projection\ndb.shipments.find(\n  {\n    \"shipmentId\": \"SHIP_2024_001234\",\n    \"status.current\": {$in: [\"IN_TRANSIT\", \"ARRIVED_AT_PORT\"]}\n  },\n  {\n    \"shipmentId\": 1,\n    \"status\": 1,\n    \"tracking.currentLocation\": 1,\n    \"route\": 1\n  }\n).hint({\"shipmentId\": 1, \"status.current\": 1});\n\n// Geospatial query for nearby shipments\ndb.shipments.find({\n  \"tracking.currentLocation\": {\n    $near: {\n      $geometry: {\n        type: \"Point\",\n        coordinates: [103.8198, 1.3521] // Singapore\n      },\n      $maxDistance: 100000 // 100km\n    }\n  }\n});\n\n// Aggregation pipeline for shipment analytics\ndb.shipments.aggregate([\n  {$match: {\"createdAt\": {$gte: new Date(\"2024-01-01\")}}},\n  {$group: {\n    \"_id\": \"$route.portOfLoading.code\",\n    \"totalShipments\": {$sum: 1},\n    \"avgValue\": {$avg: \"$finance.totalAmount.value\"}\n  }},\n  {$sort: {\"totalShipments\": -1}},\n  {$limit: 10}\n]);\n```\n\n##### 6.2.10.1.2 Query Performance Metrics\n\n| Query Type | Target Response Time | Index Usage | Optimization Technique |\n|------------|---------------------|-------------|----------------------|\n| **Shipment Lookup** | < 50ms | Compound index | Projection, hint usage |\n| **Geospatial Search** | < 200ms | 2dsphere index | Spatial indexing |\n| **Full-text Search** | < 500ms | Text index | Search optimization |\n| **Analytics Queries** | < 2s | Multiple indexes | Aggregation pipeline |\n\n#### 6.2.10.2 Caching Strategy\n\n##### 6.2.10.2.1 Intelligent Caching Implementation\n\n```mermaid\nflowchart TD\n    A[Query Request] --> B{Cache Hit?}\n    B -->|Yes| C[Return Cached Data]\n    B -->|No| D[Query Database]\n    D --> E[Store in Cache]\n    E --> F[Return Data]\n    \n    G[Data Update] --> H[Invalidate Related Cache]\n    H --> I[Update Database]\n    I --> J[Refresh Cache]\n    \n    K[Cache Warming] --> L[Preload Frequent Queries]\n    L --> M[Background Refresh]\n```\n\n##### 6.2.10.2.2 Cache Optimization Rules\n\n| Data Pattern | Cache Strategy | TTL | Invalidation Trigger |\n|--------------|----------------|-----|---------------------|\n| **Active Shipments** | Write-through | 15 minutes | Status change |\n| **Port Information** | Cache-aside | 24 hours | Manual update |\n| **User Sessions** | Write-behind | 30 minutes | User logout |\n| **Analytics Data** | Lazy loading | 1 hour | Data refresh |\n\n#### 6.2.10.3 Connection Pooling\n\n##### 6.2.10.3.1 Connection Pool Configuration\n\n```javascript\n// MongoDB connection pool settings\nconst mongoOptions = {\n  maxPoolSize: 100,        // Maximum connections\n  minPoolSize: 10,         // Minimum connections  \n  maxIdleTimeMS: 300000,   // 5 minutes idle timeout\n  serverSelectionTimeoutMS: 5000,\n  socketTimeoutMS: 45000,\n  family: 4,               // Use IPv4\n  keepAlive: true,\n  keepAliveInitialDelay: 300000\n};\n\n// Redis connection pool settings\nconst redisOptions = {\n  host: 'redis-cluster.internal',\n  port: 6379,\n  family: 4,\n  keepAlive: true,\n  lazyConnect: true,\n  maxRetriesPerRequest: 3,\n  retryDelayOnFailover: 100,\n  enableOfflineQueue: false,\n  maxmemoryPolicy: 'allkeys-lru'\n};\n```\n\n#### 6.2.10.4 Read/Write Splitting\n\n##### 6.2.10.4.1 Read/Write Distribution Strategy\n\n```mermaid\ngraph TB\n    subgraph \"Application Layer\"\n        A[Write Operations] --> B[Primary Node]\n        C[Read Operations] --> D[Read Preference Router]\n    end\n    \n    subgraph \"Database Layer\"\n        B --> E[Primary Replica]\n        D --> F[Secondary Replica 1]\n        D --> G[Secondary Replica 2]\n        D --> H[Analytics Replica]\n    end\n    \n    subgraph \"Load Distribution\"\n        I[Real-time Reads] --> F\n        J[Analytics Queries] --> H\n        K[Backup Operations] --> G\n    end\n```\n\n##### 6.2.10.4.2 Read Preference Configuration\n\n| Operation Type | Read Preference | Justification | Latency Impact |\n|----------------|-----------------|---------------|----------------|\n| **Real-time Tracking** | `primaryPreferred` | Data consistency priority | +5ms |\n| **Dashboard Queries** | `secondaryPreferred` | Load distribution | -10ms |\n| **Analytics Reports** | `secondary` | Dedicated analytics replica | -20ms |\n| **Backup Operations** | `secondary` | Avoid primary load | No impact |\n\n#### 6.2.10.5 Batch Processing Approach\n\n##### 6.2.10.5.1 Batch Processing Architecture\n\nThe platform implements efficient batch processing for high-volume operations:\n\n```mermaid\nflowchart TD\n    A[Data Ingestion] --> B[Batch Queue]\n    B --> C[Batch Processor]\n    C --> D{Batch Size Check}\n    D -->|< 1000 records| E[Wait for More Data]\n    D -->|>= 1000 records| F[Process Batch]\n    F --> G[Bulk Database Operation]\n    G --> H[Update Blockchain]\n    H --> I[Notify Stakeholders]\n    \n    J[Scheduled Jobs] --> K[Daily Aggregation]\n    K --> L[Weekly Reports]\n    L --> M[Monthly Analytics]\n```\n\n##### 6.2.10.5.2 Batch Processing Configuration\n\n| Batch Type | Batch Size | Processing Frequency | Performance Gain |\n|------------|------------|---------------------|------------------|\n| **Tracking Events** | 1,000 records | Every 5 minutes | 80% faster than individual inserts |\n| **Document Updates** | 500 records | Every 10 minutes | 60% reduction in database load |\n| **Blockchain Anchoring** | 100 transactions | Every 15 minutes | 90% reduction in gas costs |\n| **Analytics Aggregation** | Full dataset | Daily at 2 AM | 95% faster than real-time calculation |\n\n### 6.2.11 Database Performance Monitoring\n\n#### 6.2.11.1 Real-Time Monitoring Dashboard\n\n```mermaid\ngraph TB\n    subgraph \"Monitoring Stack\"\n        A[MongoDB Compass] --> B[Real-time Metrics]\n        C[Prometheus] --> D[Custom Metrics Collection]\n        E[Grafana] --> F[Visualization Dashboard]\n        G[AlertManager] --> H[Automated Alerts]\n    end\n    \n    subgraph \"Key Metrics\"\n        I[Query Performance] --> J[Response Time < 100ms]\n        K[Connection Pool] --> L[Utilization < 80%]\n        M[Replication Lag] --> N[< 1 second]\n        O[Storage Usage] --> P[< 85% capacity]\n    end\n    \n    B --> E\n    D --> E\n    F --> G\n```\n\n#### 6.2.11.2 Performance Alerting\n\n| Alert Type | Threshold | Response Time | Escalation |\n|------------|-----------|---------------|------------|\n| **High Query Latency** | > 1 second | Immediate | DevOps team |\n| **Connection Pool Exhaustion** | > 90% utilization | 5 minutes | Database team |\n| **Replication Lag** | > 10 seconds | 2 minutes | On-call engineer |\n| **Storage Capacity** | > 90% full | 1 hour | Infrastructure team |\n\nThe comprehensive database design for ShipLedger ensures optimal performance, scalability, and compliance for maritime trade operations while leveraging BlockDAG's EVM-compatible account-based subsystem supports standardized smart contracts. A library is provided to connect these two worlds, providing developers with the best of both worlds. This hybrid approach combines the benefits of traditional database performance with blockchain immutability and transparency, creating a robust foundation for global shipping operations.\n\n## 6.3 Integration Architecture\n\n### 6.3.1 API Design\n\n#### 6.3.1.1 Protocol Specifications\n\nShipLedger implements a comprehensive API architecture that leverages BlockDAG's full Ethereum Virtual Machine (EVM) compatibility, allowing for seamless integration and deployment of Ethereum-based smart contracts. This compatibility ensures that developers familiar with Ethereum's toolset, including Solidity and other Ethereum-compatible programming languages, can easily build and deploy decentralized applications (dApps) on the BlockDAG network.\n\nThe platform utilizes multiple protocol layers to ensure robust integration with maritime industry stakeholders:\n\n| Protocol Layer | Implementation | Use Case | Performance Characteristics |\n|----------------|----------------|----------|---------------------------|\n| **RESTful HTTP/HTTPS** | JSON over TLS 1.3 | Standard API operations, document management | <2s response time, 99.9% availability |\n| **WebSocket** | Real-time bidirectional communication | Live tracking updates, notifications | <100ms latency, persistent connections |\n| **GraphQL** | Query language for complex data fetching | Multi-resource queries, flexible data retrieval | Reduced over-fetching, single endpoint |\n| **gRPC** | High-performance RPC framework | Internal service communication | High throughput, type-safe contracts |\n\n#### 6.3.1.2 Authentication Methods\n\nThe authentication framework implements multi-layered security appropriate for maritime trade operations:\n\n**Primary Authentication Mechanisms:**\n\n```mermaid\nsequenceDiagram\n    participant Client as Client Application\n    participant Gateway as API Gateway\n    participant Auth as Auth Service\n    participant BC as Blockchain Service\n    participant Resource as Protected Resource\n    \n    Client->>Gateway: API Request + JWT Token\n    Gateway->>Auth: Validate Token\n    Auth->>Auth: Verify Signature & Claims\n    Auth->>BC: Verify Blockchain Identity\n    BC-->>Auth: Identity Confirmed\n    Auth-->>Gateway: Token Valid + User Context\n    Gateway->>Resource: Forward Request + Context\n    Resource-->>Gateway: Response\n    Gateway-->>Client: API Response\n```\n\n**Authentication Method Specifications:**\n\n| Method | Implementation | Use Case | Security Level |\n|--------|----------------|----------|----------------|\n| **JWT Bearer Tokens** | RS256 signature with 15-minute expiry | Standard API access | High |\n| **API Keys** | HMAC-SHA256 signed requests | System-to-system integration | Medium |\n| **OAuth 2.0** | Authorization code flow with PKCE | Third-party integrations | High |\n| **Blockchain Signatures** | EIP-712 structured data signing | Smart contract interactions | Very High |\n\n#### 6.3.1.3 Authorization Framework\n\nThe authorization system implements Role-Based Access Control (RBAC) with maritime industry-specific roles:\n\n**Role Hierarchy and Permissions:**\n\n| Role | API Access Level | Blockchain Operations | Data Scope |\n|------|------------------|----------------------|------------|\n| **Shipper** | Create/Read own shipments | Deploy shipment contracts | Own company data |\n| **Carrier** | Read/Update assigned shipments | Update shipment status | Assigned shipments |\n| **Port Authority** | Read port-related shipments | Verify clearance status | Port jurisdiction data |\n| **Customs** | Read/Update customs data | Process clearance | Regulatory compliance data |\n\n#### 6.3.1.4 Rate Limiting Strategy\n\nInitially, there will be a per-transaction fee of about $0.01 per transaction on the BlockDAG network. The rate limiting strategy balances cost efficiency with system protection:\n\n**Rate Limiting Tiers:**\n\n| User Tier | Requests/Minute | Burst Allowance | Blockchain Transactions/Hour | Cost Model |\n|-----------|-----------------|-----------------|----------------------------|------------|\n| **Free** | 100 | 200 | 10 | Free tier with basic limits |\n| **Professional** | 1,000 | 2,000 | 100 | $0.01 per blockchain transaction |\n| **Enterprise** | 10,000 | 20,000 | 1,000 | Volume discounts available |\n| **Partner** | Unlimited | Unlimited | Unlimited | Custom pricing |\n\n#### 6.3.1.5 Versioning Approach\n\nThe API versioning strategy ensures backward compatibility while enabling continuous evolution:\n\n**Versioning Strategy:**\n\n```mermaid\ngraph TB\n    subgraph \"API Versioning Architecture\"\n        A[Client Request] --> B[API Gateway]\n        B --> C{Version Detection}\n        C -->|v1| D[Legacy Handler v1.x]\n        C -->|v2| E[Current Handler v2.x]\n        C -->|v3| F[Beta Handler v3.x]\n        \n        D --> G[Response Transformer v1]\n        E --> H[Response Transformer v2]\n        F --> I[Response Transformer v3]\n    end\n    \n    subgraph \"Version Lifecycle\"\n        J[Development] --> K[Beta]\n        K --> L[Stable]\n        L --> M[Deprecated]\n        M --> N[Sunset]\n    end\n```\n\n**Version Management Policy:**\n\n| Version Status | Support Duration | Features | Migration Path |\n|----------------|------------------|----------|----------------|\n| **Current (v2.x)** | Indefinite | Full feature set | N/A |\n| **Previous (v1.x)** | 18 months | Maintenance only | Automated migration tools |\n| **Beta (v3.x)** | Development | Preview features | Opt-in testing |\n| **Deprecated** | 6 months notice | Security fixes only | Mandatory migration |\n\n#### 6.3.1.6 Documentation Standards\n\nThe API documentation follows OpenAPI 3.0 specification with maritime industry extensions:\n\n**Documentation Structure:**\n\n```yaml\nopenapi: 3.0.3\ninfo:\n  title: ShipLedger Maritime Trade API\n  version: 2.1.0\n  description: |\n    Blockchain-powered digital shipping and trade finance platform\n    Built on BlockDAG with full EVM compatibility\n  contact:\n    name: ShipLedger API Support\n    url: https://docs.shibledger.com\n    email: api-support@shibledger.com\n\nservers:\n  - url: https://api.shibledger.com/v2\n    description: Production server\n  - url: https://staging-api.shibledger.com/v2\n    description: Staging server\n\npaths:\n  /shipments:\n    post:\n      summary: Create new shipment\n      description: |\n        Creates a new shipment and deploys associated smart contract\n        on BlockDAG network\n      security:\n        - BearerAuth: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/CreateShipmentRequest'\n```\n\n### 6.3.2 Message Processing\n\n#### 6.3.2.1 Event Processing Patterns\n\nAPIs have revolutionized how data is exchanged across various stakeholders, including shipping companies, ports, logistics providers, and customers, and across different teams in the same organization. ShipLedger implements event-driven architecture patterns optimized for maritime trade workflows:\n\n**Event Processing Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"Event Sources\"\n        A[Blockchain Events] --> D[Event Bus]\n        B[IoT Sensors] --> D\n        C[External APIs] --> D\n    end\n    \n    subgraph \"Event Processing\"\n        D --> E[Event Router]\n        E --> F[Event Filters]\n        F --> G[Event Processors]\n        G --> H[Event Store]\n    end\n    \n    subgraph \"Event Consumers\"\n        I[Document Service] --> J[Update Status]\n        K[Tracking Service] --> L[Location Updates]\n        M[Finance Service] --> N[Payment Triggers]\n        O[Notification Service] --> P[Stakeholder Alerts]\n    end\n    \n    H --> I\n    H --> K\n    H --> M\n    H --> O\n```\n\n**Event Types and Processing Patterns:**\n\n| Event Category | Processing Pattern | Latency Requirement | Reliability Level |\n|----------------|-------------------|-------------------|------------------|\n| **Blockchain Events** | Event Sourcing | <5 seconds | Exactly-once delivery |\n| **Tracking Updates** | Stream Processing | <30 seconds | At-least-once delivery |\n| **Document Changes** | CQRS Pattern | <2 seconds | Exactly-once delivery |\n| **Payment Events** | Saga Pattern | <10 seconds | Exactly-once delivery |\n\n#### 6.3.2.2 Message Queue Architecture\n\nThe message queue architecture ensures reliable communication between services and external systems:\n\n**Queue Architecture Design:**\n\n```mermaid\ngraph TB\n    subgraph \"Message Producers\"\n        A[API Gateway] --> D[Message Router]\n        B[Smart Contracts] --> D\n        C[External Systems] --> D\n    end\n    \n    subgraph \"Message Infrastructure\"\n        D --> E[Priority Queue]\n        D --> F[Standard Queue]\n        D --> G[Dead Letter Queue]\n        \n        E --> H[High Priority Consumer]\n        F --> I[Standard Consumer]\n        G --> J[Error Handler]\n    end\n    \n    subgraph \"Message Consumers\"\n        H --> K[Critical Operations]\n        I --> L[Standard Operations]\n        J --> M[Manual Review]\n    end\n```\n\n**Queue Configuration Specifications:**\n\n| Queue Type | Technology | Message TTL | Retry Policy | Use Case |\n|------------|------------|-------------|--------------|----------|\n| **High Priority** | Redis Streams | 1 hour | 3 retries, exponential backoff | Payment processing, customs clearance |\n| **Standard** | Apache Kafka | 24 hours | 5 retries, linear backoff | Document updates, tracking events |\n| **Dead Letter** | MongoDB | 7 days | Manual intervention | Failed message analysis |\n| **Blockchain** | Custom Queue | 48 hours | Unlimited retries | Smart contract interactions |\n\n#### 6.3.2.3 Stream Processing Design\n\nReal-time stream processing handles high-volume maritime data flows:\n\n**Stream Processing Pipeline:**\n\n```mermaid\nflowchart TD\n    A[Data Ingestion] --> B[Stream Partitioning]\n    B --> C[Real-time Processing]\n    C --> D[Event Enrichment]\n    D --> E[Business Rules Engine]\n    E --> F[Output Streams]\n    \n    F --> G[Real-time Dashboard]\n    F --> H[Alert System]\n    F --> I[Data Lake]\n    F --> J[External Systems]\n    \n    subgraph \"Processing Stages\"\n        K[Validation] --> L[Transformation]\n        L --> M[Aggregation]\n        M --> N[Routing]\n    end\n    \n    C --> K\n```\n\n**Stream Processing Specifications:**\n\n| Stream Type | Processing Framework | Throughput Target | Latency Target | Windowing Strategy |\n|-------------|---------------------|-------------------|----------------|-------------------|\n| **Tracking Events** | Apache Kafka Streams | 10,000 events/sec | <100ms | Tumbling 5-minute windows |\n| **Blockchain Events** | Custom Processor | 1,000 events/sec | <1 second | Session-based windows |\n| **IoT Sensor Data** | Apache Flink | 50,000 events/sec | <50ms | Sliding 1-minute windows |\n| **Financial Events** | Apache Storm | 5,000 events/sec | <500ms | Event-time processing |\n\n#### 6.3.2.4 Batch Processing Flows\n\nBatch processing handles large-volume operations and analytics:\n\n**Batch Processing Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"Data Sources\"\n        A[Historical Data] --> E[Batch Scheduler]\n        B[Archive Data] --> E\n        C[External Feeds] --> E\n        D[Compliance Reports] --> E\n    end\n    \n    subgraph \"Processing Pipeline\"\n        E --> F[Data Validation]\n        F --> G[ETL Processing]\n        G --> H[Business Logic]\n        H --> I[Data Aggregation]\n        I --> J[Output Generation]\n    end\n    \n    subgraph \"Outputs\"\n        J --> K[Analytics Reports]\n        J --> L[Compliance Documents]\n        J --> M[Data Warehouse]\n        J --> N[Blockchain Anchoring]\n    end\n```\n\n**Batch Job Specifications:**\n\n| Job Type | Schedule | Processing Volume | Duration Target | Resource Requirements |\n|----------|----------|-------------------|-----------------|----------------------|\n| **Daily Analytics** | 02:00 UTC | 1M records | <2 hours | 4 CPU cores, 16GB RAM |\n| **Compliance Reports** | Weekly | 10M records | <6 hours | 8 CPU cores, 32GB RAM |\n| **Data Archival** | Monthly | 100M records | <24 hours | 16 CPU cores, 64GB RAM |\n| **Blockchain Reconciliation** | Hourly | 100K transactions | <30 minutes | 2 CPU cores, 8GB RAM |\n\n#### 6.3.2.5 Error Handling Strategy\n\nComprehensive error handling ensures system resilience:\n\n**Error Handling Flow:**\n\n```mermaid\nflowchart TD\n    A[Message Processing] --> B{Processing Success?}\n    B -->|Yes| C[Acknowledge Message]\n    B -->|No| D[Error Classification]\n    \n    D --> E{Error Type}\n    E -->|Transient| F[Retry with Backoff]\n    E -->|Permanent| G[Dead Letter Queue]\n    E -->|Critical| H[Immediate Alert]\n    \n    F --> I{Retry Count < Max?}\n    I -->|Yes| J[Wait and Retry]\n    I -->|No| G\n    \n    G --> K[Manual Review Queue]\n    H --> L[On-Call Notification]\n    J --> A\n```\n\n**Error Handling Policies:**\n\n| Error Category | Retry Strategy | Escalation | Recovery Action |\n|----------------|----------------|------------|-----------------|\n| **Network Timeout** | Exponential backoff, 5 retries | After 3 failures | Circuit breaker activation |\n| **Validation Error** | No retry | Immediate | Return error to sender |\n| **Blockchain Error** | Linear backoff, unlimited retries | After 1 hour | Manual intervention |\n| **External API Error** | Exponential backoff, 3 retries | After 2 failures | Fallback to cached data |\n\n### 6.3.3 External Systems\n\n#### 6.3.3.1 Third-Party Integration Patterns\n\nThis digital transformation facilitates real-time tracking, efficient route planning, accurate risk-based due diligence, streamlined customs and sanctions clearance, and enhanced decision-making capabilities. ShipLedger integrates with critical maritime industry systems:\n\n**Integration Architecture Overview:**\n\n```mermaid\ngraph TB\n    subgraph \"ShipLedger Core\"\n        A[API Gateway] --> B[Integration Layer]\n        B --> C[Message Bus]\n        C --> D[Service Mesh]\n    end\n    \n    subgraph \"Port Authority Systems\"\n        E[Port Management System] --> F[Berth Allocation API]\n        G[Vessel Traffic Service] --> H[AIS Data Feed]\n        I[Cargo Handling System] --> J[Container Status API]\n    end\n    \n    subgraph \"Customs & Regulatory\"\n        K[Customs Declaration System] --> L[Clearance API]\n        M[Trade Compliance Platform] --> N[Sanctions Screening API]\n        O[Regulatory Database] --> P[Compliance Check API]\n    end\n    \n    subgraph \"Financial Services\"\n        Q[Banking Network] --> R[SWIFT Integration]\n        S[Trade Finance Platform] --> T[Letter of Credit API]\n        U[Payment Gateway] --> V[Multi-Currency API]\n    end\n    \n    B --> F\n    B --> H\n    B --> J\n    B --> L\n    B --> N\n    B --> P\n    B --> R\n    B --> T\n    B --> V\n```\n\n**Integration Pattern Specifications:**\n\n| System Category | Integration Pattern | Protocol | Data Format | Frequency |\n|-----------------|-------------------|----------|-------------|-----------|\n| **Port Authorities** | RESTful API + Webhooks | HTTPS | JSON/XML | Real-time |\n| **Customs Systems** | EDI + API Gateway | HTTPS/SFTP | EDI X12/JSON | Batch + Real-time |\n| **Banking Networks** | SWIFT + API | SWIFT MT/ISO 20022 | Structured messages | Real-time |\n| **IoT Sensors** | MQTT + Message Queue | MQTT/CoAP | Binary/JSON | Continuous |\n\n#### 6.3.3.2 Legacy System Interfaces\n\nMaritime industry legacy systems require specialized integration approaches:\n\n**Legacy Integration Strategy:**\n\n```mermaid\nsequenceDiagram\n    participant Legacy as Legacy System\n    participant Adapter as Integration Adapter\n    participant Transform as Data Transformer\n    participant Gateway as API Gateway\n    participant ShipLedger as ShipLedger Core\n    \n    Legacy->>Adapter: Legacy Protocol Data\n    Adapter->>Transform: Normalized Data\n    Transform->>Gateway: REST API Call\n    Gateway->>ShipLedger: Internal API\n    ShipLedger-->>Gateway: Response\n    Gateway-->>Transform: JSON Response\n    Transform-->>Adapter: Legacy Format\n    Adapter-->>Legacy: Legacy Protocol Response\n```\n\n**Legacy System Integration Specifications:**\n\n| Legacy System Type | Interface Method | Data Transformation | Update Frequency | Reliability |\n|-------------------|------------------|-------------------|------------------|-------------|\n| **Mainframe Systems** | File Transfer (SFTP) | COBOL to JSON conversion | Daily batch | 99.5% |\n| **EDI Systems** | X12/EDIFACT | EDI to REST API mapping | Real-time | 99.9% |\n| **Database Systems** | ODBC/JDBC | SQL to NoSQL transformation | Hourly sync | 99.8% |\n| **Terminal Systems** | Custom TCP/IP | Binary to JSON conversion | Real-time | 99.7% |\n\n#### 6.3.3.3 API Gateway Configuration\n\nThe API Gateway serves as the central integration hub:\n\n**Gateway Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"External Clients\"\n        A[Mobile Apps] --> E[Load Balancer]\n        B[Web Applications] --> E\n        C[Partner Systems] --> E\n        D[IoT Devices] --> E\n    end\n    \n    subgraph \"API Gateway Layer\"\n        E --> F[Authentication]\n        F --> G[Rate Limiting]\n        G --> H[Request Routing]\n        H --> I[Response Transformation]\n        I --> J[Caching Layer]\n    end\n    \n    subgraph \"Backend Services\"\n        K[Document Service] --> L[Tracking Service]\n        L --> M[Finance Service]\n        M --> N[Blockchain Service]\n    end\n    \n    J --> K\n```\n\n**Gateway Configuration Specifications:**\n\n| Configuration Aspect | Implementation | Parameters | Performance Impact |\n|----------------------|----------------|------------|-------------------|\n| **Load Balancing** | Round-robin with health checks | 5-second health check interval | 99.9% availability |\n| **Caching** | Redis-based response caching | 5-minute TTL for read operations | 40% latency reduction |\n| **Compression** | Gzip compression | Minimum 1KB response size | 60% bandwidth savings |\n| **SSL Termination** | TLS 1.3 with perfect forward secrecy | 2048-bit RSA certificates | <10ms overhead |\n\n#### 6.3.3.4 External Service Contracts\n\nService Level Agreements (SLAs) define integration requirements:\n\n**External Service SLA Matrix:**\n\n| Service Provider | Service Type | Availability SLA | Response Time SLA | Data Accuracy SLA |\n|------------------|--------------|------------------|-------------------|-------------------|\n| **Port Authorities** | Vessel tracking, berth allocation | 99.5% | <2 seconds | 99.9% |\n| **Customs Systems** | Clearance processing | 99.9% | <5 seconds | 100% |\n| **Banking Networks** | Payment processing | 99.99% | <10 seconds | 100% |\n| **Weather Services** | Maritime weather data | 99.0% | <30 seconds | 95% |\n\n**Integration Monitoring and Alerting:**\n\n```mermaid\ngraph TB\n    subgraph \"Monitoring Layer\"\n        A[Health Checks] --> D[Monitoring Dashboard]\n        B[Performance Metrics] --> D\n        C[Error Tracking] --> D\n    end\n    \n    subgraph \"Alerting System\"\n        D --> E[Threshold Analysis]\n        E --> F{SLA Breach?}\n        F -->|Yes| G[Alert Generation]\n        F -->|No| H[Continue Monitoring]\n        G --> I[Notification Channels]\n    end\n    \n    subgraph \"Response Actions\"\n        I --> J[Email Alerts]\n        I --> K[SMS Notifications]\n        I --> L[Slack Integration]\n        I --> M[PagerDuty Escalation]\n    end\n```\n\n### 6.3.4 Integration Flow Diagrams\n\n#### 6.3.4.1 End-to-End Shipment Processing Integration\n\n```mermaid\nsequenceDiagram\n    participant Shipper as Shipper System\n    participant API as ShipLedger API\n    participant BC as Blockchain Service\n    participant Port as Port Authority\n    participant Customs as Customs System\n    participant Bank as Banking System\n    participant Carrier as Carrier System\n    \n    Shipper->>API: Create Shipment Request\n    API->>BC: Deploy Smart Contract\n    BC-->>API: Contract Address\n    API->>Port: Register Vessel Arrival\n    Port-->>API: Berth Assignment\n    API->>Customs: Submit Declaration\n    Customs-->>API: Preliminary Approval\n    API->>Bank: Setup Trade Finance\n    Bank-->>API: LC Confirmation\n    API->>Carrier: Assign Shipment\n    Carrier-->>API: Acceptance Confirmation\n    API-->>Shipper: Shipment Created\n    \n    Note over BC: Smart contract manages<br/>state transitions automatically\n    \n    Carrier->>API: Update Status: In Transit\n    API->>BC: Record Status Change\n    BC->>Port: Trigger Arrival Notification\n    BC->>Customs: Trigger Clearance Process\n    BC->>Bank: Trigger Payment Release\n```\n\n#### 6.3.4.2 Real-Time Tracking Integration Flow\n\n```mermaid\nflowchart TD\n    A[IoT Sensors] --> B[Data Aggregation]\n    B --> C[Message Queue]\n    C --> D[Stream Processor]\n    D --> E[Event Router]\n    \n    E --> F[Blockchain Update]\n    E --> G[Database Update]\n    E --> H[Cache Update]\n    E --> I[Notification Service]\n    \n    F --> J[Smart Contract Event]\n    G --> K[Historical Record]\n    H --> L[Real-time Dashboard]\n    I --> M[Stakeholder Alerts]\n    \n    J --> N[External System Sync]\n    K --> O[Analytics Pipeline]\n    L --> P[Web/Mobile Apps]\n    M --> Q[Email/SMS/Push]\n    \n    subgraph \"External Integrations\"\n        N --> R[Port Management]\n        N --> S[Customs Systems]\n        N --> T[Carrier Platforms]\n    end\n```\n\n#### 6.3.4.3 Trade Finance Integration Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Trade Finance Workflow\"\n        A[LC Application] --> B[Bank Verification]\n        B --> C[Smart Contract Creation]\n        C --> D[Document Submission]\n        D --> E[Automated Verification]\n        E --> F[Payment Release]\n    end\n    \n    subgraph \"Integration Points\"\n        G[SWIFT Network] --> H[Banking APIs]\n        I[Document APIs] --> J[Verification Services]\n        K[Blockchain Events] --> L[Payment Triggers]\n    end\n    \n    subgraph \"External Systems\"\n        M[Correspondent Banks] --> N[Trade Finance Platforms]\n        O[Regulatory Systems] --> P[Compliance Databases]\n        Q[Insurance Systems] --> R[Risk Assessment]\n    end\n    \n    B --> H\n    D --> I\n    F --> K\n    H --> M\n    J --> O\n    L --> Q\n```\n\n### 6.3.5 Message Flow Diagrams\n\n#### 6.3.5.1 Event-Driven Message Flow\n\n```mermaid\nsequenceDiagram\n    participant Source as Event Source\n    participant Bus as Message Bus\n    participant Router as Event Router\n    participant Proc as Event Processor\n    participant Store as Event Store\n    participant Consumer as Service Consumer\n    participant External as External System\n    \n    Source->>Bus: Publish Event\n    Bus->>Router: Route Event\n    Router->>Proc: Process Event\n    Proc->>Store: Persist Event\n    Store->>Consumer: Notify Subscribers\n    Consumer->>External: Trigger Integration\n    External-->>Consumer: Acknowledgment\n    Consumer-->>Store: Update Status\n```\n\n#### 6.3.5.2 Blockchain Event Processing Flow\n\n```mermaid\nflowchart TD\n    A[Smart Contract Event] --> B[Event Listener]\n    B --> C[Event Validation]\n    C --> D{Valid Event?}\n    D -->|Yes| E[Event Enrichment]\n    D -->|No| F[Error Logging]\n    \n    E --> G[Business Logic Processing]\n    G --> H[Database Update]\n    H --> I[Cache Invalidation]\n    I --> J[Notification Generation]\n    \n    J --> K[Internal Services]\n    J --> L[External Systems]\n    J --> M[User Notifications]\n    \n    F --> N[Dead Letter Queue]\n    N --> O[Manual Review]\n    \n    subgraph \"Parallel Processing\"\n        P[Document Service] --> Q[Update Status]\n        R[Tracking Service] --> S[Location Update]\n        T[Finance Service] --> U[Payment Processing]\n    end\n    \n    K --> P\n    K --> R\n    K --> T\n```\n\n#### 6.3.5.3 Error Handling and Recovery Flow\n\n```mermaid\nflowchart TD\n    A[Message Processing] --> B{Success?}\n    B -->|Yes| C[Acknowledge Message]\n    B -->|No| D[Error Analysis]\n    \n    D --> E{Error Type}\n    E -->|Transient| F[Retry Queue]\n    E -->|Permanent| G[Dead Letter Queue]\n    E -->|Critical| H[Alert System]\n    \n    F --> I[Exponential Backoff]\n    I --> J{Max Retries?}\n    J -->|No| K[Retry Processing]\n    J -->|Yes| G\n    \n    G --> L[Manual Review]\n    H --> M[Immediate Notification]\n    \n    K --> A\n    L --> N[Resolution Action]\n    M --> O[On-Call Response]\n    \n    N --> P{Recoverable?}\n    P -->|Yes| Q[Reprocess Message]\n    P -->|No| R[Archive Error]\n    \n    Q --> A\n```\n\nThe Integration Architecture for ShipLedger provides a comprehensive framework for connecting with the complex ecosystem of maritime trade stakeholders. By leveraging popular Ethereum development tools, such as Truffle, Remix, MetaMask, and Hardhat, simplifying the development and deployment processes, the platform ensures seamless integration while maintaining the security and reliability required for global shipping operations.\n\nThe architecture supports superior speed (1400 TPS and higher) and much lower transaction fees, offering a smoother experience for users through BlockDAG's advanced blockchain infrastructure, enabling real-time data exchange and automated processes that transform traditional maritime trade operations.\n\n## 6.4 Security Architecture\n\n### 6.4.1 Authentication Framework\n\n#### 6.4.1.1 Identity Management System\n\nShipLedger implements a comprehensive identity management system designed specifically for the maritime trade ecosystem. BlockDAG is fully Ethereum Virtual Machine (EVM) compatible, allowing for seamless integration and deployment of Ethereum-based smart contracts. Because BlockDAG is EVM-compatible, you can use popular Ethereum wallets like MetaMask and Trust Wallet to manage your BDAG coins and interact with dApps on the network.\n\nThe identity management architecture supports multiple stakeholder types with varying authentication requirements:\n\n| Identity Type | Authentication Method | Verification Level | Use Case |\n|---------------|----------------------|-------------------|----------|\n| **Individual Users** | Multi-factor authentication with biometric support | Standard | Shippers, consignees, port personnel |\n| **Corporate Entities** | Certificate-based authentication + MFA | Enhanced | Shipping companies, banks, customs authorities |\n| **System Integrations** | API key authentication with digital signatures | Service-level | External systems, IoT devices, automated processes |\n| **Blockchain Identities** | SSI Blockchain supports the identity management system, enabling secure and private authorization/authentication | Cryptographic | Smart contract interactions, on-chain operations |\n\n#### 6.4.1.2 Multi-Factor Authentication Implementation\n\nThe platform implements adaptive multi-factor authentication based on risk assessment and user context:\n\n```mermaid\nflowchart TD\n    A[User Login Attempt] --> B[Primary Authentication]\n    B --> C{Risk Assessment}\n    C -->|Low Risk| D[Standard MFA]\n    C -->|Medium Risk| E[Enhanced MFA]\n    C -->|High Risk| F[Advanced MFA + Manual Review]\n    \n    D --> G[SMS/Email OTP]\n    E --> H[Authenticator App + Biometric]\n    F --> I[Hardware Token + Admin Approval]\n    \n    G --> J{Authentication Success?}\n    H --> J\n    I --> J\n    \n    J -->|Yes| K[Grant Access]\n    J -->|No| L[Security Alert + Account Lock]\n    \n    subgraph \"Risk Factors\"\n        M[Location Analysis]\n        N[Device Recognition]\n        O[Behavioral Patterns]\n        P[Transaction Value]\n    end\n    \n    C --> M\n    C --> N\n    C --> O\n    C --> P\n```\n\n**MFA Configuration Matrix:**\n\n| Risk Level | Authentication Factors | Session Duration | Additional Verification |\n|------------|----------------------|------------------|------------------------|\n| **Low** | Password + SMS/Email OTP | 8 hours | Device registration |\n| **Medium** | Password + Authenticator App + Biometric | 4 hours | Location verification |\n| **High** | Password + Hardware Token + Biometric + Admin Approval | 2 hours | Manual identity verification |\n| **Critical** | All factors + Blockchain signature + Multi-party approval | 1 hour | Real-time monitoring |\n\n#### 6.4.1.3 Session Management\n\nImplement multi-factor authentication (MFA) for accessing critical systems and performing sensitive operations, adding an extra layer of security. The session management system ensures secure and efficient user sessions across the maritime trade platform:\n\n**Session Architecture:**\n\n```mermaid\nsequenceDiagram\n    participant User as User\n    participant Gateway as API Gateway\n    participant Auth as Auth Service\n    participant Session as Session Store\n    participant BC as Blockchain Service\n    \n    User->>Gateway: Login Request\n    Gateway->>Auth: Validate Credentials\n    Auth->>Auth: Generate JWT Token\n    Auth->>Session: Store Session Data\n    Auth->>BC: Record Authentication Event\n    Auth-->>Gateway: Return JWT + Refresh Token\n    Gateway-->>User: Authentication Success\n    \n    Note over User,BC: Subsequent API Calls\n    \n    User->>Gateway: API Request + JWT\n    Gateway->>Session: Validate Session\n    Session-->>Gateway: Session Valid\n    Gateway->>BC: Execute Operation\n    BC-->>Gateway: Operation Result\n    Gateway-->>User: API Response\n```\n\n**Session Security Controls:**\n\n| Control Type | Implementation | Security Benefit | Configuration |\n|--------------|----------------|------------------|---------------|\n| **Token Expiration** | JWT with 15-minute expiry | Limits exposure window | Configurable per user role |\n| **Refresh Token Rotation** | New refresh token on each use | Prevents token replay attacks | 7-day maximum lifetime |\n| **Session Binding** | IP address and device fingerprinting | Prevents session hijacking | Strict binding for high-risk users |\n| **Concurrent Session Limits** | Maximum 3 active sessions per user | Reduces unauthorized access risk | Role-based limits |\n\n#### 6.4.1.4 Token Handling and Security\n\nThe platform implements secure token handling practices aligned with maritime industry security requirements:\n\n**JWT Token Structure:**\n\n```json\n{\n  \"header\": {\n    \"alg\": \"RS256\",\n    \"typ\": \"JWT\",\n    \"kid\": \"shibledger-key-2024\"\n  },\n  \"payload\": {\n    \"sub\": \"user_maritime_12345\",\n    \"iss\": \"https://auth.shibledger.com\",\n    \"aud\": \"https://api.shibledger.com\",\n    \"exp\": 1699200000,\n    \"iat\": 1699113600,\n    \"jti\": \"unique-token-id\",\n    \"scope\": \"shipments:read shipments:write documents:sign\",\n    \"company_id\": \"MAERSK_001\",\n    \"role\": \"operations_manager\",\n    \"clearance_level\": \"confidential\",\n    \"blockchain_address\": \"0x742d35Cc6634C0532925a3b8D4C0532925a3b8D4\",\n    \"permissions\": [\n      \"create_shipment\",\n      \"view_company_shipments\",\n      \"sign_documents\",\n      \"access_tracking_data\"\n    ]\n  }\n}\n```\n\n**Token Security Measures:**\n\n| Security Measure | Implementation | Purpose | Monitoring |\n|------------------|----------------|---------|------------|\n| **Digital Signatures** | RSA-256 with key rotation | Token integrity verification | Key usage analytics |\n| **Audience Validation** | Strict audience checking | Prevent token misuse | Invalid audience alerts |\n| **Scope Limitation** | Granular permission scopes | Principle of least privilege | Permission usage tracking |\n| **Blockchain Integration** | Token validation on-chain | Immutable authentication record | On-chain verification logs |\n\n#### 6.4.1.5 Password Policies and Management\n\nComprehensive password policies ensure strong authentication security across all user types:\n\n**Password Policy Matrix:**\n\n| User Category | Minimum Length | Complexity Requirements | Rotation Period | History Limit |\n|---------------|----------------|------------------------|-----------------|---------------|\n| **Standard Users** | 12 characters | Upper, lower, numbers, symbols | 90 days | 12 passwords |\n| **Privileged Users** | 16 characters | Enhanced complexity + passphrase | 60 days | 24 passwords |\n| **System Administrators** | 20 characters | Maximum complexity + hardware token | 30 days | 36 passwords |\n| **Service Accounts** | 32 characters | Cryptographically generated | 180 days | 12 passwords |\n\n**Password Security Controls:**\n\n```mermaid\nflowchart TD\n    A[Password Creation/Change] --> B[Complexity Validation]\n    B --> C{Meets Policy?}\n    C -->|No| D[Reject with Guidance]\n    C -->|Yes| E[Breach Database Check]\n    E --> F{Previously Breached?}\n    F -->|Yes| G[Require Different Password]\n    F -->|No| H[Hash with bcrypt]\n    H --> I[Store Securely]\n    I --> J[Enable MFA Requirement]\n    \n    D --> A\n    G --> A\n```\n\n### 6.4.2 Authorization System\n\n#### 6.4.2.1 Role-Based Access Control (RBAC)\n\nFor example, a Bill of Lading is exchanged between participants in the network, whose rights are coded. Each transaction is encrypted using a key which links relevant participants. ShipLedger implements a sophisticated RBAC system tailored for maritime trade operations:\n\n**Maritime Industry Role Hierarchy:**\n\n```mermaid\ngraph TB\n    subgraph \"Organizational Roles\"\n        A[System Administrator] --> B[Company Administrator]\n        B --> C[Department Manager]\n        C --> D[Operations Staff]\n        D --> E[External Partners]\n    end\n    \n    subgraph \"Functional Roles\"\n        F[Shipper] --> G[Freight Forwarder]\n        G --> H[Carrier]\n        H --> I[Port Authority]\n        I --> J[Customs Officer]\n        J --> K[Financial Institution]\n    end\n    \n    subgraph \"Permission Inheritance\"\n        L[Read Permissions] --> M[Write Permissions]\n        M --> N[Approve Permissions]\n        N --> O[Admin Permissions]\n    end\n    \n    A --> F\n    B --> G\n    C --> H\n```\n\n**Role Permission Matrix:**\n\n| Role | Shipment Management | Document Access | Financial Operations | System Administration |\n|------|-------------------|-----------------|---------------------|----------------------|\n| **Shipper** | Create, View Own | Create Instructions, View BoL | Initiate Payments | None |\n| **Carrier** | View Assigned, Update Status | Create BoL, Sign Documents | View Payment Status | None |\n| **Port Authority** | View Port-Related | View Customs Documents | None | Port System Config |\n| **Customs Officer** | View for Clearance | Access All Trade Docs | None | Customs System Config |\n| **Bank Representative** | View Financial Data | Access Financial Documents | Process Payments | None |\n| **System Admin** | Full Access | Full Access | View Only | Full System Access |\n\n#### 6.4.2.2 Permission Management Framework\n\nThe permission management system provides granular control over resource access:\n\n**Permission Categories:**\n\n| Permission Type | Granularity Level | Implementation | Audit Requirements |\n|----------------|-------------------|----------------|-------------------|\n| **Resource Permissions** | Individual shipments, documents | Smart contract-based | Full audit trail |\n| **Functional Permissions** | Create, read, update, delete operations | API gateway enforcement | Operation logging |\n| **Data Permissions** | Field-level access control | Database and API level | Data access logs |\n| **Temporal Permissions** | Time-based access restrictions | Session and token management | Time-based audit |\n\n**Dynamic Permission Assignment:**\n\n```mermaid\nsequenceDiagram\n    participant User as User\n    participant System as ShipLedger System\n    participant RBAC as RBAC Engine\n    participant BC as Blockchain\n    participant Audit as Audit Service\n    \n    User->>System: Request Resource Access\n    System->>RBAC: Check User Permissions\n    RBAC->>BC: Verify Blockchain Permissions\n    BC-->>RBAC: Permission Status\n    RBAC->>RBAC: Apply Business Rules\n    RBAC-->>System: Permission Decision\n    System->>Audit: Log Access Decision\n    System-->>User: Grant/Deny Access\n```\n\n#### 6.4.2.3 Resource Authorization Controls\n\nOnce the CCC employee is authenticated and authorized to access the data stored within the Maritime Blockchain, they begin retrieving the Vessel's general information via the ReadVesselData function. ReadVesselData function enables a CCC employee to access and review data stored on the Blockchain pertaining to a specific Vessel.\n\n**Resource-Level Authorization Matrix:**\n\n| Resource Type | Access Control Method | Granularity | Blockchain Integration |\n|---------------|----------------------|-------------|----------------------|\n| **Shipment Data** | Owner-based + role permissions | Individual shipment level | Smart contract enforcement |\n| **Documents** | Multi-party signatures + access lists | Document and field level | Immutable access records |\n| **Financial Records** | Bank relationship + compliance rules | Transaction level | Payment contract validation |\n| **Tracking Data** | Stakeholder involvement + geographic rules | Event and location level | Real-time blockchain updates |\n\n#### 6.4.2.4 Policy Enforcement Points\n\nThe system implements multiple policy enforcement points to ensure comprehensive security:\n\n**Enforcement Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"Client Layer\"\n        A[Web Application] --> D[Policy Enforcement]\n        B[Mobile App] --> D\n        C[API Clients] --> D\n    end\n    \n    subgraph \"Gateway Layer\"\n        D --> E[API Gateway PEP]\n        E --> F[Authentication Check]\n        F --> G[Authorization Check]\n    end\n    \n    subgraph \"Service Layer\"\n        G --> H[Service-Level PEP]\n        H --> I[Business Logic Validation]\n        I --> J[Resource Access Control]\n    end\n    \n    subgraph \"Data Layer\"\n        J --> K[Database PEP]\n        K --> L[Field-Level Security]\n        L --> M[Blockchain Validation]\n    end\n```\n\n**Policy Enforcement Configuration:**\n\n| Enforcement Point | Policy Type | Response Time | Failure Handling |\n|------------------|-------------|---------------|------------------|\n| **API Gateway** | Authentication, rate limiting, basic authorization | <50ms | Immediate rejection |\n| **Service Layer** | Business rules, resource permissions | <200ms | Graceful degradation |\n| **Database Layer** | Data access, field-level security | <100ms | Secure fallback |\n| **Blockchain Layer** | Smart contract permissions, immutable rules | <2s | Transaction revert |\n\n#### 6.4.2.5 Audit Logging and Compliance\n\nThis highlights the critical need for developers to prioritize smart contract security and implement best practices such as secure coding, regular testing, and access control.\n\n**Comprehensive Audit Framework:**\n\n```mermaid\nflowchart TD\n    A[User Action] --> B[Policy Enforcement Point]\n    B --> C[Authorization Decision]\n    C --> D[Action Execution]\n    D --> E[Audit Log Generation]\n    \n    E --> F[Local Audit Store]\n    E --> G[Centralized SIEM]\n    E --> H[Blockchain Audit Trail]\n    E --> I[Compliance Reporting]\n    \n    F --> J[Real-time Monitoring]\n    G --> K[Security Analytics]\n    H --> L[Immutable Evidence]\n    I --> M[Regulatory Reports]\n```\n\n**Audit Log Structure:**\n\n```json\n{\n  \"timestamp\": \"2024-11-04T15:30:00Z\",\n  \"event_id\": \"audit_12345\",\n  \"user_id\": \"maritime_user_001\",\n  \"session_id\": \"sess_abcdef123456\",\n  \"action\": \"document_access\",\n  \"resource\": \"bill_of_lading_BL2024001\",\n  \"resource_owner\": \"MAERSK_001\",\n  \"authorization_result\": \"granted\",\n  \"policy_applied\": \"shipper_document_access_v2.1\",\n  \"ip_address\": \"203.0.113.42\",\n  \"user_agent\": \"ShipLedger-Web/2.1.0\",\n  \"blockchain_tx\": \"0x1234567890abcdef\",\n  \"compliance_flags\": [\"SOX\", \"GDPR\", \"MARITIME_SECURITY\"],\n  \"risk_score\": 0.2,\n  \"additional_context\": {\n    \"shipment_id\": \"SHIP_2024_001234\",\n    \"document_type\": \"bill_of_lading\",\n    \"access_reason\": \"status_update\"\n  }\n}\n```\n\n### 6.4.3 Data Protection\n\n#### 6.4.3.1 Encryption Standards and Implementation\n\nAll records are individually encrypted. Any validated record in a blockchain is irreversible and cannot be changed. The documents exchanged in real-time on the blockchain cannot be altered, which reduces the risk of fraud.\n\n**Encryption Strategy Matrix:**\n\n| Data Classification | Encryption Standard | Key Management | Performance Impact |\n|-------------------|-------------------|----------------|-------------------|\n| **Public Data** | TLS 1.3 in transit | Automated certificate management | Minimal |\n| **Internal Data** | AES-256-GCM at rest, TLS 1.3 in transit | Hardware Security Module (HSM) | Low |\n| **Confidential Data** | AES-256-GCM + field-level encryption | HSM with key escrow | Medium |\n| **Restricted Data** | AES-256-GCM + application-level encryption | Multi-party key management | High |\n\n**Encryption Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"Data at Rest\"\n        A[Database Encryption] --> B[AES-256-GCM]\n        C[File System Encryption] --> D[Full Disk Encryption]\n        E[Backup Encryption] --> F[AES-256 + Key Rotation]\n    end\n    \n    subgraph \"Data in Transit\"\n        G[API Communications] --> H[TLS 1.3]\n        I[Blockchain Transactions] --> J[Elliptic Curve Cryptography]\n        K[Internal Services] --> L[mTLS]\n    end\n    \n    subgraph \"Data in Processing\"\n        M[Application Layer] --> N[Field-Level Encryption]\n        O[Smart Contracts] --> P[On-Chain Encryption]\n        Q[Analytics] --> R[Homomorphic Encryption]\n    end\n```\n\n#### 6.4.3.2 Key Management System\n\nThe key management system ensures secure generation, distribution, and lifecycle management of cryptographic keys:\n\n**Key Management Architecture:**\n\n| Key Type | Generation Method | Storage Location | Rotation Schedule | Access Control |\n|----------|------------------|------------------|-------------------|----------------|\n| **Master Keys** | Hardware Security Module | HSM with backup | Annual | Multi-party authorization |\n| **Data Encryption Keys** | PBKDF2 with salt | HSM-protected key store | Quarterly | Role-based access |\n| **API Keys** | Cryptographically secure random | Encrypted database | Monthly | Service-specific |\n| **Blockchain Keys** | Hierarchical Deterministic (HD) | Hardware wallets | As needed | Multi-signature |\n\n**Key Lifecycle Management:**\n\n```mermaid\nstateDiagram-v2\n    [*] --> KeyGeneration\n    KeyGeneration --> Active : Deploy\n    Active --> Rotation : Schedule/Compromise\n    Active --> Revoked : Security Incident\n    Rotation --> Active : New Key Deployed\n    Revoked --> Archived : Grace Period\n    Archived --> Destroyed : Retention Expired\n    Destroyed --> [*]\n    \n    note right of KeyGeneration\n        HSM-generated with\n        cryptographic randomness\n    end note\n    \n    note right of Rotation\n        Zero-downtime key rotation\n        with backward compatibility\n    end note\n```\n\n#### 6.4.3.3 Data Masking and Anonymization\n\n**Data Masking Strategy:**\n\n| Data Type | Masking Method | Use Case | Reversibility |\n|-----------|----------------|----------|---------------|\n| **Personal Identifiers** | Format-preserving encryption | Development/testing | Yes, with key |\n| **Financial Data** | Tokenization | Analytics | Yes, with token vault |\n| **Location Data** | Geographic generalization | Reporting | No |\n| **Commercial Data** | Synthetic data generation | Machine learning | No |\n\n**Anonymization Techniques:**\n\n```mermaid\nflowchart TD\n    A[Original Data] --> B{Data Classification}\n    B -->|PII| C[Pseudonymization]\n    B -->|Financial| D[Tokenization]\n    B -->|Location| E[Geographic Masking]\n    B -->|Commercial| F[Synthetic Generation]\n    \n    C --> G[Encrypted Identifier]\n    D --> H[Random Token]\n    E --> I[Generalized Location]\n    F --> J[Artificial Data]\n    \n    G --> K[Secure Key Store]\n    H --> L[Token Vault]\n    I --> M[Anonymized Dataset]\n    J --> M\n```\n\n#### 6.4.3.4 Secure Communication Protocols\n\n**Communication Security Matrix:**\n\n| Communication Type | Protocol | Authentication | Encryption | Certificate Management |\n|-------------------|----------|----------------|------------|----------------------|\n| **Client-Server** | HTTPS/TLS 1.3 | Certificate-based | AES-256-GCM | Automated renewal |\n| **Service-to-Service** | mTLS | Mutual certificates | ChaCha20-Poly1305 | Service mesh managed |\n| **Blockchain** | Custom protocol | Digital signatures | Elliptic curve | Hardware wallet |\n| **External APIs** | HTTPS + OAuth 2.0 | JWT tokens | TLS 1.3 | Third-party managed |\n\n#### 6.4.3.5 Compliance Controls and Standards\n\n**Regulatory Compliance Framework:**\n\n| Regulation | Applicable Data | Control Requirements | Implementation |\n|------------|----------------|---------------------|----------------|\n| **GDPR** | Personal data of EU citizens | Consent, right to erasure, data portability | Privacy-by-design architecture |\n| **SOX** | Financial records | Data integrity, audit trails | Immutable blockchain records |\n| **HIPAA** | Health-related shipping data | Access controls, encryption | Field-level encryption |\n| **Maritime Security Regulations** | Vessel and cargo data | Secure transmission, access logging | End-to-end encryption |\n\n**Compliance Monitoring Dashboard:**\n\n```mermaid\ngraph TB\n    subgraph \"Compliance Monitoring\"\n        A[Data Classification Scanner] --> D[Compliance Dashboard]\n        B[Access Pattern Analyzer] --> D\n        C[Encryption Status Monitor] --> D\n    end\n    \n    subgraph \"Automated Controls\"\n        D --> E[Policy Enforcement]\n        D --> F[Violation Detection]\n        D --> G[Remediation Triggers]\n    end\n    \n    subgraph \"Reporting\"\n        E --> H[Compliance Reports]\n        F --> I[Incident Reports]\n        G --> J[Audit Evidence]\n    end\n```\n\n### 6.4.4 Security Architecture Diagrams\n\n#### 6.4.4.1 Authentication Flow Diagram\n\n```mermaid\nsequenceDiagram\n    participant User as Maritime User\n    participant Client as Client Application\n    participant Gateway as API Gateway\n    participant Auth as Authentication Service\n    participant MFA as MFA Service\n    participant HSM as Hardware Security Module\n    participant BC as Blockchain Service\n    participant Session as Session Store\n    \n    User->>Client: Login Request\n    Client->>Gateway: Authentication Request\n    Gateway->>Auth: Validate Credentials\n    Auth->>Auth: Check Password Policy\n    Auth->>MFA: Initiate MFA Challenge\n    MFA->>User: Send MFA Challenge\n    User->>MFA: Provide MFA Response\n    MFA->>Auth: MFA Validation Result\n    Auth->>HSM: Generate JWT Token\n    HSM-->>Auth: Signed JWT Token\n    Auth->>BC: Record Authentication Event\n    Auth->>Session: Store Session Data\n    Auth-->>Gateway: Return JWT + Refresh Token\n    Gateway-->>Client: Authentication Success\n    Client-->>User: Access Granted\n    \n    Note over User,Session: Subsequent API calls use JWT for authorization\n```\n\n#### 6.4.4.2 Authorization Flow Diagram\n\n```mermaid\nflowchart TD\n    A[API Request with JWT] --> B[API Gateway]\n    B --> C[Token Validation]\n    C --> D{Token Valid?}\n    D -->|No| E[Return 401 Unauthorized]\n    D -->|Yes| F[Extract User Context]\n    \n    F --> G[RBAC Engine]\n    G --> H[Load User Roles]\n    H --> I[Load Resource Permissions]\n    I --> J[Apply Business Rules]\n    J --> K{Access Authorized?}\n    \n    K -->|No| L[Log Access Denial]\n    K -->|Yes| M[Log Access Grant]\n    \n    L --> N[Return 403 Forbidden]\n    M --> O[Forward to Service]\n    O --> P[Execute Business Logic]\n    P --> Q[Return Response]\n    \n    subgraph \"Blockchain Verification\"\n        R[Smart Contract Check] --> S[On-Chain Permissions]\n        S --> T[Immutable Access Record]\n    end\n    \n    J --> R\n    T --> K\n```\n\n#### 6.4.4.3 Security Zone Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Internet Zone\"\n        A[External Users] --> B[Load Balancer]\n        C[Partner Systems] --> B\n        D[Mobile Applications] --> B\n    end\n    \n    subgraph \"DMZ Zone\"\n        B --> E[Web Application Firewall]\n        E --> F[API Gateway]\n        F --> G[Rate Limiting]\n        G --> H[DDoS Protection]\n    end\n    \n    subgraph \"Application Zone\"\n        H --> I[Authentication Service]\n        I --> J[Authorization Service]\n        J --> K[Business Logic Services]\n        K --> L[Document Management]\n        L --> M[Tracking Service]\n    end\n    \n    subgraph \"Data Zone\"\n        M --> N[Database Cluster]\n        N --> O[Backup Systems]\n        O --> P[Archive Storage]\n    end\n    \n    subgraph \"Blockchain Zone\"\n        Q[BlockDAG Network] --> R[Smart Contracts]\n        R --> S[Consensus Nodes]\n        S --> T[Distributed Ledger]\n    end\n    \n    subgraph \"Management Zone\"\n        U[Security Operations Center] --> V[SIEM System]\n        V --> W[Incident Response]\n        W --> X[Compliance Monitoring]\n    end\n    \n    K --> Q\n    I --> U\n    \n    style A fill:#ffcccc\n    style B fill:#ffffcc\n    style E fill:#ccffcc\n    style I fill:#ccccff\n    style N fill:#ffccff\n    style Q fill:#ccffff\n    style U fill:#ffcc99\n```\n\n#### 6.4.4.4 Data Flow Security Architecture\n\n```mermaid\nflowchart TD\n    subgraph \"Data Ingestion\"\n        A[External Data Sources] --> B[Input Validation]\n        B --> C[Data Sanitization]\n        C --> D[Encryption Gateway]\n    end\n    \n    subgraph \"Processing Layer\"\n        D --> E[Encrypted Data Processing]\n        E --> F[Business Logic Validation]\n        F --> G[Smart Contract Interaction]\n    end\n    \n    subgraph \"Storage Layer\"\n        G --> H[Encrypted Database]\n        H --> I[Blockchain Storage]\n        I --> J[Backup Encryption]\n    end\n    \n    subgraph \"Access Layer\"\n        K[User Request] --> L[Authentication]\n        L --> M[Authorization]\n        M --> N[Data Decryption]\n        N --> O[Response Encryption]\n    end\n    \n    subgraph \"Monitoring Layer\"\n        P[Security Monitoring] --> Q[Threat Detection]\n        Q --> R[Incident Response]\n        R --> S[Audit Logging]\n    end\n    \n    H --> N\n    E --> P\n    G --> P\n    O --> T[Secure Response]\n    \n    style D fill:#ff9999\n    style E fill:#99ff99\n    style H fill:#9999ff\n    style L fill:#ffff99\n    style P fill:#ff99ff\n```\n\n### 6.4.5 Security Control Matrix\n\n#### 6.4.5.1 Technical Security Controls\n\n| Control Category | Control Name | Implementation Level | Effectiveness Rating |\n|------------------|--------------|---------------------|---------------------|\n| **Access Control** | Multi-factor Authentication | Application + Infrastructure | High |\n| **Access Control** | Role-Based Access Control | Application | High |\n| **Access Control** | Privileged Access Management | Infrastructure | Medium |\n| **Encryption** | Data at Rest Encryption | Database + File System | High |\n| **Encryption** | Data in Transit Encryption | Network + Application | High |\n| **Encryption** | Key Management | Hardware Security Module | High |\n| **Network Security** | Web Application Firewall | Infrastructure | Medium |\n| **Network Security** | DDoS Protection | Infrastructure | Medium |\n| **Network Security** | Network Segmentation | Infrastructure | High |\n\n#### 6.4.5.2 Administrative Security Controls\n\n| Control Category | Control Name | Implementation Level | Compliance Requirement |\n|------------------|--------------|---------------------|----------------------|\n| **Policy Management** | Security Policies and Procedures | Organizational | SOX, GDPR |\n| **Training** | Security Awareness Training | Personnel | All Regulations |\n| **Incident Response** | Security Incident Response Plan | Organizational | Maritime Security |\n| **Risk Management** | Regular Security Risk Assessments | Organizational | SOX |\n| **Vendor Management** | Third-Party Security Assessments | Organizational | GDPR |\n| **Compliance** | Regular Compliance Audits | Organizational | All Regulations |\n\n#### 6.4.5.3 Physical Security Controls\n\n| Control Category | Control Name | Implementation Level | Monitoring Method |\n|------------------|--------------|---------------------|------------------|\n| **Facility Security** | Data Center Physical Access Control | Infrastructure | Badge readers, CCTV |\n| **Environmental** | Environmental Monitoring | Infrastructure | Automated sensors |\n| **Hardware Security** | Hardware Security Modules | Infrastructure | Tamper detection |\n| **Media Protection** | Secure Media Handling | Operational | Chain of custody |\n\n### 6.4.6 Threat Model and Risk Assessment\n\n#### 6.4.6.1 Maritime-Specific Threat Landscape\n\nHowever, critical infrastructures face greater cyber security risks as they become more interconnected. The threat posed by cyber criminals and state-sponsored actors is more significant than ever, and the shipping sector's central role in global supply chains makes it a prime target for cyberattacks.\n\n| Threat Category | Threat Actor | Attack Vector | Impact Level | Mitigation Strategy |\n|----------------|--------------|---------------|--------------|-------------------|\n| **Cyber Espionage** | State-sponsored actors | Advanced persistent threats | Critical | Multi-layered defense, threat intelligence |\n| **Financial Fraud** | Organized crime | Document forgery, payment manipulation | High | Blockchain immutability, multi-signature |\n| **Supply Chain Attacks** | Various actors | Third-party compromise | High | Vendor security assessments |\n| **Insider Threats** | Malicious employees | Privileged access abuse | Medium | Behavioral monitoring, least privilege |\n\n#### 6.4.6.2 Risk Assessment Matrix\n\n| Risk Category | Probability | Impact | Risk Level | Treatment Strategy |\n|---------------|-------------|--------|------------|-------------------|\n| **Smart Contract Vulnerabilities** | Medium | Critical | High | implement best practices such as secure coding, regular testing, and access control. By investing in smart contract security, businesses and individuals can reduce the risk of financial loss and reputational damage |\n| **Data Breach** | Low | High | Medium | Encryption, access controls, monitoring |\n| **System Availability** | Medium | High | Medium | Redundancy, disaster recovery |\n| **Regulatory Non-Compliance** | Low | Medium | Low | Compliance monitoring, regular audits |\n\nThe comprehensive Security Architecture for ShipLedger ensures robust protection of maritime trade operations while leveraging BlockDAG's superior speed (1400 TPS and higher) and much lower transaction fees, offering a smoother experience for users. The multi-layered security approach addresses the unique challenges of the maritime industry while maintaining the performance and scalability required for global shipping operations.\n\n## 6.5 Monitoring and Observability\n\n### 6.5.1 Monitoring Infrastructure\n\n#### 6.5.1.1 Metrics Collection Architecture\n\nTo counter escalating system complexity, organizations should seek observability solutions leveraging AI to expedite troubleshooting. AI can simplify data pipelines, effectively prioritize alerts, and provide crowdsourced insights for faster issue resolution. ShipLedger implements a comprehensive metrics collection system designed specifically for blockchain-powered maritime trade operations.\n\nThe monitoring infrastructure leverages BlockDAG's superior speed (1400 TPS and higher) and much lower transaction fees to provide real-time visibility into platform performance while maintaining cost efficiency. Grafana provides powerful visualization capabilities, while Prometheus offers robust data collection and storage. Together, they create a comprehensive monitoring and analysis solution with customizable dashboards and advanced querying options.\n\n**Core Metrics Collection Components:**\n\n| Component | Technology | Purpose | Collection Frequency |\n|-----------|------------|---------|---------------------|\n| **Application Metrics** | Prometheus + Custom Exporters | API performance, business KPIs | 15-second intervals |\n| **Blockchain Metrics** | BlockDAG Node Exporter | Transaction throughput, gas usage, smart contract events | 30-second intervals |\n| **Infrastructure Metrics** | Node Exporter, cAdvisor | System resources, container performance | 10-second intervals |\n| **Business Metrics** | Custom Maritime Exporters | Shipment processing, document creation, payment settlement | 1-minute intervals |\n\n**Metrics Collection Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"Data Sources\"\n        A[ShipLedger APIs] --> E[Prometheus Server]\n        B[BlockDAG Nodes] --> E\n        C[Container Infrastructure] --> E\n        D[External Maritime Systems] --> E\n    end\n    \n    subgraph \"Collection Layer\"\n        E --> F[Metrics Storage]\n        E --> G[Alert Manager]\n        E --> H[Recording Rules]\n    end\n    \n    subgraph \"Processing Layer\"\n        F --> I[Data Retention Policies]\n        G --> J[Alert Routing]\n        H --> K[Metric Aggregation]\n    end\n    \n    subgraph \"Visualization Layer\"\n        I --> L[Grafana Dashboards]\n        J --> M[Notification Channels]\n        K --> L\n    end\n```\n\n#### 6.5.1.2 Log Aggregation System\n\nDevOps culture is based on collaborative, consistent, and continuous delivery, and centralized logging plays an important role in it. The log aggregation system provides comprehensive visibility into maritime trade operations across all platform components.\n\n**Log Aggregation Architecture:**\n\n```mermaid\nflowchart TD\n    A[Application Logs] --> D[Log Aggregation Pipeline]\n    B[Blockchain Logs] --> D\n    C[Infrastructure Logs] --> D\n    \n    D --> E[Log Processing]\n    E --> F[Log Enrichment]\n    F --> G[Log Storage]\n    \n    G --> H[Elasticsearch Cluster]\n    H --> I[Kibana Dashboards]\n    H --> J[Log Analytics]\n    \n    subgraph \"Log Sources\"\n        K[API Gateway Logs] --> A\n        L[Microservice Logs] --> A\n        M[Smart Contract Events] --> B\n        N[Transaction Logs] --> B\n        O[System Logs] --> C\n        P[Security Logs] --> C\n    end\n```\n\n**Log Collection Specifications:**\n\n| Log Category | Format | Retention Period | Processing Requirements |\n|--------------|--------|------------------|------------------------|\n| **Application Logs** | Structured JSON | 30 days searchable, 1 year archived | Real-time indexing, full-text search |\n| **Blockchain Events** | Smart contract events + transaction data | Permanent on-chain, 90 days off-chain | Event parsing, business logic correlation |\n| **Security Logs** | SIEM-compatible format | 7 years for compliance | Threat detection, anomaly analysis |\n| **Audit Logs** | Immutable format with blockchain anchoring | 10 years for maritime regulations | Compliance reporting, forensic analysis |\n\n#### 6.5.1.3 Distributed Tracing Implementation\n\nA thorough understanding of the telemetry life cycle — the life of a span, metric or log — is key, from setting up configuration to emitting signals and any modifications or processing done before getting stored. The distributed tracing system provides end-to-end visibility across complex maritime trade workflows.\n\n**Tracing Architecture:**\n\n| Tracing Component | Technology | Coverage | Performance Impact |\n|------------------|------------|----------|-------------------|\n| **Trace Collection** | OpenTelemetry + Jaeger | All microservices, blockchain interactions | <2% CPU overhead |\n| **Span Processing** | Jaeger Collector | Request flows, database queries, external API calls | <1% latency increase |\n| **Trace Storage** | Elasticsearch backend | 7 days detailed, 30 days sampled | Configurable sampling rates |\n| **Trace Analysis** | Jaeger UI + Custom dashboards | Performance bottlenecks, error correlation | Real-time query capabilities |\n\n#### 6.5.1.4 Alert Management Framework\n\nAlerts can be configured to send notifications for a critical event, like when an application behaves outside of predefined parameters. It detects important events in the system and alerts the responsible party. An alert system ensures that developers know when something has to be fixed so they can stay focused on other tasks.\n\n**Alert Management Architecture:**\n\n```mermaid\ngraph TB\n    subgraph \"Alert Sources\"\n        A[Prometheus Alerts] --> E[Alert Manager]\n        B[Log-based Alerts] --> E\n        C[Blockchain Alerts] --> E\n        D[External System Alerts] --> E\n    end\n    \n    subgraph \"Alert Processing\"\n        E --> F[Alert Routing]\n        F --> G[Alert Grouping]\n        G --> H[Alert Suppression]\n        H --> I[Escalation Logic]\n    end\n    \n    subgraph \"Notification Channels\"\n        I --> J[Email Notifications]\n        I --> K[Slack Integration]\n        I --> L[PagerDuty Escalation]\n        I --> M[SMS Alerts]\n    end\n    \n    subgraph \"Alert Response\"\n        N[Runbook Automation] --> O[Self-Healing Actions]\n        P[Incident Creation] --> Q[Response Tracking]\n    end\n    \n    J --> N\n    K --> P\n    L --> P\n    M --> P\n```\n\n#### 6.5.1.5 Dashboard Design Strategy\n\nAnalyze and visualize data: Gain actionable insights through data analysis and visualization tools. The dashboard design follows maritime industry best practices with role-based access and real-time updates.\n\n**Dashboard Hierarchy:**\n\n| Dashboard Level | Target Audience | Update Frequency | Key Metrics |\n|----------------|-----------------|------------------|-------------|\n| **Executive Dashboard** | C-level executives, business stakeholders | 5-minute intervals | Business KPIs, revenue metrics, compliance status |\n| **Operational Dashboard** | Operations managers, port authorities | 1-minute intervals | Shipment status, processing times, system health |\n| **Technical Dashboard** | DevOps engineers, system administrators | 15-second intervals | Infrastructure metrics, error rates, performance |\n| **Compliance Dashboard** | Regulatory officers, auditors | Daily updates | Audit trails, compliance violations, regulatory metrics |\n\n### 6.5.2 Observability Patterns\n\n#### 6.5.2.1 Health Check Implementation\n\nThe health check system provides comprehensive status monitoring across all platform components with maritime-specific validations:\n\n**Health Check Architecture:**\n\n```mermaid\nflowchart TD\n    A[Load Balancer] --> B[Health Check Endpoint]\n    B --> C{Component Status}\n    \n    C -->|Healthy| D[API Gateway Health]\n    C -->|Degraded| E[Partial Service Mode]\n    C -->|Unhealthy| F[Service Unavailable]\n    \n    D --> G[Microservice Health Checks]\n    G --> H[Database Connectivity]\n    G --> I[Blockchain Node Status]\n    G --> J[External API Health]\n    \n    H --> K[MongoDB Cluster Status]\n    I --> L[BlockDAG Network Health]\n    J --> M[Port Authority API Status]\n    \n    subgraph \"Health Check Types\"\n        N[Liveness Probes] --> O[Service Running]\n        P[Readiness Probes] --> Q[Service Ready]\n        R[Startup Probes] --> S[Service Initialized]\n    end\n```\n\n**Health Check Specifications:**\n\n| Component | Check Type | Interval | Timeout | Failure Threshold |\n|-----------|------------|----------|---------|------------------|\n| **API Gateway** | HTTP endpoint | 10 seconds | 5 seconds | 3 consecutive failures |\n| **Microservices** | Kubernetes probes | 15 seconds | 3 seconds | 3 consecutive failures |\n| **Database** | Connection pool status | 30 seconds | 10 seconds | 2 consecutive failures |\n| **Blockchain** | Node synchronization | 60 seconds | 30 seconds | 5 consecutive failures |\n\n#### 6.5.2.2 Performance Metrics Framework\n\nErrors: Monitors failed requests and system failures, enabling teams to detect and resolve issues quickly. Saturation: Assesses resource usage and capacity limits, ensuring the system operates efficiently without being overwhelmed. Latency: Measures the response time of a system or service, ensuring minimal delays for users. Traffic: Tracks the volume of incoming requests and overall system load, helping identify potential bottlenecks.\n\n**Golden Signals for Maritime Trade Platform:**\n\n| Signal Category | Metrics | Target Values | Alert Thresholds |\n|----------------|---------|---------------|------------------|\n| **Latency** | API response time, blockchain confirmation time | <2s API, <30s blockchain | >5s API, >60s blockchain |\n| **Traffic** | Requests per second, shipments processed per hour | 1000 RPS, 100 shipments/hour | >80% capacity |\n| **Errors** | Error rate, failed transactions, document processing failures | <1% error rate | >5% error rate |\n| **Saturation** | CPU usage, memory usage, blockchain gas usage | <70% utilization | >85% utilization |\n\n#### 6.5.2.3 Business Metrics Monitoring\n\nMaritime-specific business metrics provide insights into operational efficiency and regulatory compliance:\n\n**Business Metrics Dashboard:**\n\n```mermaid\ngraph TB\n    subgraph \"Shipment Metrics\"\n        A[Shipments Created] --> D[Business Intelligence]\n        B[Documents Processed] --> D\n        C[Payments Settled] --> D\n    end\n    \n    subgraph \"Performance Metrics\"\n        E[Processing Time] --> F[SLA Compliance]\n        G[Error Rates] --> F\n        H[Customer Satisfaction] --> F\n    end\n    \n    subgraph \"Compliance Metrics\"\n        I[Regulatory Adherence] --> J[Audit Reports]\n        K[Security Incidents] --> J\n        L[Data Privacy Compliance] --> J\n    end\n    \n    D --> M[Executive Reporting]\n    F --> M\n    J --> M\n```\n\n**Key Business Metrics:**\n\n| Metric Category | Specific Metrics | Measurement Method | Business Impact |\n|----------------|------------------|-------------------|-----------------|\n| **Operational Efficiency** | Document processing time, shipment completion rate | Time-series analysis | Cost reduction, customer satisfaction |\n| **Financial Performance** | Payment settlement time, transaction fees, cost savings | Financial tracking | Revenue optimization, cost control |\n| **Compliance Status** | Regulatory violations, audit findings, security incidents | Compliance monitoring | Risk mitigation, regulatory adherence |\n| **Customer Experience** | User satisfaction scores, platform adoption rates | User analytics | Business growth, retention |\n\n#### 6.5.2.4 SLA Monitoring Framework\n\nA structured SLA delivery contract offers your shipping operations four main benefits: Enhanced reliability: SLAs provide a benchmark for on-time delivery and consistency and outline measures for expectations not met. Improved accountability: Proper documentation defines higher collaboration standards between retailers and carriers, ensuring shipment tracking and audited performance.\n\n**SLA Monitoring Architecture:**\n\n| SLA Category | Metric | Target | Measurement | Penalty |\n|-------------|--------|--------|-------------|---------|\n| **API Availability** | Uptime percentage | 99.9% | Continuous monitoring | Service credits |\n| **Response Time** | API response latency | <2 seconds | Real-time measurement | Performance penalties |\n| **Data Accuracy** | Document processing accuracy | 99.95% | Quality validation | Error correction costs |\n| **Security** | Security incident response time | <15 minutes | Incident tracking | Compliance penalties |\n\n#### 6.5.2.5 Capacity Tracking System\n\nAs part of the growing observability trend, companies are adopting smarter data collection methods to reduce unnecessary data and lower storage costs. By sampling key traces, storing only important logs, and moving less critical data to lower-cost storage, businesses can cut costs by 60-80%. These strategies help preserve valuable insights on slow response times, error trends, and system performance while reducing spending and improving query efficiency.\n\n**Capacity Planning Metrics:**\n\n```mermaid\ngraph TB\n    subgraph \"Resource Monitoring\"\n        A[CPU Utilization] --> D[Capacity Forecasting]\n        B[Memory Usage] --> D\n        C[Storage Consumption] --> D\n    end\n    \n    subgraph \"Business Growth\"\n        E[User Growth Rate] --> F[Demand Prediction]\n        G[Transaction Volume] --> F\n        H[Data Growth] --> F\n    end\n    \n    subgraph \"Scaling Decisions\"\n        D --> I[Auto-scaling Triggers]\n        F --> I\n        I --> J[Resource Provisioning]\n        I --> K[Cost Optimization]\n    end\n```\n\n### 6.5.3 Incident Response\n\n#### 6.5.3.1 Alert Routing Strategy\n\nThe Mean Time To Recovery (MTTR) for production issues has seen a gradual increase. The number of respondents to our Pulse survey who said it took multiple hours to resolve production issues rose from 41% in 2021 to 64% in 2022 and hit a whopping 73% in 2023. It's a major issue that's getting worse in spite of the numerous tools at the disposal of most organizations.\n\n**Alert Routing Flow:**\n\n```mermaid\nflowchart TD\n    A[Alert Generated] --> B{Alert Severity}\n    \n    B -->|Critical| C[Immediate Escalation]\n    B -->|High| D[Primary On-Call]\n    B -->|Medium| E[Team Notification]\n    B -->|Low| F[Ticket Creation]\n    \n    C --> G[PagerDuty Escalation]\n    D --> H[Slack + Email]\n    E --> I[Email Notification]\n    F --> J[JIRA Ticket]\n    \n    G --> K[SMS + Phone Call]\n    H --> L[15-minute Escalation]\n    I --> M[4-hour Escalation]\n    J --> N[Next Business Day]\n    \n    subgraph \"Response Teams\"\n        O[Platform Team] --> P[Infrastructure Issues]\n        Q[Blockchain Team] --> R[Smart Contract Issues]\n        S[Maritime Team] --> T[Business Logic Issues]\n        U[Security Team] --> V[Security Incidents]\n    end\n```\n\n**Alert Routing Matrix:**\n\n| Alert Type | Severity | Primary Team | Escalation Time | Notification Method |\n|------------|----------|--------------|-----------------|-------------------|\n| **API Outage** | Critical | Platform Team | Immediate | PagerDuty + SMS |\n| **Blockchain Issues** | High | Blockchain Team | 15 minutes | Slack + Email |\n| **Security Incident** | Critical | Security Team | Immediate | PagerDuty + Phone |\n| **Performance Degradation** | Medium | Platform Team | 1 hour | Email + Slack |\n\n#### 6.5.3.2 Escalation Procedures\n\n**Escalation Timeline:**\n\n| Time Elapsed | Action | Responsible Party | Communication |\n|-------------|--------|------------------|---------------|\n| **0 minutes** | Initial alert | Automated system | Primary on-call engineer |\n| **15 minutes** | First escalation | On-call engineer | Team lead notification |\n| **30 minutes** | Management escalation | Team lead | Engineering manager |\n| **60 minutes** | Executive escalation | Engineering manager | CTO notification |\n\n#### 6.5.3.3 Runbook Automation\n\n**Automated Response Actions:**\n\n```mermaid\ngraph TB\n    subgraph \"Alert Triggers\"\n        A[High CPU Usage] --> E[Runbook Execution]\n        B[Memory Exhaustion] --> E\n        C[Blockchain Lag] --> E\n        D[API Errors] --> E\n    end\n    \n    subgraph \"Automated Actions\"\n        E --> F[Scale Resources]\n        E --> G[Restart Services]\n        E --> H[Switch Traffic]\n        E --> I[Collect Diagnostics]\n    end\n    \n    subgraph \"Validation\"\n        F --> J[Health Check]\n        G --> J\n        H --> J\n        I --> K[Manual Review]\n    end\n    \n    J --> L{Issue Resolved?}\n    L -->|Yes| M[Close Alert]\n    L -->|No| N[Human Escalation]\n```\n\n**Runbook Categories:**\n\n| Issue Type | Automated Actions | Success Rate | Manual Fallback |\n|------------|------------------|---------------|-----------------|\n| **Resource Exhaustion** | Auto-scaling, load balancing | 85% | Manual resource allocation |\n| **Service Failures** | Service restart, traffic rerouting | 75% | Manual investigation |\n| **Database Issues** | Connection pool reset, failover | 90% | Database administrator intervention |\n| **Blockchain Problems** | Node switching, transaction retry | 70% | Blockchain team escalation |\n\n#### 6.5.3.4 Post-Mortem Processes\n\n**Post-Mortem Workflow:**\n\n| Phase | Duration | Activities | Deliverables |\n|-------|----------|------------|--------------|\n| **Immediate Response** | 0-4 hours | Incident containment, service restoration | Incident summary |\n| **Investigation** | 1-3 days | Root cause analysis, timeline reconstruction | Technical analysis |\n| **Documentation** | 3-5 days | Post-mortem report, lessons learned | Formal report |\n| **Follow-up** | 2-4 weeks | Action item implementation, process improvements | Improvement plan |\n\n#### 6.5.3.5 Improvement Tracking\n\nOn average, companies suffer two high-impact outages per month with an average MTTR of 30 minutes or more. These outages result in more than $7 million in losses per year due to hidden costs such as troubleshooting resources, customers dropping out, damaged reputation and more.\n\n**Improvement Metrics:**\n\n```mermaid\ngraph TB\n    subgraph \"Incident Metrics\"\n        A[MTTR Tracking] --> D[Performance Dashboard]\n        B[Incident Frequency] --> D\n        C[Resolution Quality] --> D\n    end\n    \n    subgraph \"Process Improvements\"\n        D --> E[Runbook Updates]\n        D --> F[Alert Tuning]\n        D --> G[Training Programs]\n    end\n    \n    subgraph \"Outcome Measurement\"\n        E --> H[Reduced MTTR]\n        F --> I[Fewer False Positives]\n        G --> J[Improved Response Quality]\n    end\n```\n\n### 6.5.4 Monitoring Architecture Diagrams\n\n#### 6.5.4.1 Comprehensive Monitoring Stack\n\n```mermaid\ngraph TB\n    subgraph \"Application Layer\"\n        A[ShipLedger APIs] --> B[Custom Metrics]\n        C[Microservices] --> D[Application Logs]\n        E[Smart Contracts] --> F[Blockchain Events]\n    end\n    \n    subgraph \"Collection Layer\"\n        B --> G[Prometheus]\n        D --> H[Fluentd]\n        F --> I[BlockDAG Exporter]\n    end\n    \n    subgraph \"Storage Layer\"\n        G --> J[Prometheus TSDB]\n        H --> K[Elasticsearch]\n        I --> L[Blockchain Analytics DB]\n    end\n    \n    subgraph \"Visualization Layer\"\n        J --> M[Grafana Dashboards]\n        K --> N[Kibana Dashboards]\n        L --> O[Custom Maritime Dashboards]\n    end\n    \n    subgraph \"Alerting Layer\"\n        M --> P[Alert Manager]\n        N --> Q[ElastAlert]\n        O --> R[Custom Alerts]\n    end\n    \n    subgraph \"Response Layer\"\n        P --> S[PagerDuty]\n        Q --> T[Slack Integration]\n        R --> U[Email Notifications]\n    end\n```\n\n#### 6.5.4.2 Alert Flow Architecture\n\n```mermaid\nsequenceDiagram\n    participant M as Monitoring System\n    participant AM as Alert Manager\n    participant PD as PagerDuty\n    participant OC as On-Call Engineer\n    participant TL as Team Lead\n    participant EM as Engineering Manager\n    \n    M->>AM: Threshold Exceeded\n    AM->>AM: Evaluate Alert Rules\n    AM->>PD: Send Alert\n    PD->>OC: Notify Primary On-Call\n    \n    alt Response within 15 minutes\n        OC->>PD: Acknowledge Alert\n        OC->>M: Investigate Issue\n        OC->>AM: Resolve Alert\n    else No response after 15 minutes\n        PD->>TL: Escalate to Team Lead\n        alt Response within 30 minutes\n            TL->>PD: Acknowledge Alert\n            TL->>OC: Coordinate Response\n        else No response after 30 minutes\n            PD->>EM: Escalate to Manager\n            EM->>TL: Emergency Response\n        end\n    end\n```\n\n#### 6.5.4.3 Dashboard Layout Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Executive Dashboard\"\n        A[Business KPIs] --> B[Revenue Metrics]\n        C[Compliance Status] --> D[Risk Indicators]\n        E[Customer Satisfaction] --> F[Growth Metrics]\n    end\n    \n    subgraph \"Operational Dashboard\"\n        G[Shipment Processing] --> H[Document Status]\n        I[Payment Settlement] --> J[Port Operations]\n        K[System Health] --> L[Performance Metrics]\n    end\n    \n    subgraph \"Technical Dashboard\"\n        M[Infrastructure Metrics] --> N[Application Performance]\n        O[Blockchain Status] --> P[Database Health]\n        Q[Security Monitoring] --> R[Error Tracking]\n    end\n    \n    subgraph \"Compliance Dashboard\"\n        S[Audit Trails] --> T[Regulatory Reports]\n        U[Security Incidents] --> V[Data Privacy]\n        W[Maritime Compliance] --> X[International Standards]\n    end\n```\n\n### 6.5.5 SLA Requirements and Monitoring\n\n#### 6.5.5.1 Service Level Objectives\n\nA service level agreement (SLA) is a contract between a supplier and its customer that defines the quality and reliability of a provided service. In logistics, these agreements are established between shippers and a supply chain services provider, such as a carrier or a third-party logistics company, setting performance expectations and outlining the penalties for missed commitments.\n\n**Platform SLA Matrix:**\n\n| Service Component | Availability Target | Response Time Target | Error Rate Target | Measurement Period |\n|------------------|-------------------|---------------------|-------------------|-------------------|\n| **API Gateway** | 99.95% | <500ms (95th percentile) | <0.1% | Monthly |\n| **Document Processing** | 99.9% | <2 seconds | <0.5% | Monthly |\n| **Blockchain Operations** | 99.5% | <30 seconds | <1% | Monthly |\n| **Real-time Tracking** | 99.8% | <1 second | <0.2% | Monthly |\n\n#### 6.5.5.2 Maritime Industry SLA Requirements\n\n**Regulatory Compliance SLAs:**\n\n| Compliance Area | Requirement | Monitoring Method | Penalty Structure |\n|----------------|-------------|-------------------|-------------------|\n| **Data Retention** | 7-year minimum for maritime records | Automated compliance checks | Regulatory fines |\n| **Security Response** | <15 minutes for critical incidents | Real-time incident tracking | Service credits |\n| **Audit Trail** | 100% transaction logging | Blockchain verification | Compliance violations |\n| **Privacy Protection** | GDPR compliance for EU operations | Privacy impact assessments | Legal penalties |\n\n#### 6.5.5.3 Performance Monitoring SLAs\n\n**Operational Performance Targets:**\n\n```mermaid\ngraph TB\n    subgraph \"Response Time SLAs\"\n        A[API Calls: <500ms] --> D[SLA Dashboard]\n        B[Document Processing: <2s] --> D\n        C[Blockchain Tx: <30s] --> D\n    end\n    \n    subgraph \"Availability SLAs\"\n        E[Platform: 99.95%] --> F[Uptime Monitoring]\n        G[Services: 99.9%] --> F\n        H[Database: 99.99%] --> F\n    end\n    \n    subgraph \"Business SLAs\"\n        I[Shipment Processing: <1 hour] --> J[Business Metrics]\n        K[Payment Settlement: <24 hours] --> J\n        L[Document Verification: <5 minutes] --> J\n    end\n    \n    D --> M[SLA Reporting]\n    F --> M\n    J --> M\n```\n\n#### 6.5.5.4 SLA Violation Handling\n\n**Violation Response Process:**\n\n| Violation Severity | Response Time | Actions Required | Stakeholder Notification |\n|-------------------|---------------|------------------|-------------------------|\n| **Critical** | Immediate | Emergency response, service restoration | All stakeholders + executives |\n| **High** | <15 minutes | Incident response, root cause analysis | Operations team + management |\n| **Medium** | <1 hour | Investigation, corrective action | Technical team |\n| **Low** | <4 hours | Monitoring, trend analysis | Internal team only |\n\nThe comprehensive Monitoring and Observability framework for ShipLedger ensures robust visibility into all aspects of the blockchain-powered maritime trade platform. In 2024, the hope is that machines will play a more reliable role in parsing through observability data, reducing the burden on human analysis. By leveraging modern observability practices and maritime industry-specific requirements, the platform maintains high availability, performance, and compliance while supporting the complex needs of global shipping operations.\n\n## 6.6 Testing Strategy\n\n### 6.6.1 Testing Approach\n\n#### 6.6.1.1 Unit Testing\n\nShipLedger implements a comprehensive unit testing strategy that addresses the unique challenges of blockchain-powered maritime trade applications. Smart contract unit testing is crucial for blockchain developers. This catches bugs early, saving you time and money.\n\n**Testing Frameworks and Tools**\n\n| Component | Testing Framework | Version | Justification |\n|-----------|------------------|---------|---------------|\n| **Smart Contracts** | Hardhat + Mocha + Chai | Hardhat 2.19+, Mocha 10.2+, Chai 4.3+ | Hardhat: A development environment for Ethereum that facilitates easy debugging and deployment of smart contracts. Truffle: A widely-used framework for Ethereum that simplifies smart contract development and testing. It includes a built-in testing framework that supports both JavaScript and Solidity tests |\n| **Backend Services** | pytest + pytest-asyncio | pytest 7.4+, pytest-asyncio 0.21+ | Comprehensive Python testing with async support for maritime trade workflows |\n| **Frontend Components** | Jest + React Testing Library | Jest 29.7+, RTL 14.0+ | Modern React component testing with user-centric approach |\n| **API Endpoints** | Supertest + Mocha | Supertest 6.3+, Mocha 10.2+ | HTTP assertion library for Node.js API testing |\n\n**Test Organization Structure**\n\n```\ntests/\n├── unit/\n│   ├── smart-contracts/\n│   │   ├── ShipmentContract.test.js\n│   │   ├── BillOfLadingContract.test.js\n│   │   ├── TradeFinanceContract.test.js\n│   │   └── ComplianceContract.test.js\n│   ├── backend/\n│   │   ├── services/\n│   │   │   ├── test_document_service.py\n│   │   │   ├── test_tracking_service.py\n│   │   │   └── test_blockchain_service.py\n│   │   └── utils/\n│   │       ├── test_validation.py\n│   │       └── test_encryption.py\n│   └── frontend/\n│       ├── components/\n│       │   ├── Dashboard.test.tsx\n│       │   ├── ShipmentList.test.tsx\n│       │   └── DocumentViewer.test.tsx\n│       └── hooks/\n│           ├── useShipment.test.ts\n│           └── useBlockchain.test.ts\n```\n\n**Mocking Strategy**\n\nThe mocking strategy addresses the complexity of blockchain and external maritime system interactions:\n\n| Mock Category | Implementation | Purpose | Tools Used |\n|---------------|----------------|---------|------------|\n| **Blockchain Interactions** | Ganache – A locally deployed blockchain simulator. Ganache features a graphical user interface that can simulate blockchain networks and live-test Smart Contracts without requiring you to set up real test networks or using a remote network | Local blockchain simulation | Ganache CLI, Hardhat Network |\n| **External APIs** | HTTP mocking with predefined responses | Port authority, customs, banking API simulation | Nock.js, responses (Python) |\n| **Database Operations** | In-memory database instances | Fast, isolated database testing | MongoDB Memory Server, SQLite |\n| **File System** | Virtual file system | Document storage testing | mock-fs, pytest-mock |\n\n**Code Coverage Requirements**\n\n| Component Type | Minimum Coverage | Target Coverage | Critical Path Coverage |\n|----------------|------------------|-----------------|----------------------|\n| **Smart Contracts** | 90% | 95% | 100% |\n| **Backend Services** | 85% | 90% | 100% |\n| **Frontend Components** | 80% | 85% | 95% |\n| **Utility Functions** | 95% | 98% | 100% |\n\n**Test Naming Conventions**\n\n```javascript\n// Smart Contract Tests\ndescribe('ShipmentContract', () => {\n  describe('createShipment', () => {\n    it('should create shipment with valid data', async () => {\n      // Test implementation\n    });\n    \n    it('should revert when shipper address is invalid', async () => {\n      // Test implementation\n    });\n    \n    it('should emit ShipmentCreated event', async () => {\n      // Test implementation\n    });\n  });\n});\n\n// Backend Service Tests\nclass TestDocumentService:\n    def test_create_bill_of_lading_success(self):\n        \"\"\"Test successful BoL creation with valid data\"\"\"\n        pass\n    \n    def test_create_bill_of_lading_invalid_cargo_weight(self):\n        \"\"\"Test BoL creation fails with invalid cargo weight\"\"\"\n        pass\n    \n    def test_create_bill_of_lading_missing_shipper_info(self):\n        \"\"\"Test BoL creation fails with missing shipper information\"\"\"\n        pass\n```\n\n**Test Data Management**\n\n```javascript\n// Smart Contract Test Data\nconst testData = {\n  validShipment: {\n    shipmentId: \"SHIP_2024_001234\",\n    shipper: \"0x1234567890123456789012345678901234567890\",\n    carrier: \"0x2345678901234567890123456789012345678901\",\n    consignee: \"0x3456789012345678901234567890123456789012\",\n    cargoWeight: ethers.utils.parseUnits(\"15000\", 0),\n    portOfLoading: \"SGSIN\",\n    portOfDischarge: \"NLRTM\"\n  },\n  \n  invalidShipment: {\n    shipmentId: \"\",\n    shipper: \"0x0000000000000000000000000000000000000000\",\n    cargoWeight: ethers.utils.parseUnits(\"-1\", 0)\n  }\n};\n\n// Backend Test Fixtures\n@pytest.fixture\ndef sample_shipment_data():\n    return {\n        \"shipment_id\": \"SHIP_2024_001234\",\n        \"shipper\": {\n            \"company_id\": \"SHIPPER_001\",\n            \"name\": \"Global Shipping Corp\"\n        },\n        \"cargo\": {\n            \"description\": \"Electronics Components\",\n            \"weight\": {\"value\": 15000, \"unit\": \"kg\"},\n            \"container_numbers\": [\"TCLU1234567\"]\n        }\n    }\n```\n\n#### 6.6.1.2 Integration Testing\n\nIntegration testing ensures seamless interaction between ShipLedger's microservices, blockchain components, and external maritime systems.\n\n**Service Integration Test Approach**\n\n```mermaid\ngraph TB\n    subgraph \"Integration Test Layers\"\n        A[API Integration Tests] --> B[Service-to-Service Tests]\n        B --> C[Blockchain Integration Tests]\n        C --> D[External System Integration Tests]\n    end\n    \n    subgraph \"Test Environment\"\n        E[Docker Compose] --> F[Test Containers]\n        F --> G[Mock Services]\n        G --> H[Test Blockchain Network]\n    end\n    \n    subgraph \"Data Flow Testing\"\n        I[Document Creation Flow] --> J[Tracking Event Flow]\n        J --> K[Payment Processing Flow]\n        K --> L[Compliance Verification Flow]\n    end\n    \n    A --> E\n    B --> I\n```\n\n**API Testing Strategy**\n\nNewman is a powerful command-line companion tool for Postman, one of the most widely used REST API testing tools. While Postman simplifies API development and testing with its intuitive interface, Newman extends its capabilities by allowing developers and testers to automate API tests directly from the terminal\n\n| API Category | Testing Tool | Test Scope | Automation Level |\n|--------------|--------------|------------|------------------|\n| **REST APIs** | Postman + Newman | CRUD operations, authentication, error handling | This makes Newman an ideal solution for integrating Postman collections into CI/CD pipelines, enhancing the reliability and scalability of API testing while promoting streamlined and consistent test execution. Newman significantly enhances the API testing process by integrating Postman into CI/CD CI/CD ( Continuous integration and continuous deployments ) pipelines |\n| **GraphQL APIs** | Apollo Client Testing | Query validation, mutation testing, subscription testing | Automated with custom test runners |\n| **WebSocket APIs** | Socket.IO Client | Real-time event testing, connection handling | Automated with event simulation |\n| **Blockchain APIs** | Web3.js + Custom Framework | Smart contract interaction, transaction validation | Automated with blockchain test networks |\n\n**Database Integration Testing**\n\n```python\n# Database Integration Test Example\nimport pytest\nfrom pymongo import MongoClient\nfrom shipledger.services.document_service import DocumentService\nfrom shipledger.blockchain.contract_service import ContractService\n\n@pytest.fixture\ndef integration_test_db():\n    \"\"\"Setup test database for integration tests\"\"\"\n    client = MongoClient('mongodb://localhost:27017/')\n    db = client.test_shipledger\n    yield db\n    client.drop_database('test_shipledger')\n\n@pytest.fixture\ndef test_blockchain():\n    \"\"\"Setup test blockchain network\"\"\"\n    from ganache import Ganache\n    ganache = Ganache()\n    ganache.start()\n    yield ganache\n    ganache.stop()\n\nclass TestDocumentBlockchainIntegration:\n    def test_document_creation_with_blockchain_anchoring(\n        self, integration_test_db, test_blockchain\n    ):\n        \"\"\"Test document creation with blockchain anchoring\"\"\"\n        # Initialize services\n        doc_service = DocumentService(integration_test_db)\n        contract_service = ContractService(test_blockchain.web3)\n        \n        # Create document\n        document_data = {\n            \"type\": \"bill_of_lading\",\n            \"shipment_id\": \"SHIP_2024_001234\",\n            \"content\": {\"shipper\": \"Global Shipping Corp\"}\n        }\n        \n        # Test integration flow\n        document = doc_service.create_document(document_data)\n        tx_hash = contract_service.anchor_document(\n            document['id'], \n            document['hash']\n        )\n        \n        # Verify integration\n        assert document['blockchain_tx'] == tx_hash\n        assert contract_service.verify_document(\n            document['id'], \n            document['hash']\n        )\n```\n\n**External Service Mocking**\n\n```javascript\n// External API Mock Setup\nconst nock = require('nock');\n\ndescribe('Port Authority Integration', () => {\n  beforeEach(() => {\n    // Mock Port Authority API\n    nock('https://api.portauthority.com')\n      .post('/vessel-arrival')\n      .reply(200, {\n        status: 'success',\n        berth_assignment: 'BERTH_A1',\n        estimated_handling_time: '4 hours'\n      });\n    \n    // Mock Customs API\n    nock('https://api.customs.gov')\n      .post('/declaration')\n      .reply(200, {\n        declaration_number: 'DECL_2024_001234',\n        status: 'under_review',\n        estimated_clearance: '2024-11-05T10:00:00Z'\n      });\n  });\n\n  afterEach(() => {\n    nock.cleanAll();\n  });\n\n  it('should process vessel arrival with port authority', async () => {\n    const shipmentService = new ShipmentService();\n    const result = await shipmentService.processVesselArrival({\n      shipmentId: 'SHIP_2024_001234',\n      vesselIMO: 'IMO1234567',\n      portCode: 'SGSIN'\n    });\n\n    expect(result.berthAssignment).toBe('BERTH_A1');\n    expect(result.customsDeclaration).toBe('DECL_2024_001234');\n  });\n});\n```\n\n**Test Environment Management**\n\n```yaml\n# docker-compose.test.yml\nversion: '3.8'\nservices:\n  mongodb:\n    image: mongo:7.0\n    environment:\n      MONGO_INITDB_DATABASE: test_shipledger\n    ports:\n      - \"27017:27017\"\n  \n  redis:\n    image: redis:7.2\n    ports:\n      - \"6379:6379\"\n  \n  ganache:\n    image: trufflesuite/ganache:latest\n    ports:\n      - \"8545:8545\"\n    command: >\n      --deterministic\n      --accounts 10\n      --hardfork istanbul\n      --gasLimit 12000000\n  \n  shipledger-api:\n    build: .\n    environment:\n      NODE_ENV: test\n      MONGODB_URI: mongodb://mongodb:27017/test_shipledger\n      REDIS_URI: redis://redis:6379\n      BLOCKCHAIN_RPC: http://ganache:8545\n    depends_on:\n      - mongodb\n      - redis\n      - ganache\n    ports:\n      - \"3000:3000\"\n```\n\n#### 6.6.1.3 End-to-End Testing\n\nPlaywright, Selenium, and Cypress are powerful frameworks for test automation. Choosing the right one involves considering several factors, including the technical expertise of the team, ease of use, and seamless integration with CI\\CD pipelines, which are critical for finding the optimal solution\n\n**E2E Test Scenarios**\n\n| Scenario Category | Test Cases | User Journey | Expected Outcome |\n|------------------|------------|--------------|------------------|\n| **Complete Shipment Lifecycle** | Create shipment → Generate BoL → Track cargo → Process payment → Complete delivery | Shipper creates shipment, carrier generates BoL, all parties track progress, payment processed automatically | End-to-end transparency and automation |\n| **Multi-Party Document Signing** | Document creation → Multi-party review → Digital signatures → Blockchain anchoring | Multiple stakeholders review and sign documents digitally | Legally binding digital documentation |\n| **Exception Handling** | Route deviation → Stakeholder notification → Document updates → Re-routing approval | System handles unexpected changes gracefully | Automated exception management |\n| **Compliance Verification** | Customs declaration → Automated screening → Clearance processing → Release authorization | Automated compliance checking and clearance | Regulatory compliance automation |\n\n**UI Automation Approach**\n\nPlaywright, a relatively new tool, is an open-source framework developed by Microsoft for end-to-end testing and is currently the fastest available option. Playwright supports most modern rendering browsers, such as Mozilla Firefox, Chromium, and WebKit. Its popularity is steadily increasing, enabling fast, efficient, and reliable cross-browser testing\n\n```typescript\n// Playwright E2E Test Example\nimport { test, expect } from '@playwright/test';\n\ntest.describe('ShipLedger Complete Workflow', () => {\n  test('should complete full shipment lifecycle', async ({ page, context }) => {\n    // Setup test data\n    const shipmentData = {\n      shipmentId: 'SHIP_2024_E2E_001',\n      shipper: 'Global Shipping Corp',\n      consignee: 'European Imports Inc',\n      cargo: 'Electronics Components'\n    };\n\n    // Step 1: Shipper creates shipment\n    await page.goto('/dashboard');\n    await page.click('[data-testid=\"create-shipment\"]');\n    await page.fill('[data-testid=\"shipper-name\"]', shipmentData.shipper);\n    await page.fill('[data-testid=\"consignee-name\"]', shipmentData.consignee);\n    await page.fill('[data-testid=\"cargo-description\"]', shipmentData.cargo);\n    await page.click('[data-testid=\"submit-shipment\"]');\n\n    // Verify shipment creation\n    await expect(page.locator('[data-testid=\"success-message\"]'))\n      .toContainText('Shipment created successfully');\n\n    // Step 2: Generate Bill of Lading\n    await page.click('[data-testid=\"generate-bol\"]');\n    await page.waitForSelector('[data-testid=\"bol-preview\"]');\n    \n    // Verify BoL content\n    await expect(page.locator('[data-testid=\"bol-shipper\"]'))\n      .toContainText(shipmentData.shipper);\n    await expect(page.locator('[data-testid=\"bol-cargo\"]'))\n      .toContainText(shipmentData.cargo);\n\n    // Step 3: Multi-party signing simulation\n    const carrierPage = await context.newPage();\n    await carrierPage.goto(`/documents/${shipmentData.shipmentId}`);\n    await carrierPage.click('[data-testid=\"sign-document\"]');\n    await carrierPage.fill('[data-testid=\"signature-password\"]', 'carrier123');\n    await carrierPage.click('[data-testid=\"confirm-signature\"]');\n\n    // Step 4: Track shipment progress\n    await page.goto(`/tracking/${shipmentData.shipmentId}`);\n    await expect(page.locator('[data-testid=\"shipment-status\"]'))\n      .toContainText('In Transit');\n\n    // Verify real-time tracking\n    await page.waitForSelector('[data-testid=\"tracking-map\"]');\n    await expect(page.locator('[data-testid=\"current-location\"]'))\n      .toBeVisible();\n\n    // Step 5: Payment processing\n    await page.goto(`/finance/${shipmentData.shipmentId}`);\n    await expect(page.locator('[data-testid=\"payment-status\"]'))\n      .toContainText('Pending');\n    \n    // Simulate delivery confirmation\n    await page.click('[data-testid=\"confirm-delivery\"]');\n    await page.waitForTimeout(2000); // Wait for blockchain confirmation\n    \n    await expect(page.locator('[data-testid=\"payment-status\"]'))\n      .toContainText('Completed');\n  });\n});\n```\n\n**Test Data Setup/Teardown**\n\n```javascript\n// E2E Test Data Management\nclass E2ETestDataManager {\n  constructor() {\n    this.testData = new Map();\n    this.cleanupTasks = [];\n  }\n\n  async setupShipmentData(testId) {\n    const shipmentData = {\n      shipmentId: `SHIP_E2E_${testId}_${Date.now()}`,\n      shipper: {\n        companyId: `SHIPPER_E2E_${testId}`,\n        name: 'Test Shipping Company',\n        email: `shipper.${testId}@test.com`\n      },\n      carrier: {\n        companyId: `CARRIER_E2E_${testId}`,\n        name: 'Test Carrier Ltd',\n        vesselIMO: `IMO${testId}123`\n      },\n      consignee: {\n        companyId: `CONSIGNEE_E2E_${testId}`,\n        name: 'Test Consignee Inc'\n      }\n    };\n\n    // Store in database\n    await this.createTestShipment(shipmentData);\n    this.testData.set(testId, shipmentData);\n    \n    // Schedule cleanup\n    this.cleanupTasks.push(() => this.deleteTestShipment(shipmentData.shipmentId));\n    \n    return shipmentData;\n  }\n\n  async setupBlockchainAccounts(testId) {\n    const accounts = await web3.eth.getAccounts();\n    const testAccounts = {\n      shipper: accounts[0],\n      carrier: accounts[1],\n      consignee: accounts[2],\n      portAuthority: accounts[3]\n    };\n\n    // Fund accounts with test tokens\n    for (const [role, address] of Object.entries(testAccounts)) {\n      await this.fundAccount(address, web3.utils.toWei('10', 'ether'));\n    }\n\n    this.testData.set(`${testId}_accounts`, testAccounts);\n    return testAccounts;\n  }\n\n  async cleanup() {\n    // Execute all cleanup tasks\n    for (const cleanupTask of this.cleanupTasks) {\n      try {\n        await cleanupTask();\n      } catch (error) {\n        console.error('Cleanup error:', error);\n      }\n    }\n    \n    this.testData.clear();\n    this.cleanupTasks = [];\n  }\n}\n```\n\n**Performance Testing Requirements**\n\nApache JMeter: Apache JMeter is a popular, open-source load-testing tool that has been a staple in the industry for years. It's known for its flexibility, supporting a wide range of protocols, and offering extensive customization through plugins. JMeter is ideal for testing the performance of web applications, databases, FTP servers, and more\n\n| Performance Metric | Target Value | Testing Tool | Test Scenario |\n|-------------------|--------------|--------------|---------------|\n| **API Response Time** | < 2 seconds (95th percentile) | K6: A modern, open-source load testing tool that allows writing tests in JavaScript. It is widely recognized for its ease of use and high efficiency | 1000 concurrent users |\n| **Blockchain Transaction Confirmation** | < 30 seconds | Custom blockchain load tester | 100 transactions/minute |\n| **Document Processing Time** | < 5 seconds | JMeter | Large document uploads |\n| **Real-time Tracking Updates** | < 1 second latency | WebSocket load testing | 500 concurrent connections |\n\n**Cross-Browser Testing Strategy**\n\n```javascript\n// Playwright Cross-Browser Configuration\nimport { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n  \n  use: {\n    baseURL: 'http://localhost:3000',\n    trace: 'on-first-retry',\n    screenshot: 'only-on-failure',\n    video: 'retain-on-failure'\n  },\n\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n    {\n      name: 'Mobile Chrome',\n      use: { ...devices['Pixel 5'] },\n    },\n    {\n      name: 'Mobile Safari',\n      use: { ...devices['iPhone 12'] },\n    },\n  ],\n\n  webServer: {\n    command: 'npm run start:test',\n    url: 'http://localhost:3000',\n    reuseExistingServer: !process.env.CI,\n  },\n});\n```\n\n### 6.6.2 Test Automation\n\n#### 6.6.2.1 CI/CD Integration\n\nThe test automation strategy integrates seamlessly with the continuous integration and deployment pipeline, ensuring comprehensive testing at every stage of development.\n\n**Automated Test Triggers**\n\n```mermaid\nflowchart TD\n    A[Code Commit] --> B[GitHub Actions Trigger]\n    B --> C[Parallel Test Execution]\n    \n    C --> D[Unit Tests]\n    C --> E[Integration Tests]\n    C --> F[Smart Contract Tests]\n    \n    D --> G{All Tests Pass?}\n    E --> G\n    F --> G\n    \n    G -->|Yes| H[Build Docker Images]\n    G -->|No| I[Notify Developers]\n    \n    H --> J[Deploy to Staging]\n    J --> K[E2E Tests]\n    K --> L{E2E Tests Pass?}\n    \n    L -->|Yes| M[Deploy to Production]\n    L -->|No| N[Rollback & Alert]\n    \n    I --> O[Block Deployment]\n    N --> O\n```\n\n**GitHub Actions Workflow Configuration**\n\n```yaml\n# .github/workflows/test-and-deploy.yml\nname: ShipLedger Test and Deploy\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\nenv:\n  NODE_VERSION: '20'\n  PYTHON_VERSION: '3.11'\n\njobs:\n  unit-tests:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        test-type: [smart-contracts, backend, frontend]\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: ${{ env.NODE_VERSION }}\n          cache: 'npm'\n      \n      - name: Setup Python\n        if: matrix.test-type == 'backend'\n        uses: actions/setup-python@v4\n        with:\n          python-version: ${{ env.PYTHON_VERSION }}\n      \n      - name: Install dependencies\n        run: |\n          npm ci\n          if [ \"${{ matrix.test-type }}\" == \"backend\" ]; then\n            pip install -r requirements.txt\n          fi\n      \n      - name: Run Smart Contract Tests\n        if: matrix.test-type == 'smart-contracts'\n        run: |\n          npx hardhat test\n          npx hardhat coverage\n      \n      - name: Run Backend Tests\n        if: matrix.test-type == 'backend'\n        run: |\n          pytest tests/unit/backend/ --cov=src --cov-report=xml\n      \n      - name: Run Frontend Tests\n        if: matrix.test-type == 'frontend'\n        run: |\n          npm run test:coverage\n      \n      - name: Upload Coverage\n        uses: codecov/codecov-action@v3\n        with:\n          file: ./coverage.xml\n          flags: ${{ matrix.test-type }}\n\n  integration-tests:\n    runs-on: ubuntu-latest\n    needs: unit-tests\n    \n    services:\n      mongodb:\n        image: mongo:7.0\n        ports:\n          - 27017:27017\n      redis:\n        image: redis:7.2\n        ports:\n          - 6379:6379\n      ganache:\n        image: trufflesuite/ganache:latest\n        ports:\n          - 8545:8545\n        options: >-\n          --health-cmd \"curl -f http://localhost:8545\"\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: ${{ env.NODE_VERSION }}\n          cache: 'npm'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name: Run Integration Tests\n        env:\n          MONGODB_URI: mongodb://localhost:27017/test_shipledger\n          REDIS_URI: redis://localhost:6379\n          BLOCKCHAIN_RPC: http://localhost:8545\n        run: |\n          npm run test:integration\n          npm run test:api\n\n  e2e-tests:\n    runs-on: ubuntu-latest\n    needs: integration-tests\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: ${{ env.NODE_VERSION }}\n          cache: 'npm'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name: Install Playwright Browsers\n        run: npx playwright install --with-deps\n      \n      - name: Start Application\n        run: |\n          docker-compose -f docker-compose.test.yml up -d\n          npm run wait-for-services\n      \n      - name: Run E2E Tests\n        run: npx playwright test\n      \n      - name: Upload Playwright Report\n        uses: actions/upload-artifact@v3\n        if: always()\n        with:\n          name: playwright-report\n          path: playwright-report/\n          retention-days: 30\n\n  security-tests:\n    runs-on: ubuntu-latest\n    needs: unit-tests\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Run Smart Contract Security Analysis\n        run: |\n          npm install -g @mythx/cli\n          mythx analyze contracts/\n      \n      - name: Run SAST Scan\n        uses: github/super-linter@v4\n        env:\n          DEFAULT_BRANCH: main\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          VALIDATE_SOLIDITY: true\n          VALIDATE_JAVASCRIPT_ES: true\n          VALIDATE_PYTHON: true\n\n  deploy-staging:\n    runs-on: ubuntu-latest\n    needs: [integration-tests, e2e-tests, security-tests]\n    if: github.ref == 'refs/heads/develop'\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Deploy to Staging\n        env:\n          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        run: |\n          aws ecs update-service --cluster staging --service shipledger --force-new-deployment\n      \n      - name: Run Staging E2E Tests\n        run: |\n          STAGING_URL=https://staging.shibledger.com npx playwright test --config=playwright.staging.config.js\n\n  deploy-production:\n    runs-on: ubuntu-latest\n    needs: deploy-staging\n    if: github.ref == 'refs/heads/main'\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Deploy to Production\n        env:\n          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        run: |\n          aws ecs update-service --cluster production --service shipledger --force-new-deployment\n      \n      - name: Run Production Smoke Tests\n        run: |\n          PRODUCTION_URL=https://shibledger.com npx playwright test --config=playwright.smoke.config.js\n```\n\n**Parallel Test Execution**\n\n```javascript\n// Jest Parallel Configuration\nmodule.exports = {\n  testEnvironment: 'node',\n  maxWorkers: '50%',\n  testMatch: [\n    '<rootDir>/tests/unit/**/*.test.js',\n    '<rootDir>/tests/integration/**/*.test.js'\n  ],\n  collectCoverageFrom: [\n    'src/**/*.{js,ts}',\n    '!src/**/*.d.ts',\n    '!src/test-utils/**'\n  ],\n  coverageThreshold: {\n    global: {\n      branches: 80,\n      functions: 85,\n      lines: 85,\n      statements: 85\n    },\n    './src/smart-contracts/': {\n      branches: 90,\n      functions: 95,\n      lines: 95,\n      statements: 95\n    }\n  },\n  setupFilesAfterEnv: ['<rootDir>/tests/setup.js'],\n  testTimeout: 30000\n};\n```\n\n**Test Reporting Requirements**\n\n| Report Type | Format | Frequency | Recipients |\n|-------------|--------|-----------|------------|\n| **Unit Test Results** | JUnit XML + HTML | Every commit | Development team |\n| **Coverage Reports** | Codecov + SonarQube | Every commit | Tech leads, QA team |\n| **E2E Test Results** | Playwright HTML Report | Every deployment | Product team, stakeholders |\n| **Performance Test Results** | K6 HTML + JSON | Weekly + pre-release | DevOps, performance team |\n\n**Failed Test Handling**\n\n```yaml\n# Slack Notification for Failed Tests\n- name: Notify on Test Failure\n  if: failure()\n  uses: 8398a7/action-slack@v3\n  with:\n    status: failure\n    channel: '#shipledger-alerts'\n    text: |\n      🚨 Test Failure Alert\n      Repository: ${{ github.repository }}\n      Branch: ${{ github.ref }}\n      Commit: ${{ github.sha }}\n      Workflow: ${{ github.workflow }}\n      \n      Failed Jobs:\n      - Unit Tests: ${{ needs.unit-tests.result }}\n      - Integration Tests: ${{ needs.integration-tests.result }}\n      - E2E Tests: ${{ needs.e2e-tests.result }}\n      \n      View Details: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}\n  env:\n    SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}\n```\n\n**Flaky Test Management**\n\n```javascript\n// Flaky Test Detection and Retry Logic\nconst { test, expect } = require('@playwright/test');\n\ntest.describe('Flaky Test Management', () => {\n  test('should handle blockchain transaction with retry', async ({ page }) => {\n    // Configure retry for blockchain operations\n    await test.step('Submit transaction with retry', async () => {\n      let attempts = 0;\n      const maxAttempts = 3;\n      \n      while (attempts < maxAttempts) {\n        try {\n          await page.click('[data-testid=\"submit-transaction\"]');\n          await expect(page.locator('[data-testid=\"transaction-success\"]'))\n            .toBeVisible({ timeout: 30000 });\n          break;\n        } catch (error) {\n          attempts++;\n          if (attempts === maxAttempts) throw error;\n          \n          console.log(`Transaction attempt ${attempts} failed, retrying...`);\n          await page.reload();\n          await page.waitForLoadState('networkidle');\n        }\n      }\n    });\n  });\n});\n\n// Flaky Test Quarantine System\nclass FlakyTestManager {\n  constructor() {\n    this.flakyTests = new Set();\n    this.testResults = new Map();\n  }\n\n  recordTestResult(testName, passed, duration) {\n    if (!this.testResults.has(testName)) {\n      this.testResults.set(testName, []);\n    }\n    \n    this.testResults.get(testName).push({\n      passed,\n      duration,\n      timestamp: Date.now()\n    });\n    \n    this.analyzeFlakiness(testName);\n  }\n\n  analyzeFlakiness(testName) {\n    const results = this.testResults.get(testName);\n    if (results.length < 10) return;\n    \n    const recentResults = results.slice(-10);\n    const failureRate = recentResults.filter(r => !r.passed).length / recentResults.length;\n    \n    if (failureRate > 0.2 && failureRate < 0.8) {\n      this.flakyTests.add(testName);\n      console.warn(`Test ${testName} marked as flaky (${failureRate * 100}% failure rate)`);\n    }\n  }\n\n  shouldQuarantine(testName) {\n    return this.flakyTests.has(testName);\n  }\n}\n```\n\n### 6.6.3 Quality Metrics\n\n#### 6.6.3.1 Code Coverage Targets\n\nThe code coverage strategy ensures comprehensive testing across all ShipLedger components with specific targets based on component criticality.\n\n**Coverage Targets by Component**\n\n| Component Category | Line Coverage | Branch Coverage | Function Coverage | Statement Coverage |\n|-------------------|---------------|-----------------|-------------------|-------------------|\n| **Smart Contracts** | 95% | 90% | 98% | 95% |\n| **Blockchain Services** | 90% | 85% | 95% | 90% |\n| **API Endpoints** | 85% | 80% | 90% | 85% |\n| **Business Logic** | 90% | 85% | 95% | 90% |\n| **Utility Functions** | 95% | 90% | 98% | 95% |\n| **UI Components** | 80% | 75% | 85% | 80% |\n\n**Coverage Measurement Tools**\n\n```javascript\n// Smart Contract Coverage (Solidity)\nmodule.exports = {\n  skipFiles: ['Migrations.sol', 'test/'],\n  configureYulOptimizer: true,\n  solcOptimizerDetails: {\n    yul: true,\n    yulDetails: {\n      stackAllocation: true,\n    },\n  },\n  mocha: {\n    timeout: 100000\n  },\n  providerOptions: {\n    mnemonic: \"test test test test test test test test test test test junk\",\n    gasLimit: 12000000,\n    gasPrice: 20000000000\n  }\n};\n\n// Backend Coverage (Python)\n[tool.coverage.run]\nsource = [\"src\"]\nomit = [\n    \"*/tests/*\",\n    \"*/migrations/*\",\n    \"*/venv/*\",\n    \"setup.py\"\n]\n\n[tool.coverage.report]\nexclude_lines = [\n    \"pragma: no cover\",\n    \"def __repr__\",\n    \"raise AssertionError\",\n    \"raise NotImplementedError\"\n]\nprecision = 2\nshow_missing = true\n\n[tool.coverage.html]\ndirectory = \"htmlcov\"\n\n#### Frontend Coverage (Jest)\nmodule.exports = {\n  collectCoverageFrom: [\n    'src/**/*.{js,jsx,ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/index.tsx',\n    '!src/serviceWorker.ts',\n    '!src/test-utils/**'\n  ],\n  coverageThreshold: {\n    global: {\n      branches: 75,\n      functions: 85,\n      lines: 80,\n      statements: 80\n    },\n    './src/components/': {\n      branches: 80,\n      functions: 90,\n      lines: 85,\n      statements: 85\n    }\n  }\n};\n```\n\n**Test Success Rate Requirements**\n\n| Test Category | Target Success Rate | Acceptable Failure Rate | Action Threshold |\n|---------------|-------------------|------------------------|------------------|\n| **Unit Tests** | 99.5% | 0.5% | > 1% failure triggers investigation |\n| **Integration Tests** | 98% | 2% | > 3% failure blocks deployment |\n| **E2E Tests** | 95% | 5% | > 7% failure requires manual review |\n| **Performance Tests** | 90% | 10% | > 15% failure triggers optimization |\n\n**Performance Test Thresholds**\n\nHere's a summary that might help you decide between JMeter and k6. Generating protocol-level load on an application server by scripting complex user flows · Realistic scripting with the use of dynamic think time, test data generation and reuse, and customizable workload models\n\n```javascript\n// K6 Performance Test Configuration\nimport http from 'k6/http';\nimport { check, sleep } from 'k6';\nimport { Rate, Trend } from 'k6/metrics';\n\n// Custom metrics\nconst errorRate = new Rate('errors');\nconst apiResponseTime = new Trend('api_response_time');\n\nexport const options = {\n  stages: [\n    { duration: '2m', target: 100 }, // Ramp up\n    { duration: '5m', target: 100 }, // Stay at 100 users\n    { duration: '2m', target: 200 }, // Ramp up to 200 users\n    { duration: '5m', target: 200 }, // Stay at 200 users\n    { duration: '2m', target: 0 },   // Ramp down\n  ],\n  thresholds: {\n    http_req_duration: ['p(95)<2000'], // 95% of requests under 2s\n    http_req_failed: ['rate<0.05'],    // Error rate under 5%\n    errors: ['rate<0.1'],              // Custom error rate under 10%\n    api_response_time: ['p(90)<1500'], // 90% of API calls under 1.5s\n  },\n};\n\nexport default function () {\n  // Test API endpoints\n  const response = http.get('https://api.shibledger.com/v1/shipments');\n  \n  const success = check(response, {\n    'status is 200': (r) => r.status === 200,\n    'response time < 2s': (r) => r.timings.duration < 2000,\n    'has shipments data': (r) => JSON.parse(r.body).data.length > 0,\n  });\n\n  errorRate.add(!success);\n  apiResponseTime.add(response.timings.duration);\n  \n  sleep(1);\n}\n```\n\n**Quality Gates**\n\n```yaml\n# SonarQube Quality Gate Configuration\nsonar.qualitygate.wait=true\n\n#### Coverage Requirements\nsonar.coverage.exclusions=**/*test*/**,**/migrations/**,**/node_modules/**\nsonar.javascript.lcov.reportPaths=coverage/lcov.info\nsonar.python.coverage.reportPaths=coverage.xml\nsonar.solidity.coverage.reportPaths=coverage/solidity-coverage.json\n\n#### Code Quality Thresholds\nsonar.quality.gate.conditions:\n  - metric: coverage\n    operator: GREATER_THAN\n    value: 80\n  - metric: new_coverage\n    operator: GREATER_THAN\n    value: 85\n  - metric: duplicated_lines_density\n    operator: LESS_THAN\n    value: 3\n  - metric: new_maintainability_rating\n    operator: GREATER_THAN\n    value: A\n  - metric: new_reliability_rating\n    operator: GREATER_THAN\n    value: A\n  - metric: new_security_rating\n    operator: GREATER_THAN\n    value: A\n```\n\n**Documentation Requirements**\n\n| Documentation Type | Coverage Requirement | Update Frequency | Review Process |\n|-------------------|---------------------|------------------|----------------|\n| **API Documentation** | 100% of public endpoints | Every release | Automated generation + manual review |\n| **Smart Contract Documentation** | 100% of public functions | Every contract update | Security team review |\n| **Test Documentation** | All test scenarios documented | Every sprint | QA team review |\n| **Architecture Documentation** | All major components | Quarterly | Architecture review board |\n\n#### 6.6.3.2 Test Execution Flow\n\n```mermaid\nflowchart TD\n    A[Developer Commits Code] --> B[Pre-commit Hooks]\n    B --> C[Lint & Format Check]\n    C --> D{Code Quality OK?}\n    D -->|No| E[Block Commit]\n    D -->|Yes| F[Trigger CI Pipeline]\n    \n    F --> G[Parallel Test Execution]\n    G --> H[Unit Tests]\n    G --> I[Smart Contract Tests]\n    G --> J[Security Scans]\n    \n    H --> K{All Tests Pass?}\n    I --> K\n    J --> K\n    \n    K -->|No| L[Generate Failure Report]\n    K -->|Yes| M[Integration Tests]\n    \n    M --> N{Integration OK?}\n    N -->|No| L\n    N -->|Yes| O[Build & Deploy to Staging]\n    \n    O --> P[E2E Tests on Staging]\n    P --> Q{E2E Tests Pass?}\n    Q -->|No| R[Rollback Staging]\n    Q -->|Yes| S[Performance Tests]\n    \n    S --> T{Performance OK?}\n    T -->|No| U[Performance Alert]\n    T -->|Yes| V[Deploy to Production]\n    \n    L --> W[Notify Development Team]\n    R --> W\n    U --> W\n    \n    V --> X[Production Smoke Tests]\n    X --> Y[Monitor & Alert]\n```\n\n#### 6.6.3.3 Test Environment Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Development Environment\"\n        A[Local Development] --> B[Unit Tests]\n        B --> C[Local Blockchain Network]\n        C --> D[Mock External Services]\n    end\n    \n    subgraph \"CI/CD Environment\"\n        E[GitHub Actions] --> F[Test Containers]\n        F --> G[Ganache Test Network]\n        G --> H[Integration Test Suite]\n    end\n    \n    subgraph \"Staging Environment\"\n        I[Staging Deployment] --> J[BlockDAG Testnet]\n        J --> K[External Service Mocks]\n        K --> L[E2E Test Suite]\n    end\n    \n    subgraph \"Production Environment\"\n        M[Production Deployment] --> N[BlockDAG Mainnet]\n        N --> O[Real External Services]\n        O --> P[Smoke Tests Only]\n    end\n    \n    A --> E\n    H --> I\n    L --> M\n```\n\n#### 6.6.3.4 Test Data Flow Diagrams\n\n```mermaid\nsequenceDiagram\n    participant Dev as Developer\n    participant CI as CI/CD Pipeline\n    participant TestDB as Test Database\n    participant Blockchain as Test Blockchain\n    participant ExtAPI as Mock External APIs\n    \n    Dev->>CI: Push Code\n    CI->>TestDB: Setup Test Data\n    CI->>Blockchain: Deploy Test Contracts\n    CI->>ExtAPI: Configure Mock Responses\n    \n    CI->>CI: Run Unit Tests\n    CI->>TestDB: Execute Integration Tests\n    CI->>Blockchain: Test Smart Contract Interactions\n    CI->>ExtAPI: Validate API Integrations\n    \n    CI->>CI: Generate Test Reports\n    CI->>Dev: Send Results\n    \n    alt Tests Pass\n        CI->>CI: Deploy to Staging\n        CI->>CI: Run E2E Tests\n    else Tests Fail\n        CI->>Dev: Block Deployment\n    end\n    \n    CI->>TestDB: Cleanup Test Data\n    CI->>Blockchain: Reset Test State\n```\n\nThe comprehensive testing strategy for ShipLedger ensures robust quality assurance across all components of the blockchain-powered maritime trade platform. \"The only way to be confident your smart contracts are secure and reliable is to test them meticulously.\" By implementing thorough unit testing, integration testing, and end-to-end testing with modern tools and frameworks, the platform maintains high reliability standards while supporting the complex requirements of global shipping operations.\n\nThe testing approach leverages industry-leading tools like Truffle: A widely-used framework for Ethereum that simplifies smart contract development and testing. It includes a built-in testing framework that supports both JavaScript and Solidity tests for smart contracts, Playwright, a relatively new tool, is an open-source framework developed by Microsoft for end-to-end testing and is currently the fastest available option for UI testing, and K6: A modern, open-source load testing tool that allows writing tests in JavaScript. It is widely recognized for its ease of use and high efficiency for performance testing, ensuring comprehensive coverage of all system components and user workflows.\n\n# 7. User Interface Design\n\n## 7.1 Core UI Technologies\n\n### 7.1.1 Frontend Technology Stack\n\nShipLedger's user interface leverages cutting-edge web technologies to deliver a modern, responsive, and performant maritime trade platform. Modern React 19 starter template with TypeScript, Vite, and Tailwind CSS v4. The platform utilizes the latest versions of industry-standard frameworks to ensure optimal developer experience and user satisfaction.\n\n| Technology | Version | Purpose | Key Benefits |\n|------------|---------|---------|--------------|\n| **React** | 19.0+ | Core UI Framework | React 19's stable release in late 2024 and the continued maturation of the ecosystem, developers now have access to powerful features that streamline development workflows and enhance application performance. |\n| **TypeScript** | 5.0+ | Type Safety & Developer Experience | TypeScript has become an integral part of React development, with many new projects in industry adopting it from the outset. The benefits of using TypeScript with React include type safety by catching type-related errors at compile time rather than runtime, improved developer experience with enhanced IDE support, and self-documenting code with type annotations serving as documentation. |\n| **TailwindCSS** | 4.0+ | Utility-First CSS Framework | Features comprehensive theming system with semantic colors, dark mode support, ESLint/Prettier configuration, and Husky pre-commit hooks. |\n| **Vite** | 5.0+ | Build Tool & Development Server | Fast build times and excellent development experience for modern web applications |\n\n### 7.1.2 React 19 Features Integration\n\nIn React 19, we're adding support for using async functions in transitions to handle pending states, errors, forms, and optimistic updates automatically. For example, you can use useTransition to handle the pending state for you\n\n**Modern React Patterns:**\n\n```typescript\n// React 19 Component Pattern with TypeScript\ninterface ShipmentFormProps {\n  onSubmit: (data: ShipmentData) => Promise<void>;\n  initialData?: Partial<ShipmentData>;\n}\n\nfunction ShipmentForm({ onSubmit, initialData }: ShipmentFormProps) {\n  const [isPending, startTransition] = useTransition();\n  const [formData, setFormData] = useState<ShipmentData>(initialData || {});\n  \n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    startTransition(async () => {\n      await onSubmit(formData);\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <ShipperDetails \n          data={formData.shipper}\n          onChange={(shipper) => setFormData(prev => ({ ...prev, shipper }))}\n        />\n        <CarrierDetails \n          data={formData.carrier}\n          onChange={(carrier) => setFormData(prev => ({ ...prev, carrier }))}\n        />\n      </div>\n      \n      <button \n        type=\"submit\" \n        disabled={isPending}\n        className=\"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 px-6 py-3 rounded-lg text-white font-medium\"\n      >\n        {isPending ? 'Creating Shipment...' : 'Create Shipment'}\n      </button>\n    </form>\n  );\n}\n```\n\n### 7.1.3 TypeScript Integration\n\nReact has always had strong support for TypeScript, and React 19 continues this trend with several improvements that make it even easier to build type-safe applications. Better Type Inference: React 19 improves type inference for hooks, components, and context, reducing the need for manual type annotations. Enhanced Error Messages: TypeScript error messages are now more descriptive and actionable, making it easier to fix type-related issues.\n\n**Type Definitions for Maritime Domain:**\n\n```typescript\n// Core Maritime Types\ninterface ShipmentData {\n  shipmentId: string;\n  shipper: CompanyInfo;\n  carrier: CarrierInfo;\n  consignee: CompanyInfo;\n  cargo: CargoDetails;\n  route: RouteInfo;\n  status: ShipmentStatus;\n  documents: DocumentCollection;\n  tracking: TrackingInfo;\n  finance: FinanceInfo;\n}\n\ninterface CompanyInfo {\n  companyId: string;\n  name: string;\n  address: Address;\n  contact: ContactInfo;\n}\n\ninterface CargoDetails {\n  description: string;\n  hsCode: string;\n  weight: Measurement;\n  volume: Measurement;\n  containerNumbers: string[];\n  hazardousGoods: boolean;\n}\n\ninterface TrackingInfo {\n  currentLocation?: GeoLocation;\n  events: TrackingEvent[];\n  estimatedArrival?: Date;\n}\n\ntype ShipmentStatus = \n  | 'CREATED'\n  | 'DOCUMENTS_GENERATED'\n  | 'IN_TRANSIT'\n  | 'ARRIVED_AT_PORT'\n  | 'CUSTOMS_CLEARED'\n  | 'DELIVERED'\n  | 'COMPLETED';\n\n// Component Props Types\ninterface DashboardProps {\n  userId: string;\n  companyId: string;\n  timeRange: DateRange;\n  refreshInterval?: number;\n}\n\ninterface ShipmentListProps {\n  shipments: ShipmentData[];\n  onShipmentSelect: (shipment: ShipmentData) => void;\n  filters: ShipmentFilters;\n  onFiltersChange: (filters: ShipmentFilters) => void;\n}\n```\n\n### 7.1.4 TailwindCSS 4.0 Implementation\n\nFull support for the new @theme directive and @theme inline option. All components are updated for Tailwind v4 and React 19.\n\n**Theme Configuration:**\n\n```css\n/* globals.css - Tailwind v4 Theme Configuration */\n@import \"tailwindcss\";\n\n@theme {\n  /* Maritime Brand Colors */\n  --color-maritime-blue: #1e40af;\n  --color-maritime-navy: #1e3a8a;\n  --color-ocean-teal: #0d9488;\n  --color-port-gray: #6b7280;\n  --color-cargo-orange: #ea580c;\n  --color-success-green: #059669;\n  --color-warning-amber: #d97706;\n  --color-danger-red: #dc2626;\n  \n  /* Semantic Color System */\n  --color-primary: var(--color-maritime-blue);\n  --color-secondary: var(--color-ocean-teal);\n  --color-accent: var(--color-cargo-orange);\n  \n  /* Status Colors */\n  --color-status-created: var(--color-port-gray);\n  --color-status-in-transit: var(--color-maritime-blue);\n  --color-status-arrived: var(--color-warning-amber);\n  --color-status-cleared: var(--color-success-green);\n  --color-status-completed: var(--color-success-green);\n  \n  /* Component Spacing */\n  --spacing-card: 1.5rem;\n  --spacing-section: 2rem;\n  --spacing-page: 3rem;\n  \n  /* Typography Scale */\n  --font-size-display: 2.25rem;\n  --font-size-heading: 1.875rem;\n  --font-size-subheading: 1.5rem;\n  --font-size-body: 1rem;\n  --font-size-caption: 0.875rem;\n}\n\n/* Dark Mode Support */\n@media (prefers-color-scheme: dark) {\n  @theme {\n    --color-background: #0f172a;\n    --color-surface: #1e293b;\n    --color-text-primary: #f8fafc;\n    --color-text-secondary: #cbd5e1;\n  }\n}\n```\n\n## 7.2 UI Use Cases\n\n### 7.2.1 Primary User Workflows\n\nShipLedger supports comprehensive maritime trade workflows through intuitive user interfaces designed for different stakeholder roles:\n\n| User Role | Primary Use Cases | Key UI Components | Success Metrics |\n|-----------|------------------|-------------------|-----------------|\n| **Shipper** | Create shipments, track cargo, manage documents | Shipment creation wizard, tracking dashboard, document viewer | Time to create shipment < 5 minutes |\n| **Carrier** | Generate Bills of Lading, update shipment status, manage vessel operations | BoL generator, status update forms, vessel dashboard | Document generation < 2 minutes |\n| **Port Authority** | Monitor vessel arrivals, manage berth assignments, process clearances | Port operations dashboard, vessel tracking, clearance workflow | Clearance processing < 30 minutes |\n| **Customs Officer** | Review declarations, process clearances, conduct inspections | Customs dashboard, document review interface, inspection forms | Declaration review < 15 minutes |\n| **Financial Institution** | Process trade finance, manage letters of credit, handle payments | Trade finance dashboard, LC management, payment processing | Payment processing < 24 hours |\n\n### 7.2.2 Shipment Lifecycle Management\n\n**Complete Shipment Creation Workflow:**\n\n```typescript\n// Shipment Creation Wizard Component\ninterface ShipmentWizardProps {\n  onComplete: (shipment: ShipmentData) => Promise<void>;\n  onCancel: () => void;\n}\n\nfunction ShipmentCreationWizard({ onComplete, onCancel }: ShipmentWizardProps) {\n  const [currentStep, setCurrentStep] = useState<WizardStep>('shipper-details');\n  const [shipmentData, setShipmentData] = useState<Partial<ShipmentData>>({});\n  const [isPending, startTransition] = useTransition();\n\n  const steps: WizardStep[] = [\n    'shipper-details',\n    'carrier-selection',\n    'cargo-information',\n    'route-planning',\n    'documentation',\n    'review-submit'\n  ];\n\n  const handleStepComplete = (stepData: Partial<ShipmentData>) => {\n    setShipmentData(prev => ({ ...prev, ...stepData }));\n    const currentIndex = steps.indexOf(currentStep);\n    if (currentIndex < steps.length - 1) {\n      setCurrentStep(steps[currentIndex + 1]);\n    }\n  };\n\n  const handleSubmit = () => {\n    startTransition(async () => {\n      await onComplete(shipmentData as ShipmentData);\n    });\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6\">\n      {/* Progress Indicator */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between\">\n          {steps.map((step, index) => (\n            <div\n              key={step}\n              className={`flex items-center ${\n                index <= steps.indexOf(currentStep)\n                  ? 'text-primary'\n                  : 'text-gray-400'\n              }`}\n            >\n              <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                  index <= steps.indexOf(currentStep)\n                    ? 'bg-primary text-white'\n                    : 'bg-gray-200'\n                }`}\n              >\n                {index + 1}\n              </div>\n              {index < steps.length - 1 && (\n                <div\n                  className={`w-16 h-1 mx-2 ${\n                    index < steps.indexOf(currentStep)\n                      ? 'bg-primary'\n                      : 'bg-gray-200'\n                  }`}\n                />\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Step Content */}\n      <div className=\"bg-white rounded-lg shadow-lg p-8\">\n        {currentStep === 'shipper-details' && (\n          <ShipperDetailsStep\n            data={shipmentData.shipper}\n            onComplete={handleStepComplete}\n          />\n        )}\n        {currentStep === 'carrier-selection' && (\n          <CarrierSelectionStep\n            data={shipmentData.carrier}\n            onComplete={handleStepComplete}\n          />\n        )}\n        {currentStep === 'cargo-information' && (\n          <CargoInformationStep\n            data={shipmentData.cargo}\n            onComplete={handleStepComplete}\n          />\n        )}\n        {currentStep === 'route-planning' && (\n          <RoutePlanningStep\n            data={shipmentData.route}\n            onComplete={handleStepComplete}\n          />\n        )}\n        {currentStep === 'documentation' && (\n          <DocumentationStep\n            data={shipmentData.documents}\n            onComplete={handleStepComplete}\n          />\n        )}\n        {currentStep === 'review-submit' && (\n          <ReviewSubmitStep\n            data={shipmentData}\n            onSubmit={handleSubmit}\n            isPending={isPending}\n          />\n        )}\n      </div>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between mt-6\">\n        <button\n          onClick={onCancel}\n          className=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n        >\n          Cancel\n        </button>\n        <div className=\"space-x-4\">\n          {steps.indexOf(currentStep) > 0 && (\n            <button\n              onClick={() => setCurrentStep(steps[steps.indexOf(currentStep) - 1])}\n              className=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n            >\n              Previous\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n```\n\n### 7.2.3 Real-Time Tracking Interface\n\n**Interactive Tracking Dashboard:**\n\n```typescript\n// Real-Time Tracking Component\ninterface TrackingDashboardProps {\n  shipmentId: string;\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n}\n\nfunction TrackingDashboard({ \n  shipmentId, \n  autoRefresh = true, \n  refreshInterval = 30000 \n}: TrackingDashboardProps) {\n  const [trackingData, setTrackingData] = useState<TrackingInfo | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedEvent, setSelectedEvent] = useState<TrackingEvent | null>(null);\n\n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    const ws = new WebSocket(`wss://api.shibledger.com/v1/tracking/${shipmentId}`);\n    \n    ws.onmessage = (event) => {\n      const update = JSON.parse(event.data);\n      if (update.type === 'location_update') {\n        setTrackingData(prev => prev ? {\n          ...prev,\n          currentLocation: update.location,\n          events: [update.event, ...prev.events]\n        } : null);\n      }\n    };\n\n    return () => ws.close();\n  }, [shipmentId]);\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n      {/* Map View */}\n      <div className=\"lg:col-span-2\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Live Tracking</h2>\n          <div className=\"h-96 bg-gray-100 rounded-lg relative overflow-hidden\">\n            <TrackingMap\n              currentLocation={trackingData?.currentLocation}\n              route={trackingData?.route}\n              events={trackingData?.events}\n              onEventSelect={setSelectedEvent}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Event Timeline */}\n      <div className=\"space-y-6\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Shipment Status</h3>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n              <span className=\"font-medium\">In Transit</span>\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              Last updated: {new Date().toLocaleString()}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Recent Events</h3>\n          <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n            {trackingData?.events.map((event, index) => (\n              <div\n                key={event.id}\n                className={`p-3 rounded-lg cursor-pointer transition-colors ${\n                  selectedEvent?.id === event.id\n                    ? 'bg-blue-50 border border-blue-200'\n                    : 'bg-gray-50 hover:bg-gray-100'\n                }`}\n                onClick={() => setSelectedEvent(event)}\n              >\n                <div className=\"flex justify-between items-start\">\n                  <div>\n                    <div className=\"font-medium text-sm\">{event.type}</div>\n                    <div className=\"text-xs text-gray-600\">{event.location}</div>\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {new Date(event.timestamp).toLocaleTimeString()}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n```\n\n### 7.2.4 Document Management Interface\n\n**Digital Document Viewer with Blockchain Verification:**\n\n```typescript\n// Document Management Component\ninterface DocumentViewerProps {\n  documentId: string;\n  documentType: DocumentType;\n  accessLevel: AccessLevel;\n  onSign?: (signature: string) => Promise<void>;\n}\n\nfunction DocumentViewer({ \n  documentId, \n  documentType, \n  accessLevel, \n  onSign \n}: DocumentViewerProps) {\n  const [document, setDocument] = useState<Document | null>(null);\n  const [verificationStatus, setVerificationStatus] = useState<'pending' | 'verified' | 'failed'>('pending');\n  const [signatures, setSignatures] = useState<Signature[]>([]);\n  const [isSigningModalOpen, setIsSigningModalOpen] = useState(false);\n\n  // Blockchain verification\n  useEffect(() => {\n    const verifyDocument = async () => {\n      try {\n        const isValid = await verifyDocumentOnBlockchain(documentId);\n        setVerificationStatus(isValid ? 'verified' : 'failed');\n      } catch (error) {\n        setVerificationStatus('failed');\n      }\n    };\n    \n    verifyDocument();\n  }, [documentId]);\n\n  const handleSign = async (signatureData: string) => {\n    if (onSign) {\n      await onSign(signatureData);\n      setIsSigningModalOpen(false);\n      // Refresh signatures\n      const updatedSignatures = await fetchDocumentSignatures(documentId);\n      setSignatures(updatedSignatures);\n    }\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6\">\n      {/* Document Header */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n        <div className=\"flex justify-between items-start\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              {document?.title || 'Loading...'}\n            </h1>\n            <div className=\"flex items-center space-x-4 mt-2\">\n              <span className=\"text-sm text-gray-600\">\n                Document ID: {documentId}\n              </span>\n              <div className=\"flex items-center space-x-2\">\n                <div\n                  className={`w-3 h-3 rounded-full ${\n                    verificationStatus === 'verified'\n                      ? 'bg-green-500'\n                      : verificationStatus === 'failed'\n                      ? 'bg-red-500'\n                      : 'bg-yellow-500'\n                  }`}\n                />\n                <span className=\"text-sm font-medium\">\n                  {verificationStatus === 'verified'\n                    ? 'Blockchain Verified'\n                    : verificationStatus === 'failed'\n                    ? 'Verification Failed'\n                    : 'Verifying...'}\n                </span>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-3\">\n            {accessLevel === 'write' && onSign && (\n              <button\n                onClick={() => setIsSigningModalOpen(true)}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium\"\n              >\n                Sign Document\n              </button>\n            )}\n            <button className=\"border border-gray-300 hover:bg-gray-50 px-4 py-2 rounded-lg font-medium\">\n              Download PDF\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Document Content */}\n        <div className=\"lg:col-span-3\">\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"prose max-w-none\">\n              {document?.content ? (\n                <DocumentContent content={document.content} type={documentType} />\n              ) : (\n                <div className=\"flex items-center justify-center h-96\">\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Signatures Panel */}\n        <div className=\"space-y-6\">\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Digital Signatures</h3>\n            <div className=\"space-y-3\">\n              {signatures.map((signature) => (\n                <div\n                  key={signature.id}\n                  className=\"border border-gray-200 rounded-lg p-3\"\n                >\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                    <span className=\"font-medium text-sm\">{signature.signerName}</span>\n                  </div>\n                  <div className=\"text-xs text-gray-600\">\n                    {signature.role} • {new Date(signature.timestamp).toLocaleDateString()}\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1 font-mono\">\n                    {signature.blockchainTx.substring(0, 16)}...\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Document History</h3>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span>Created</span>\n                <span className=\"text-gray-600\">{document?.createdAt}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Last Modified</span>\n                <span className=\"text-gray-600\">{document?.updatedAt}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Version</span>\n                <span className=\"text-gray-600\">{document?.version}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Digital Signature Modal */}\n      {isSigningModalOpen && (\n        <DigitalSignatureModal\n          documentId={documentId}\n          onSign={handleSign}\n          onCancel={() => setIsSigningModalOpen(false)}\n        />\n      )}\n    </div>\n  );\n}\n```\n\n## 7.3 UI/Backend Interaction Boundaries\n\n### 7.3.1 API Integration Layer\n\nThe frontend communicates with the backend through a well-defined API layer that handles authentication, data fetching, and real-time updates:\n\n```typescript\n// API Client Configuration\nclass ShipLedgerAPIClient {\n  private baseURL: string;\n  private authToken: string | null = null;\n  private wsConnection: WebSocket | null = null;\n\n  constructor(baseURL: string) {\n    this.baseURL = baseURL;\n  }\n\n  // Authentication\n  async authenticate(credentials: LoginCredentials): Promise<AuthResponse> {\n    const response = await fetch(`${this.baseURL}/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(credentials)\n    });\n    \n    const data = await response.json();\n    this.authToken = data.token;\n    return data;\n  }\n\n  // Shipment Operations\n  async createShipment(shipmentData: CreateShipmentRequest): Promise<ShipmentResponse> {\n    return this.request('POST', '/shipments', shipmentData);\n  }\n\n  async getShipment(shipmentId: string): Promise<ShipmentData> {\n    return this.request('GET', `/shipments/${shipmentId}`);\n  }\n\n  async updateShipmentStatus(\n    shipmentId: string, \n    status: ShipmentStatus\n  ): Promise<void> {\n    return this.request('PUT', `/shipments/${shipmentId}/status`, { status });\n  }\n\n  // Document Operations\n  async generateBillOfLading(shipmentId: string): Promise<DocumentResponse> {\n    return this.request('POST', `/shipments/${shipmentId}/documents/bol`);\n  }\n\n  async signDocument(\n    documentId: string, \n    signature: string\n  ): Promise<SignatureResponse> {\n    return this.request('POST', `/documents/${documentId}/sign`, { signature });\n  }\n\n  // Real-time Tracking\n  subscribeToShipmentUpdates(\n    shipmentId: string, \n    callback: (update: TrackingUpdate) => void\n  ): () => void {\n    this.wsConnection = new WebSocket(\n      `wss://api.shibledger.com/v1/tracking/${shipmentId}`\n    );\n    \n    this.wsConnection.onmessage = (event) => {\n      const update = JSON.parse(event.data);\n      callback(update);\n    };\n\n    return () => {\n      if (this.wsConnection) {\n        this.wsConnection.close();\n        this.wsConnection = null;\n      }\n    };\n  }\n\n  private async request<T>(\n    method: string, \n    endpoint: string, \n    data?: any\n  ): Promise<T> {\n    const response = await fetch(`${this.baseURL}${endpoint}`, {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n        ...(this.authToken && { Authorization: `Bearer ${this.authToken}` })\n      },\n      ...(data && { body: JSON.stringify(data) })\n    });\n\n    if (!response.ok) {\n      throw new Error(`API Error: ${response.status} ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n}\n```\n\n### 7.3.2 State Management Architecture\n\n**React Query Integration for Server State:**\n\n```typescript\n// Custom Hooks for API Integration\nfunction useShipment(shipmentId: string) {\n  return useQuery({\n    queryKey: ['shipment', shipmentId],\n    queryFn: () => apiClient.getShipment(shipmentId),\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    refetchInterval: 30 * 1000, // 30 seconds\n  });\n}\n\nfunction useShipmentList(filters: ShipmentFilters) {\n  return useQuery({\n    queryKey: ['shipments', filters],\n    queryFn: () => apiClient.getShipments(filters),\n    keepPreviousData: true,\n  });\n}\n\nfunction useCreateShipment() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: (shipmentData: CreateShipmentRequest) =>\n      apiClient.createShipment(shipmentData),\n    onSuccess: (newShipment) => {\n      // Invalidate and refetch shipment list\n      queryClient.invalidateQueries({ queryKey: ['shipments'] });\n      // Add the new shipment to cache\n      queryClient.setQueryData(['shipment', newShipment.id], newShipment);\n    },\n  });\n}\n\nfunction useRealTimeTracking(shipmentId: string) {\n  const [trackingData, setTrackingData] = useState<TrackingInfo | null>(null);\n  \n  useEffect(() => {\n    const unsubscribe = apiClient.subscribeToShipmentUpdates(\n      shipmentId,\n      (update) => {\n        setTrackingData(prev => ({\n          ...prev,\n          ...update,\n          events: [update.event, ...(prev?.events || [])]\n        }));\n      }\n    );\n\n    return unsubscribe;\n  }, [shipmentId]);\n\n  return trackingData;\n}\n```\n\n### 7.3.3 Error Handling and Loading States\n\n```typescript\n// Error Boundary Component\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error?: Error;\n}\n\nclass ShipLedgerErrorBoundary extends React.Component<\n  React.PropsWithChildren<{}>,\n  ErrorBoundaryState\n> {\n  constructor(props: React.PropsWithChildren<{}>) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('ShipLedger Error:', error, errorInfo);\n    // Send error to monitoring service\n    // errorReporting.captureException(error, { extra: errorInfo });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex items-center space-x-3 mb-4\">\n              <div className=\"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center\">\n                <svg className=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                </svg>\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">Something went wrong</h3>\n                <p className=\"text-sm text-gray-600\">We're sorry for the inconvenience</p>\n              </div>\n            </div>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium\"\n            >\n              Reload Page\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Loading States Component\ninterface LoadingStateProps {\n  type: 'spinner' | 'skeleton' | 'shimmer';\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nfunction LoadingState({ type, size = 'md', className = '' }: LoadingStateProps) {\n  if (type === 'spinner') {\n    const sizeClasses = {\n      sm: 'w-4 h-4',\n      md: 'w-8 h-8',\n      lg: 'w-12 h-12'\n    };\n\n    return (\n      <div className={`flex items-center justify-center ${className}`}>\n        <div className={`animate-spin rounded-full border-b-2 border-blue-600 ${sizeClasses[size]}`} />\n      </div>\n    );\n  }\n\n  if (type === 'skeleton') {\n    return (\n      <div className={`animate-pulse ${className}`}>\n        <div className=\"bg-gray-200 rounded h-4 mb-2\"></div>\n        <div className=\"bg-gray-200 rounded h-4 mb-2 w-3/4\"></div>\n        <div className=\"bg-gray-200 rounded h-4 w-1/2\"></div>\n      </div>\n    );\n  }\n\n  return null;\n}\n```\n\n## 7.4 UI Schemas\n\n### 7.4.1 Component Schema Definitions\n\n```typescript\n// Form Schemas using Zod for validation\nimport { z } from 'zod';\n\n// Shipment Creation Schema\nexport const shipmentCreationSchema = z.object({\n  shipper: z.object({\n    companyId: z.string().min(1, 'Company ID is required'),\n    name: z.string().min(1, 'Company name is required'),\n    address: z.object({\n      street: z.string().min(1, 'Street address is required'),\n      city: z.string().min(1, 'City is required'),\n      country: z.string().min(1, 'Country is required'),\n      postalCode: z.string().min(1, 'Postal code is required'),\n    }),\n    contact: z.object({\n      email: z.string().email('Invalid email address'),\n      phone: z.string().min(1, 'Phone number is required'),\n    }),\n  }),\n  carrier: z.object({\n    companyId: z.string().min(1, 'Carrier ID is required'),\n    vesselIMO: z.string().regex(/^IMO\\d{7}$/, 'Invalid IMO number'),\n    vesselName: z.string().min(1, 'Vessel name is required'),\n  }),\n  consignee: z.object({\n    companyId: z.string().min(1, 'Consignee ID is required'),\n    name: z.string().min(1, 'Consignee name is required'),\n    deliveryAddress: z.object({\n      street: z.string().min(1, 'Delivery address is required'),\n      city: z.string().min(1, 'City is required'),\n      country: z.string().min(1, 'Country is required'),\n      postalCode: z.string().min(1, 'Postal code is required'),\n    }),\n  }),\n  cargo: z.object({\n    description: z.string().min(1, 'Cargo description is required'),\n    hsCode: z.string().regex(/^\\d{4}\\.\\d{2}\\.\\d{4}$/, 'Invalid HS code format'),\n    weight: z.object({\n      value: z.number().positive('Weight must be positive'),\n      unit: z.enum(['kg', 'lbs', 'tons']),\n    }),\n    volume: z.object({\n      value: z.number().positive('Volume must be positive'),\n      unit: z.enum(['cbm', 'cft']),\n    }),\n    containerNumbers: z.array(z.string()).min(1, 'At least one container required'),\n    hazardousGoods: z.boolean(),\n  }),\n  route: z.object({\n    portOfLoading: z.string().length(5, 'Port code must be 5 characters'),\n    portOfDischarge: z.string().length(5, 'Port code must be 5 characters'),\n    estimatedDeparture: z.date(),\n    estimatedArrival: z.date(),\n  }),\n});\n\nexport type ShipmentCreationFormData = z.infer<typeof shipmentCreationSchema>;\n\n// Document Signature Schema\nexport const documentSignatureSchema = z.object({\n  documentId: z.string().uuid(),\n  signerRole: z.enum(['shipper', 'carrier', 'consignee', 'port_authority', 'customs']),\n  signatureType: z.enum(['digital', 'electronic', 'biometric']),\n  signatureData: z.string().min(1, 'Signature data is required'),\n  timestamp: z.date(),\n  ipAddress: z.string().ip(),\n  userAgent: z.string(),\n});\n\n// Tracking Event Schema\nexport const trackingEventSchema = z.object({\n  shipmentId: z.string(),\n  eventType: z.enum([\n    'CONTAINER_LOADED',\n    'VESSEL_DEPARTED',\n    'IN_TRANSIT',\n    'PORT_ARRIVAL',\n    'CUSTOMS_CLEARANCE',\n    'CONTAINER_DISCHARGED',\n    'CARGO_DELIVERED'\n  ]),\n  location: z.object({\n    latitude: z.number().min(-90).max(90),\n    longitude: z.number().min(-180).max(180),\n    portCode: z.string().optional(),\n    description: z.string(),\n  }),\n  timestamp: z.date(),\n  metadata: z.record(z.any()).optional(),\n});\n```\n\n### 7.4.2 API Response Schemas\n\n```typescript\n// API Response Type Definitions\nexport interface APIResponse<T> {\n  success: boolean;\n  data: T;\n  message?: string;\n  errors?: ValidationError[];\n  meta?: {\n    pagination?: PaginationMeta;\n    timestamp: string;\n    requestId: string;\n  };\n}\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n  code: string;\n}\n\nexport interface PaginationMeta {\n  page: number;\n  limit: number;\n  total: number;\n  totalPages: number;\n  hasNext: boolean;\n  hasPrev: boolean;\n}\n\n// Shipment API Responses\nexport interface ShipmentListResponse extends APIResponse<ShipmentData[]> {\n  meta: {\n    pagination: PaginationMeta;\n    filters: ShipmentFilters;\n    timestamp: string;\n    requestId: string;\n  };\n}\n\nexport interface ShipmentDetailResponse extends APIResponse<ShipmentData> {\n  meta: {\n    lastUpdated: string;\n    version: number;\n    timestamp: string;\n    requestId: string;\n  };\n}\n\n// Document API Responses\nexport interface DocumentResponse extends APIResponse<Document> {\n  meta: {\n    blockchainTx?: string;\n    ipfsHash?: string;\n    verificationStatus: 'pending' | 'verified' | 'failed';\n    timestamp: string;\n    requestId: string;\n  };\n}\n\n// Real-time Update Types\nexport interface TrackingUpdate {\n  type: 'location_update' | 'status_change' | 'document_update' | 'payment_update';\n  shipmentId: string;\n  timestamp: string;\n  data: any;\n}\n\nexport interface WebSocketMessage {\n  id: string;\n  type: string;\n  payload: any;\n  timestamp: string;\n}\n```\n\n## 7.5 Screens Required\n\n### 7.5.1 Dashboard Screens\n\n**Executive Dashboard:**\n- **Purpose**: High-level overview for C-level executives and business stakeholders\n- **Key Metrics**: Total shipments, revenue, compliance status, performance KPIs\n- **Update Frequency**: Real-time with 5-minute intervals\n- **User Roles**: Executives, business managers\n\n**Operational Dashboard:**\n- **Purpose**: Day-to-day operations management for logistics teams\n- **Key Metrics**: Active shipments, processing times, system health, alerts\n- **Update Frequency**: Real-time with 1-minute intervals\n- **User Roles**: Operations managers, logistics coordinators\n\n**Technical Dashboard:**\n- **Purpose**: System monitoring and performance tracking for technical teams\n- **Key Metrics**: API response times, error rates, blockchain status, infrastructure health\n- **Update Frequency**: Real-time with 15-second intervals\n- **User Roles**: DevOps engineers, system administrators\n\n### 7.5.2 Shipment Management Screens\n\n| Screen Name | Purpose | Key Components | User Roles |\n|-------------|---------|----------------|------------|\n| **Shipment List** | Browse and filter shipments | Data table, filters, search, pagination | All authenticated users |\n| **Shipment Details** | Comprehensive shipment information | Tabbed interface, document access, tracking map | Shipment stakeholders |\n| **Create Shipment** | Multi-step shipment creation wizard | Form wizard, validation, progress indicator | Shippers, freight forwarders |\n| **Edit Shipment** | Modify shipment details and status | Editable forms, approval workflow | Authorized parties only |\n\n### 7.5.3 Document Management Screens\n\n**Document Library:**\n```typescript\n// Document Library Screen Component\nfunction DocumentLibrary() {\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [filters, setFilters] = useState<DocumentFilters>({\n    type: 'all',\n    status: 'all',\n    dateRange: 'last_30_days'\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Document Library</h1>\n        <button className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg\">\n          Upload Document\n        </button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <select\n            value={filters.type}\n            onChange={(e) => setFilters(prev => ({ ...prev, type: e.target.value }))}\n            className=\"border border-gray-300 rounded-lg px-3 py-2\"\n          >\n            <option value=\"all\">All Document Types</option>\n            <option value=\"bill_of_lading\">Bills of Lading</option>\n            <option value=\"commercial_invoice\">Commercial Invoices</option>\n            <option value=\"packing_list\">Packing Lists</option>\n            <option value=\"certificate\">Certificates</option>\n          </select>\n          \n          <select\n            value={filters.status}\n            onChange={(e) => setFilters(prev => ({ ...prev, status: e.target.value }))}\n            className=\"border border-gray-300 rounded-lg px-3 py-2\"\n          >\n            <option value=\"all\">All Statuses</option>\n            <option value=\"draft\">Draft</option>\n            <option value=\"pending_signature\">Pending Signature</option>\n            <option value=\"signed\">Signed</option>\n            <option value=\"verified\">Blockchain Verified</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Document Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {documents.map((document) => (\n          <DocumentCard key={document.id} document={document} />\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n### 7.5.4 Tracking and Analytics Screens\n\n**Real-Time Tracking Screen:**\n- **Interactive Map**: Live vessel and container tracking with route visualization\n- **Event Timeline**: Chronological list of tracking events with detailed information\n- **Status Indicators**: Visual status representation with color-coded progress\n- **Alert System**: Real-time notifications for exceptions and delays\n\n**Analytics Dashboard:**\n- **Performance Metrics**: Shipment completion rates, average transit times, cost analysis\n- **Trend Analysis**: Historical data visualization with predictive insights\n- **Compliance Reports**: Regulatory adherence tracking and audit trails\n- **Custom Reports**: User-configurable reports with export capabilities\n\n### 7.5.5 User Management Screens\n\n**User Profile:**\n```typescript\n// User Profile Screen\nfunction UserProfile() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-lg p-6\">\n        <div className=\"flex items-center space-x-6\">\n          <div className=\"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center\">\n            <span className=\"text-2xl font-bold text-gray-600\">\n              {user?.name.charAt(0)}\n            </span>\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">{user?.name}</h1>\n            <p className=\"text-gray-600\">{user?.role} at {user?.company}</p>\n            <p className=\"text-sm text-gray-500\">{user?.email}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          <h2 className=\"text-lg font-semibold mb-4\">Account Information</h2>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Full Name</label>\n              <input\n                type=\"text\"\n                value={user?.name || ''}\n                disabled={!isEditing}\n                className=\"mt-1 block w-full border border-gray-300 rounded-lg px-3 py-2\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Email</label>\n              <input\n                type=\"email\"\n                value={user?.email || ''}\n                disabled={!isEditing}\n                className=\"mt-1 block w-full border border-gray-300 rounded-lg px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          <h2 className=\"text-lg font-semibold mb-4\">Security Settings</h2>\n          <div className=\"space-y-4\">\n            <button className=\"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50\">\n              Change Password\n            </button>\n            <button className=\"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50\">\n              Two-Factor Authentication\n            </button>\n            <button className=\"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50\">\n              API Keys\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n```\n\n## 7.6 User Interactions\n\n### 7.6.1 Navigation Patterns\n\n**Primary Navigation Structure:**\n```typescript\n// Navigation Configuration\nconst navigationConfig = {\n  primary: [\n    {\n      name: 'Dashboard',\n      href: '/dashboard',\n      icon: 'dashboard',\n      roles: ['all']\n    },\n    {\n      name: 'Shipments',\n      href: '/shipments',\n      icon: 'ship',\n      roles: ['shipper', 'carrier', 'consignee'],\n      children: [\n        { name: 'All Shipments', href: '/shipments' },\n        { name: 'Create Shipment', href: '/shipments/create' },\n        { name: 'Templates', href: '/shipments/templates' }\n      ]\n    },\n    {\n      name: 'Documents',\n      href: '/documents',\n      icon: 'document',\n      roles: ['all'],\n      children: [\n        { name: 'Document Library', href: '/documents' },\n        { name: 'Pending Signatures', href: '/documents/pending' },\n        { name: 'Templates', href: '/documents/templates' }\n      ]\n    },\n    {\n      name: 'Tracking',\n      href: '/tracking',\n      icon: 'location',\n      roles: ['all']\n    },\n    {\n      name: 'Finance',\n      href: '/finance',\n      icon: 'currency',\n      roles: ['shipper', 'bank', 'finance']\n    }\n  ],\n  secondary: [\n    {\n      name: 'Reports',\n      href: '/reports',\n      icon: 'chart',\n      roles: ['manager', 'admin']\n    },\n    {\n      name: 'Settings',\n      href: '/settings',\n      icon: 'settings',\n      roles: ['all']\n    }\n  ]\n};\n```\n\n### 7.6.2 Form Interactions\n\n**Smart Form Validation:**\n```typescript\n// Form Interaction Patterns\nfunction SmartForm<T extends Record<string, any>>({\n  schema,\n  onSubmit,\n  initialData,\n  children\n}: SmartFormProps<T>) {\n  const [data, setData] = useState<T>(initialData || {} as T);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [touched, setTouched] = useState<Record<string, boolean>>({});\n\n  const validateField = (name: string, value: any) => {\n    try {\n      schema.pick({ [name]: true }).parse({ [name]: value });\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        setErrors(prev => ({ \n          ...prev, \n          [name]: error.errors[0]?.message || 'Invalid value' \n        }));\n      }\n    }\n  };\n\n  const handleFieldChange = (name: string, value: any) => {\n    setData(prev => ({ ...prev, [name]: value }));\n    if (touched[name]) {\n      validateField(name, value);\n    }\n  };\n\n  const handleFieldBlur = (name: string) => {\n    setTouched(prev => ({ ...prev, [name]: true }));\n    validateField(name, data[name]);\n  };\n\n  return (\n    <form onSubmit={(e) => {\n      e.preventDefault();\n      try {\n        const validData = schema.parse(data);\n        onSubmit(validData);\n      } catch (error) {\n        // Handle validation errors\n      }\n    }}>\n      {children({ data, errors, touched, handleFieldChange, handleFieldBlur })}\n    </form>\n  );\n}\n```\n\n### 7.6.3 Real-Time Interactions\n\n**Live Data Updates:**\n```typescript\n// Real-time Data Hook\nfunction useRealTimeData<T>(\n  endpoint: string,\n  options: {\n    pollInterval?: number;\n    websocket?: boolean;\n    onUpdate?: (data: T) => void;\n  } = {}\n) {\n  const [data, setData] = useState<T | null>(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    if (options.websocket) {\n      const ws = new WebSocket(`wss://api.shibledger.com${endpoint}`);\n      \n      ws.onopen = () => setIsConnected(true);\n      ws.onclose = () => setIsConnected(false);\n      ws.onerror = (error) => setError(new Error('WebSocket error'));\n      \n      ws.onmessage = (event) => {\n        try {\n          const update = JSON.parse(event.data);\n          setData(update);\n          options.onUpdate?.(update);\n        } catch (error) {\n          setError(new Error('Failed to parse WebSocket message'));\n        }\n      };\n\n      return () => ws.close();\n    } else if (options.pollInterval) {\n      const interval = setInterval(async () => {\n        try {\n          const response = await fetch(`https://api.shibledger.com${endpoint}`);\n          const newData = await response.json();\n          setData(newData);\n          options.onUpdate?.(newData);\n        } catch (error) {\n          setError(error as Error);\n        }\n      }, options.pollInterval);\n\n      return () => clearInterval(interval);\n    }\n  }, [endpoint, options.websocket, options.pollInterval]);\n\n  return { data, isConnected, error };\n}\n```\n\n### 7.6.4 Accessibility Interactions\n\n**Keyboard Navigation Support:**\n```typescript\n// Accessible Component Patterns\nfunction AccessibleDataTable<T>({\n  data,\n  columns,\n  onRowSelect,\n  selectedRows\n}: AccessibleDataTableProps<T>) {\n  const [focusedRow, setFocusedRow] = useState<number>(-1);\n  const tableRef = useRef<HTMLTableElement>(null);\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        setFocusedRow(prev => Math.min(prev + 1, data.length - 1));\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        setFocusedRow(prev => Math.max(prev - 1, 0));\n        break;\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        if (focusedRow >= 0) {\n          onRowSelect?.(data[focusedRow]);\n        }\n        break;\n      case 'Home':\n        event.preventDefault();\n        setFocusedRow(0);\n        break;\n      case 'End':\n        event.preventDefault();\n        setFocusedRow(data.length - 1);\n        break;\n    }\n  };\n\n  return (\n    <table\n      ref={tableRef}\n      role=\"grid\"\n      aria-label=\"Shipment data table\"\n      onKeyDown={handleKeyDown}\n      tabIndex={0}\n      className=\"w-full border-collapse\"\n    >\n      <thead>\n        <tr role=\"row\">\n          {columns.map((column, index) => (\n            <th\n              key={column.key}\n              role=\"columnheader\"\n              aria-sort={column.sortable ? 'none' : undefined}\n              className=\"border-b border-gray-200 px-4 py-3 text-left\"\n            >\n              {column.title}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {data.map((row, rowIndex) => (\n          <tr\n            key={rowIndex}\n            role=\"row\"\n            aria-selected={selectedRows?.includes(row)}\n            className={`\n              ${focusedRow === rowIndex ? 'bg-blue-50 ring-2 ring-blue-500' : ''}\n              ${selectedRows?.includes(row) ? 'bg-blue-100' : ''}\n              hover:bg-gray-50 cursor-pointer\n            `}\n            onClick={() => onRowSelect?.(row)}\n          >\n            {columns.map((column) => (\n              <td\n                key={column.key}\n                role=\"gridcell\"\n                className=\"border-b border-gray-100 px-4 py-3\"\n              >\n                {column.render ? column.render(row) : row[column.key]}\n              </td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n```\n\n## 7.7 Visual Design Considerations\n\n### 7.7.1 Design System Foundation\n\n**Color Palette:**\n```css\n/* Maritime-Inspired Color System */\n:root {\n  /* Primary Colors */\n  --color-maritime-blue: #1e40af;\n  --color-maritime-navy: #1e3a8a;\n  --color-ocean-teal: #0d9488;\n  --color-deep-sea: #164e63;\n  \n  /* Accent Colors */\n  --color-cargo-orange: #ea580c;\n  --color-port-yellow: #eab308;\n  --color-container-red: #dc2626;\n  --color-success-green: #059669;\n  \n  /* Neutral Colors */\n  --color-slate-50: #f8fafc;\n  --color-slate-100: #f1f5f9;\n  --color-slate-200: #e2e8f0;\n  --color-slate-300: #cbd5e1;\n  --color-slate-400: #94a3b8;\n  --color-slate-500: #64748b;\n  --color-slate-600: #475569;\n  --color-slate-700: #334155;\n  --color-slate-800: #1e293b;\n  --color-slate-900: #0f172a;\n  \n  /* Status Colors */\n  --color-status-created: var(--color-slate-400);\n  --color-status-in-transit: var(--color-maritime-blue);\n  --color-status-arrived: var(--color-port-yellow);\n  --color-status-cleared: var(--color-success-green);\n  --color-status-completed: var(--color-success-green);\n  --color-status-delayed: var(--color-cargo-orange);\n  --color-status-error: var(--color-container-red);\n}\n```\n\n### 7.7.2 Typography System\n\n**Font Hierarchy:**\n```css\n/* Typography Scale */\n@theme {\n  --font-family-sans: 'Inter', system-ui, sans-serif;\n  --font-family-mono: 'JetBrains Mono', monospace;\n  \n  /* Font Sizes */\n  --font-size-xs: 0.75rem;    /* 12px */\n  --font-size-sm: 0.875rem;   /* 14px */\n  --font-size-base: 1rem;     /* 16px */\n  --font-size-lg: 1.125rem;   /* 18px */\n  --font-size-xl: 1.25rem;    /* 20px */\n  --font-size-2xl: 1.5rem;    /* 24px */\n  --font-size-3xl: 1.875rem;  /* 30px */\n  --font-size-4xl: 2.25rem;   /* 36px */\n  \n  /* Font Weights */\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --font-weight-bold: 700;\n  \n  /* Line Heights */\n  --line-height-tight: 1.25;\n  --line-height-normal: 1.5;\n  --line-height-relaxed: 1.75;\n}\n\n/* Typography Classes */\n.text-display {\n  font-size: var(--font-size-4xl);\n  font-weight: var(--font-weight-bold);\n  line-height: var(--line-height-tight);\n}\n\n.text-heading {\n  font-size: var(--font-size-2xl);\n  font-weight: var(--font-weight-semibold);\n  line-height: var(--line-height-tight);\n}\n\n.text-subheading {\n  font-size: var(--font-size-xl);\n  font-weight: var(--font-weight-medium);\n  line-height: var(--line-height-normal);\n}\n\n.text-body {\n  font-size: var(--font-size-base);\n  font-weight: var(--font-weight-normal);\n  line-height: var(--line-height-normal);\n}\n\n.text-caption {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-normal);\n  line-height: var(--line-height-normal);\n  color: var(--color-slate-600);\n}\n```\n\n### 7.7.3 Component Design Patterns\n\n**Card Components:**\n```typescript\n// Reusable Card Component\ninterface CardProps {\n  variant?: 'default' | 'elevated' | 'outlined';\n  padding?: 'sm' | 'md' | 'lg';\n  className?: string;\n  children: React.ReactNode;\n}\n\nfunction Card({ \n  variant = 'default', \n  padding = 'md', \n  className = '', \n  children \n}: CardProps) {\n  const baseClasses = 'bg-white rounded-lg';\n  \n  const variantClasses = {\n    default: 'shadow',\n    elevated: 'shadow-lg',\n    outlined: 'border border-gray-200'\n  };\n  \n  const paddingClasses = {\n    sm: 'p-4',\n    md: 'p-6',\n    lg: 'p-8'\n  };\n\n  return (\n    <div className={`\n      ${baseClasses} \n      ${variantClasses[variant]} \n      ${paddingClasses[padding]} \n      ${className}\n    `}>\n      {children}\n    </div>\n  );\n}\n\n// Status Badge Component\ninterface StatusBadgeProps {\n  status: ShipmentStatus;\n  size?: 'sm' | 'md' | 'lg';\n}\n\nfunction StatusBadge({ status, size = 'md' }: StatusBadgeProps) {\n  const statusConfig = {\n    CREATED: { color: 'bg-gray-100 text-gray-800', label: 'Created' },\n    DOCUMENTS_GENERATED: { color: '\n\n# 8. Infrastructure\n\n## 8.1 Deployment Environment\n\n### 8.1.1 Target Environment Assessment\n\nShipLedger requires a robust, globally distributed infrastructure to support maritime trade operations across multiple continents and time zones. The platform leverages BlockDAG's fully Ethereum Virtual Machine (EVM) compatible infrastructure with superior speed (1400 TPS and higher) and much lower transaction fees, necessitating a hybrid cloud architecture that can scale dynamically while maintaining regulatory compliance across different jurisdictions.\n\n**Environment Type Analysis:**\n\n| Environment Aspect | Requirement | Justification | Implementation |\n|-------------------|-------------|---------------|----------------|\n| **Architecture Type** | Multi-cloud hybrid | Global maritime trade operations require geographic distribution across major shipping corridors | AWS primary, Azure secondary, on-premises for sensitive data |\n| **Geographic Distribution** | 5 primary regions | Major trade routes: Asia-Pacific, Europe, Americas, Middle East, Africa | Regional data centers with edge locations |\n| **Compliance Requirements** | Multi-jurisdictional | Maritime regulations vary by country and require local data residency | Region-specific compliance frameworks |\n| **Availability Target** | 99.9% uptime | Maritime operations are time-sensitive with significant financial impact from downtime | Multi-region failover with automated recovery |\n\n**Resource Requirements Assessment:**\n\n```mermaid\ngraph TB\n    subgraph \"Compute Requirements\"\n        A[API Gateway: 4 vCPU, 8GB RAM] --> B[Microservices: 2-8 vCPU, 4-16GB RAM]\n        C[Blockchain Nodes: 8 vCPU, 32GB RAM] --> D[Database Cluster: 16 vCPU, 64GB RAM]\n    end\n    \n    subgraph \"Storage Requirements\"\n        E[Hot Storage: 10TB SSD] --> F[Warm Storage: 50TB HDD]\n        G[Cold Archive: 500TB Glacier] --> H[Blockchain Data: 5TB NVMe]\n    end\n    \n    subgraph \"Network Requirements\"\n        I[Internet Gateway: 10Gbps] --> J[Inter-region: 1Gbps]\n        K[CDN: Global Edge] --> L[Load Balancers: 5Gbps]\n    end\n```\n\n### 8.1.2 Environment Management Strategy\n\n**Infrastructure as Code Implementation:**\n\nThe platform implements comprehensive Infrastructure as Code (IaC) using Terraform for consistent, repeatable deployments across all environments. This approach ensures configuration consistency and enables rapid environment provisioning for disaster recovery scenarios.\n\n| IaC Component | Technology | Purpose | Maintenance Schedule |\n|---------------|------------|---------|---------------------|\n| **Infrastructure Provisioning** | Terraform 1.6+ | Cloud resource management | Weekly updates, monthly reviews |\n| **Configuration Management** | Ansible 2.15+ | Application configuration | Daily automated runs |\n| **Container Orchestration** | Kubernetes 1.28+ | Service deployment | Rolling updates every 2 weeks |\n| **Monitoring Infrastructure** | Prometheus + Grafana | Performance monitoring | Continuous monitoring, weekly tuning |\n\n**Environment Promotion Strategy:**\n\n```mermaid\nflowchart TD\n    A[Development Environment] --> B[Automated Testing]\n    B --> C{All Tests Pass?}\n    C -->|Yes| D[Deploy to Staging]\n    C -->|No| E[Block Promotion]\n    \n    D --> F[Integration Testing]\n    F --> G[Performance Testing]\n    G --> H{Performance Acceptable?}\n    H -->|Yes| I[Deploy to Production]\n    H -->|No| J[Performance Optimization]\n    \n    I --> K[Blue-Green Deployment]\n    K --> L[Health Checks]\n    L --> M{Health Check Pass?}\n    M -->|Yes| N[Switch Traffic]\n    M -->|No| O[Rollback]\n    \n    E --> P[Developer Notification]\n    J --> Q[Performance Team Alert]\n    O --> R[Incident Response]\n```\n\n### 8.1.3 Backup and Disaster Recovery Architecture\n\n**Multi-Tier Backup Strategy:**\n\n| Backup Tier | Frequency | Retention | Recovery Time | Storage Location |\n|-------------|-----------|-----------|---------------|------------------|\n| **Real-time Replication** | Continuous | 7 days | < 5 minutes | Secondary region |\n| **Daily Snapshots** | 24 hours | 30 days | < 2 hours | Cross-region storage |\n| **Weekly Archives** | 7 days | 1 year | < 12 hours | Cold storage |\n| **Monthly Compliance** | 30 days | 7 years | < 48 hours | Compliance archive |\n\n**Disaster Recovery Procedures:**\n\n```mermaid\nsequenceDiagram\n    participant Monitor as Monitoring System\n    participant DR as DR Orchestrator\n    participant Primary as Primary Region\n    participant Secondary as Secondary Region\n    participant DNS as DNS Manager\n    \n    Monitor->>DR: Detect Primary Failure\n    DR->>Secondary: Initiate Failover\n    Secondary->>Secondary: Validate Data Integrity\n    Secondary->>DNS: Update DNS Records\n    DNS->>DR: Confirm DNS Propagation\n    DR->>Monitor: Failover Complete\n    \n    Note over Primary,Secondary: Recovery Process\n    Primary->>DR: Signal Recovery Ready\n    DR->>Primary: Sync Latest Data\n    Primary->>DR: Confirm Data Sync\n    DR->>DNS: Restore Primary DNS\n    DR->>Secondary: Switch to Standby Mode\n```\n\n## 8.2 Cloud Services Architecture\n\n### 8.2.1 Cloud Provider Selection and Justification\n\n**Primary Cloud Provider: Amazon Web Services (AWS)**\n\nAWS provides the most comprehensive global infrastructure with 31 regions and 99 availability zones, essential for supporting maritime trade operations across all major shipping corridors. The selection is based on:\n\n- **Global Reach**: Presence in all major maritime trade regions\n- **Compliance Certifications**: SOC, ISO 27001, GDPR compliance\n- **Blockchain Support**: Native blockchain services and EVM compatibility\n- **Maritime Industry Adoption**: Established customer base in logistics and shipping\n\n**Secondary Cloud Provider: Microsoft Azure**\n\nAzure serves as the secondary provider for disaster recovery and specific regional requirements, particularly in European markets where Azure has strong regulatory compliance frameworks.\n\n### 8.2.2 Core AWS Services Configuration\n\n| Service Category | AWS Service | Version/Tier | Purpose | Configuration |\n|------------------|-------------|--------------|---------|---------------|\n| **Compute** | ECS Fargate | Latest | Container orchestration | Auto-scaling, spot instances |\n| **Database** | DocumentDB | 4.0 compatible | MongoDB-compatible database | Multi-AZ, encrypted |\n| **Blockchain** | Managed Blockchain | Ethereum compatible | BlockDAG network integration with EVM compatibility | Custom network configuration |\n| **Storage** | S3 + EFS | Standard/IA/Glacier | Document and file storage | Cross-region replication |\n\n**High Availability Design:**\n\n```mermaid\ngraph TB\n    subgraph \"AWS Primary Region (us-east-1)\"\n        A[Application Load Balancer] --> B[ECS Fargate Cluster]\n        B --> C[DocumentDB Primary]\n        B --> D[ElastiCache Redis]\n        B --> E[S3 Primary Bucket]\n    end\n    \n    subgraph \"AWS Secondary Region (eu-west-1)\"\n        F[ALB Standby] --> G[ECS Standby Cluster]\n        G --> H[DocumentDB Read Replica]\n        G --> I[ElastiCache Standby]\n        G --> J[S3 Cross-Region Replica]\n    end\n    \n    subgraph \"Global Services\"\n        K[Route 53] --> A\n        K --> F\n        L[CloudFront CDN] --> E\n        L --> J\n    end\n    \n    C -.->|Replication| H\n    E -.->|Cross-Region Sync| J\n```\n\n### 8.2.3 Cost Optimization Strategy\n\n**Resource Optimization Approach:**\n\n| Optimization Strategy | Implementation | Expected Savings | Monitoring Method |\n|----------------------|----------------|------------------|---","size_bytes":360000},"client/src/components/examples/ShipmentTracker.tsx":{"content":"import ShipmentTracker from '../ShipmentTracker';\nimport { mockShipmentEvents } from '@/lib/mockData';\n\nexport default function ShipmentTrackerExample() {\n  return (\n    <div className=\"max-w-2xl p-6\">\n      <ShipmentTracker\n        vesselName=\"MSC GÜLSÜN\"\n        currentLocation=\"Mediterranean Sea\"\n        currentStatus=\"In Transit\"\n        progress={65}\n        estimatedArrival={new Date('2024-02-05T14:30:00')}\n        events={mockShipmentEvents}\n      />\n    </div>\n  );\n}\n","size_bytes":482},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/DashboardStats.tsx":{"content":"import { Card, CardContent } from '@/components/ui/card';\nimport { FileText, Ship, DollarSign, TrendingUp } from 'lucide-react';\n\ninterface StatCardProps {\n  title: string;\n  value: string;\n  change?: string;\n  icon: React.ReactNode;\n}\n\nfunction StatCard({ title, value, change, icon }: StatCardProps) {\n  return (\n    <Card>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1\">\n            <p className=\"text-sm text-muted-foreground mb-1\">{title}</p>\n            <p className=\"text-2xl font-bold\">{value}</p>\n            {change && (\n              <div className=\"flex items-center gap-1 mt-2\">\n                <TrendingUp className=\"h-3 w-3 text-green-600\" />\n                <span className=\"text-xs text-green-600 font-medium\">{change}</span>\n              </div>\n            )}\n          </div>\n          <div className=\"p-2 bg-primary/10 rounded-md\">\n            {icon}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function DashboardStats() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\" data-testid=\"dashboard-stats\">\n      <StatCard\n        title=\"Total Bills of Lading\"\n        value=\"42\"\n        change=\"+12% this month\"\n        icon={<FileText className=\"h-5 w-5 text-primary\" />}\n      />\n      <StatCard\n        title=\"Active Shipments\"\n        value=\"18\"\n        change=\"+8% this week\"\n        icon={<Ship className=\"h-5 w-5 text-primary\" />}\n      />\n      <StatCard\n        title=\"Trade Value\"\n        value=\"$2.4M\"\n        change=\"+15% this quarter\"\n        icon={<DollarSign className=\"h-5 w-5 text-primary\" />}\n      />\n      <StatCard\n        title=\"Cost Savings\"\n        value=\"$42K\"\n        change=\"+6% vs traditional\"\n        icon={<TrendingUp className=\"h-5 w-5 text-primary\" />}\n      />\n    </div>\n  );\n}\n","size_bytes":1898},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/examples/BillOfLadingCard.tsx":{"content":"import BillOfLadingCard from '../BillOfLadingCard';\nimport { mockBillsOfLading } from '@/lib/mockData';\n\nexport default function BillOfLadingCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6\">\n      {mockBillsOfLading.map((bol) => (\n        <BillOfLadingCard\n          key={bol.id}\n          blNumber={bol.blNumber}\n          shipper={bol.shipper}\n          consignee={bol.consignee}\n          vesselName={bol.vesselName}\n          portOfLoading={bol.portOfLoading}\n          portOfDischarge={bol.portOfDischarge}\n          status={bol.status}\n          blockchainStatus={bol.blockchainStatus}\n          blockchainHash={bol.blockchainHash}\n          cargoDescription={bol.cargoDescription}\n          onView={() => console.log('View BoL:', bol.blNumber)}\n        />\n      ))}\n    </div>\n  );\n}\n","size_bytes":847},"client/src/components/examples/CreateBillOfLadingForm.tsx":{"content":"import CreateBillOfLadingForm from '../CreateBillOfLadingForm';\n\nexport default function CreateBillOfLadingFormExample() {\n  return (\n    <div className=\"max-w-4xl p-6\">\n      <CreateBillOfLadingForm />\n    </div>\n  );\n}\n","size_bytes":221},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/examples/ShipmentCard.tsx":{"content":"import ShipmentCard from '../ShipmentCard';\n\nexport default function ShipmentCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-6xl\">\n      <ShipmentCard\n        id=\"1\"\n        containerNumber=\"MSCU1234567\"\n        bolNumber=\"BOL-2024-001\"\n        status=\"in_transit\"\n        origin=\"Port of Shanghai\"\n        destination=\"Port of Los Angeles\"\n        eta=\"Jan 15, 2024\"\n      />\n      <ShipmentCard\n        id=\"2\"\n        containerNumber=\"TEMU9876543\"\n        bolNumber=\"BOL-2024-002\"\n        status=\"at_port\"\n        origin=\"Port of Singapore\"\n        destination=\"Port of Rotterdam\"\n        eta=\"Jan 18, 2024\"\n      />\n      <ShipmentCard\n        id=\"3\"\n        containerNumber=\"CMAU5555555\"\n        bolNumber=\"BOL-2024-003\"\n        status=\"customs_clearance\"\n        origin=\"Port of Dubai\"\n        destination=\"Port of Hamburg\"\n        eta=\"Jan 20, 2024\"\n      />\n    </div>\n  );\n}\n","size_bytes":941},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/BlockchainStatus.tsx":{"content":"import { Activity, Database, Zap } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Card } from '@/components/ui/card';\nimport { useEffect, useState } from 'react';\n\ninterface BlockchainStatusProps {\n  compact?: boolean;\n}\n\nexport default function BlockchainStatus({ compact = false }: BlockchainStatusProps) {\n  const [status, setStatus] = useState({\n    connected: true,\n    blockNumber: '15,420,845',\n    gasPrice: '12.5',\n    tps: '2,450',\n  });\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setStatus(prev => ({\n        ...prev,\n        blockNumber: (parseInt(prev.blockNumber.replace(/,/g, '')) + 1).toLocaleString(),\n      }));\n    }, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  if (compact) {\n    return (\n      <div className=\"flex items-center gap-2\" data-testid=\"blockchain-status-compact\">\n        <Badge variant={status.connected ? \"default\" : \"destructive\"} className=\"gap-1\">\n          <Activity className=\"h-3 w-3\" />\n          BlockDAG\n        </Badge>\n        <span className=\"text-xs text-muted-foreground font-mono\">\n          Block #{status.blockNumber}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <Card className=\"p-4\" data-testid=\"blockchain-status-card\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"font-semibold flex items-center gap-2\">\n          <Database className=\"h-4 w-4\" />\n          BlockDAG Network Status\n        </h3>\n        <Badge variant={status.connected ? \"default\" : \"destructive\"}>\n          {status.connected ? 'Connected' : 'Disconnected'}\n        </Badge>\n      </div>\n      \n      <div className=\"grid grid-cols-3 gap-4\">\n        <div>\n          <div className=\"text-xs text-muted-foreground mb-1\">Current Block</div>\n          <div className=\"font-mono font-semibold\" data-testid=\"text-block-number\">#{status.blockNumber}</div>\n        </div>\n        <div>\n          <div className=\"text-xs text-muted-foreground mb-1\">Gas Price</div>\n          <div className=\"font-mono font-semibold flex items-center gap-1\">\n            {status.gasPrice} <span className=\"text-xs text-muted-foreground\">gwei</span>\n          </div>\n        </div>\n        <div>\n          <div className=\"text-xs text-muted-foreground mb-1\">Throughput</div>\n          <div className=\"font-mono font-semibold flex items-center gap-1\">\n            <Zap className=\"h-3 w-3 text-primary\" />\n            {status.tps} TPS\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":2518},"client/src/components/TradeFinancePanel.tsx":{"content":"import { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Building2, CheckCircle2, Circle, Clock } from 'lucide-react';\nimport { format } from 'date-fns';\n\ninterface Milestone {\n  name: string;\n  status: 'completed' | 'in_progress' | 'pending';\n  date?: string | null;\n  amount: number;\n}\n\ninterface TradeFinancePanelProps {\n  lcNumber: string;\n  bank: string;\n  amount: string;\n  currency: string;\n  paymentStatus: string;\n  milestones: Milestone[];\n}\n\nexport default function TradeFinancePanel({\n  lcNumber,\n  bank,\n  amount,\n  currency,\n  paymentStatus,\n  milestones,\n}: TradeFinancePanelProps) {\n  const completedMilestones = milestones.filter(m => m.status === 'completed').length;\n  const progress = (completedMilestones / milestones.length) * 100;\n  const totalAmount = parseFloat(amount.replace(/,/g, ''));\n\n  return (\n    <Card data-testid=\"card-trade-finance\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <Building2 className=\"h-5 w-5 text-primary\" />\n              <h3 className=\"font-semibold\">Trade Finance</h3>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">{bank}</p>\n          </div>\n          <Badge variant=\"default\">{paymentStatus}</Badge>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex items-baseline justify-between p-3 bg-muted rounded-md\">\n          <div>\n            <div className=\"text-xs text-muted-foreground mb-0.5\">Letter of Credit</div>\n            <div className=\"font-mono font-semibold\">{lcNumber}</div>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-xs text-muted-foreground mb-0.5\">Total Amount</div>\n            <div className=\"text-xl font-bold\">\n              {currency} {amount}\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex justify-between text-sm mb-2\">\n            <span className=\"text-muted-foreground\">Payment Progress</span>\n            <span className=\"font-semibold\">{completedMilestones}/{milestones.length} Milestones</span>\n          </div>\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n\n        <div className=\"space-y-3\">\n          <h4 className=\"text-sm font-semibold\">Payment Milestones</h4>\n          <div className=\"space-y-2\">\n            {milestones.map((milestone, index) => (\n              <div \n                key={index}\n                className=\"flex items-start gap-3 p-2 rounded-md hover-elevate\"\n                data-testid={`milestone-${index}`}\n              >\n                <div className=\"mt-0.5\">\n                  {milestone.status === 'completed' ? (\n                    <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                  ) : milestone.status === 'in_progress' ? (\n                    <Clock className=\"h-4 w-4 text-blue-600\" />\n                  ) : (\n                    <Circle className=\"h-4 w-4 text-muted-foreground\" />\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between gap-2 mb-0.5\">\n                    <span className=\"font-medium text-sm\">{milestone.name}</span>\n                    {milestone.amount > 0 && (\n                      <span className=\"text-sm font-semibold flex-shrink-0\">\n                        {currency} {milestone.amount.toLocaleString()}\n                      </span>\n                    )}\n                  </div>\n                  {milestone.date && (\n                    <div className=\"text-xs text-muted-foreground\">\n                      {format(new Date(milestone.date), 'MMM dd, yyyy')}\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"pt-3 border-t\">\n          <div className=\"flex justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Amount Remaining</span>\n            <span className=\"font-semibold\">\n              {currency} {milestones.reduce((acc, m) => acc + m.amount, 0).toLocaleString()}\n            </span>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4471},"client/src/components/examples/RoleSelector.tsx":{"content":"import { useState } from 'react';\nimport RoleSelector, { UserRole } from '../RoleSelector';\n\nexport default function RoleSelectorExample() {\n  const [role, setRole] = useState<UserRole>('shipper');\n  \n  return (\n    <div className=\"p-4\">\n      <RoleSelector \n        currentRole={role} \n        onRoleChange={(newRole) => {\n          console.log('Role changed to:', newRole);\n          setRole(newRole);\n        }} \n      />\n    </div>\n  );\n}\n","size_bytes":443},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ShipmentTimeline.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Check, Circle, Clock } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface TimelineStep {\n  label: string;\n  status: \"completed\" | \"active\" | \"pending\";\n  timestamp?: string;\n}\n\ninterface ShipmentTimelineProps {\n  currentStatus: string;\n  origin?: string;\n  destination?: string;\n}\n\nconst statusToSteps: Record<string, string[]> = {\n  created: [\"Created\"],\n  in_transit: [\"Created\", \"In Transit\"],\n  at_port: [\"Created\", \"In Transit\", \"At Port\"],\n  customs_clearance: [\"Created\", \"In Transit\", \"At Port\", \"Customs Clearance\"],\n  delivered: [\"Created\", \"In Transit\", \"At Port\", \"Customs Clearance\", \"Delivered\"],\n};\n\nexport default function ShipmentTimeline({ currentStatus, origin, destination }: ShipmentTimelineProps) {\n  const completedSteps = statusToSteps[currentStatus] || [\"Created\"];\n  const currentStep = completedSteps[completedSteps.length - 1];\n\n  const allSteps: TimelineStep[] = [\n    {\n      label: `Created${origin ? ` at ${origin}` : \"\"}`,\n      status: \"completed\",\n    },\n    {\n      label: \"In Transit\",\n      status: completedSteps.includes(\"In Transit\") ? \n        (currentStep === \"In Transit\" ? \"active\" : \"completed\") : \"pending\",\n    },\n    {\n      label: \"At Port\",\n      status: completedSteps.includes(\"At Port\") ? \n        (currentStep === \"At Port\" ? \"active\" : \"completed\") : \"pending\",\n    },\n    {\n      label: \"Customs Clearance\",\n      status: completedSteps.includes(\"Customs Clearance\") ? \n        (currentStep === \"Customs Clearance\" ? \"active\" : \"completed\") : \"pending\",\n    },\n    {\n      label: `Delivered${destination ? ` to ${destination}` : \"\"}`,\n      status: completedSteps.includes(\"Delivered\") ? \"active\" : \"pending\",\n    },\n  ];\n\n  return (\n    <Card data-testid=\"card-shipment-timeline\">\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Shipment Progress</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"relative\">\n          {/* Timeline line */}\n          <div className=\"absolute left-4 top-0 bottom-0 w-0.5 bg-border\" />\n          \n          <div className=\"space-y-6\">\n            {allSteps.map((step, index) => (\n              <div key={index} className=\"relative flex items-start gap-4\" data-testid={`timeline-step-${index}`}>\n                {/* Step indicator */}\n                <div className={cn(\n                  \"relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2\",\n                  step.status === \"completed\" && \"bg-primary border-primary text-primary-foreground\",\n                  step.status === \"active\" && \"bg-primary/20 border-primary text-primary animate-pulse\",\n                  step.status === \"pending\" && \"bg-background border-border text-muted-foreground\"\n                )}>\n                  {step.status === \"completed\" && <Check className=\"h-4 w-4\" />}\n                  {step.status === \"active\" && <Clock className=\"h-4 w-4\" />}\n                  {step.status === \"pending\" && <Circle className=\"h-4 w-4\" />}\n                </div>\n\n                {/* Step content */}\n                <div className=\"flex-1 pt-0.5\">\n                  <p className={cn(\n                    \"font-medium\",\n                    step.status === \"completed\" && \"text-foreground\",\n                    step.status === \"active\" && \"text-primary\",\n                    step.status === \"pending\" && \"text-muted-foreground\"\n                  )}>\n                    {step.label}\n                  </p>\n                  {step.timestamp && (\n                    <p className=\"text-xs text-muted-foreground mt-1\">{step.timestamp}</p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3811},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useEffect, useState } from 'react';\n\nexport default function ThemeToggle() {\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null;\n    const initialTheme = savedTheme || 'light';\n    setTheme(initialTheme);\n    document.documentElement.classList.toggle('dark', initialTheme === 'dark');\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    setTheme(newTheme);\n    localStorage.setItem('theme', newTheme);\n    document.documentElement.classList.toggle('dark', newTheme === 'dark');\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === 'light' ? (\n        <Moon className=\"h-5 w-5\" />\n      ) : (\n        <Sun className=\"h-5 w-5\" />\n      )}\n    </Button>\n  );\n}\n","size_bytes":1032},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/examples/TradeFinancePanel.tsx":{"content":"import TradeFinancePanel from '../TradeFinancePanel';\nimport { mockTradeFinance } from '@/lib/mockData';\n\nexport default function TradeFinancePanelExample() {\n  return (\n    <div className=\"max-w-2xl p-6\">\n      <TradeFinancePanel {...mockTradeFinance} />\n    </div>\n  );\n}\n","size_bytes":274},"client/src/components/examples/DashboardStats.tsx":{"content":"import DashboardStats from '../DashboardStats';\n\nexport default function DashboardStatsExample() {\n  return (\n    <div className=\"p-6\">\n      <DashboardStats />\n    </div>\n  );\n}\n","size_bytes":179},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2210},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/AppSidebar.tsx":{"content":"import {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from '@/components/ui/sidebar';\nimport { \n  LayoutDashboard, \n  FileText, \n  Ship, \n  Building2, \n  Activity,\n  PlusCircle,\n  Settings,\n  Anchor,\n} from 'lucide-react';\nimport { Link, useLocation } from 'wouter';\n\nconst navigationItems = [\n  {\n    title: 'Dashboard',\n    url: '/',\n    icon: LayoutDashboard,\n  },\n  {\n    title: 'Bills of Lading',\n    url: '/documents',\n    icon: FileText,\n  },\n  {\n    title: 'Shipment Tracking',\n    url: '/tracking',\n    icon: Ship,\n  },\n  {\n    title: 'Trade Finance',\n    url: '/finance',\n    icon: Building2,\n  },\n  {\n    title: 'Blockchain Transactions',\n    url: '/transactions',\n    icon: Activity,\n  },\n];\n\nconst actions = [\n  {\n    title: 'Create Bill of Lading',\n    url: '/create',\n    icon: PlusCircle,\n  },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"p-2 bg-primary rounded-md\">\n            <Anchor className=\"h-5 w-5 text-primary-foreground\" />\n          </div>\n          <div>\n            <h2 className=\"font-bold text-lg\">ShipLedger</h2>\n            <p className=\"text-xs text-muted-foreground\">Blockchain Platform</p>\n          </div>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {navigationItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url}>\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel>Quick Actions</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {actions.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild>\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4\">\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild>\n              <Link href=\"/settings\">\n                <Settings className=\"h-4 w-4\" />\n                <span>Settings</span>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":3237},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/pages/ShipperView.tsx":{"content":"import ShippingInstructionsForm from \"@/components/ShippingInstructionsForm\";\nimport DocumentCard from \"@/components/DocumentCard\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus } from \"lucide-react\";\nimport { useState } from \"react\";\n\nexport default function ShipperView() {\n  const [showForm, setShowForm] = useState(false);\n\n  const mockDocuments = [\n    {\n      id: '1',\n      bolNumber: 'BOL-2024-001',\n      shipperName: 'Global Logistics Co.',\n      status: 'in_transit' as const,\n      date: 'Jan 10, 2024',\n      isBlockchainVerified: true,\n    },\n    {\n      id: '2',\n      bolNumber: 'BOL-2024-002',\n      shipperName: 'Global Logistics Co.',\n      status: 'pending_approval' as const,\n      date: 'Jan 12, 2024',\n      isBlockchainVerified: false,\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-semibold\" data-testid=\"heading-shipper\">Shipper Portal</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Upload shipping instructions and track your shipments\n          </p>\n        </div>\n        <Button \n          onClick={() => {\n            console.log('New instruction button clicked');\n            setShowForm(!showForm);\n          }}\n          data-testid=\"button-new-instruction\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          New Shipping Instruction\n        </Button>\n      </div>\n\n      {showForm && (\n        <ShippingInstructionsForm \n          onSubmit={(data) => {\n            console.log('Shipping instructions submitted:', data);\n            alert('Shipping instructions submitted successfully! Transaction recorded on blockchain.');\n            setShowForm(false);\n          }}\n        />\n      )}\n\n      {!showForm && (\n        <div>\n          <h2 className=\"text-xl font-semibold mb-4\">Your Documents</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {mockDocuments.map((doc) => (\n              <DocumentCard key={doc.id} {...doc} />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":2174},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ActivityFeed.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Clock, FileText, Ship, CheckCircle, AlertCircle } from \"lucide-react\";\n\ninterface Activity {\n  id: string;\n  actor: string;\n  action: string;\n  target: string;\n  timestamp: string;\n  txHash?: string;\n  type: \"upload\" | \"draft\" | \"approve\" | \"share\" | \"issue\";\n}\n\ninterface ActivityFeedProps {\n  activities: Activity[];\n}\n\nconst activityIcons = {\n  upload: FileText,\n  draft: FileText,\n  approve: CheckCircle,\n  share: Ship,\n  issue: AlertCircle,\n};\n\nexport default function ActivityFeed({ activities }: ActivityFeedProps) {\n  return (\n    <Card data-testid=\"card-activity-feed\">\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Recent Activity</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <ScrollArea className=\"h-[400px] pr-4\">\n          <div className=\"space-y-4\">\n            {activities.map((activity) => {\n              const Icon = activityIcons[activity.type];\n              return (\n                <div key={activity.id} className=\"flex gap-4 border-l-2 border-border pl-4\" data-testid={`activity-${activity.id}`}>\n                  <Avatar className=\"h-8 w-8 mt-1\">\n                    <AvatarFallback className=\"text-xs\">\n                      {activity.actor.substring(0, 2).toUpperCase()}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"flex-1 space-y-1\">\n                    <div className=\"flex items-start gap-2\">\n                      <Icon className=\"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0\" />\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm\">\n                          <span className=\"font-medium\">{activity.actor}</span>\n                          {' '}{activity.action}{' '}\n                          <span className=\"font-medium\">{activity.target}</span>\n                        </p>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <Clock className=\"h-3 w-3 text-muted-foreground\" />\n                          <span className=\"text-xs text-muted-foreground\">{activity.timestamp}</span>\n                        </div>\n                        {activity.txHash && (\n                          <p className=\"text-xs font-mono text-muted-foreground mt-1\" title={activity.txHash}>\n                            Tx: {activity.txHash.substring(0, 10)}...{activity.txHash.substring(activity.txHash.length - 8)}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2890},"client/src/components/examples/AppSidebar.tsx":{"content":"import { AppSidebar } from '../AppSidebar';\nimport { SidebarProvider } from '@/components/ui/sidebar';\n\nexport default function AppSidebarExample() {\n  return (\n    <SidebarProvider>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n        <div className=\"flex-1 p-6\">\n          <p className=\"text-muted-foreground\">Main content area</p>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":415},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer, json, jsonb, index } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table - merged with Replit Auth requirements\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  role: text(\"role\").notNull().default('shipper'),\n  company: text(\"company\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const billsOfLading = pgTable(\"bills_of_lading\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  blNumber: text(\"bl_number\").notNull().unique(),\n  shipper: text(\"shipper\").notNull(),\n  consignee: text(\"consignee\").notNull(),\n  notifyParty: text(\"notify_party\"),\n  vesselName: text(\"vessel_name\").notNull(),\n  voyageNumber: text(\"voyage_number\").notNull(),\n  portOfLoading: text(\"port_of_loading\").notNull(),\n  portOfDischarge: text(\"port_of_discharge\").notNull(),\n  placeOfReceipt: text(\"place_of_receipt\"),\n  placeOfDelivery: text(\"place_of_delivery\"),\n  cargoDescription: text(\"cargo_description\").notNull(),\n  containerNumbers: text(\"container_numbers\"),\n  grossWeight: text(\"gross_weight\"),\n  measurement: text(\"measurement\"),\n  numberOfPackages: integer(\"number_of_packages\"),\n  freightTerms: text(\"freight_terms\"),\n  status: text(\"status\").notNull(),\n  blockchainHash: text(\"blockchain_hash\"),\n  blockchainStatus: text(\"blockchain_status\"),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  issuedDate: timestamp(\"issued_date\"),\n});\n\nexport const shipments = pgTable(\"shipments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  blId: varchar(\"bl_id\").references(() => billsOfLading.id),\n  currentLocation: text(\"current_location\"),\n  currentStatus: text(\"current_status\").notNull(),\n  estimatedArrival: timestamp(\"estimated_arrival\"),\n  actualArrival: timestamp(\"actual_arrival\"),\n  progress: integer(\"progress\"),\n  events: json(\"events\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const tradeFinance = pgTable(\"trade_finance\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  blId: varchar(\"bl_id\").references(() => billsOfLading.id),\n  lcNumber: text(\"lc_number\"),\n  bank: text(\"bank\"),\n  amount: text(\"amount\"),\n  currency: text(\"currency\"),\n  paymentStatus: text(\"payment_status\").notNull(),\n  milestones: json(\"milestones\"),\n  smartContractAddress: text(\"smart_contract_address\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const transactions = pgTable(\"transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  transactionHash: text(\"transaction_hash\").unique(),\n  blockNumber: text(\"block_number\"),\n  from: text(\"from\"),\n  to: text(\"to\"),\n  gasUsed: text(\"gas_used\"),\n  status: text(\"status\"),\n  type: text(\"type\").notNull(),\n  userId: varchar(\"user_id\").references(() => users.id),\n  details: text(\"details\"),\n  relatedId: varchar(\"related_id\"),\n  timestamp: timestamp(\"timestamp\").defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertBillOfLadingSchema = createInsertSchema(billsOfLading).omit({ id: true, createdAt: true });\nexport const insertShipmentSchema = createInsertSchema(shipments).omit({ id: true, updatedAt: true });\nexport const insertTradeFinanceSchema = createInsertSchema(tradeFinance).omit({ id: true, createdAt: true });\nexport const insertTransactionSchema = createInsertSchema(transactions).omit({ id: true, timestamp: true });\n\nexport type UpsertUser = typeof users.$inferInsert;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertBillOfLading = z.infer<typeof insertBillOfLadingSchema>;\nexport type BillOfLading = typeof billsOfLading.$inferSelect;\nexport type InsertShipment = z.infer<typeof insertShipmentSchema>;\nexport type Shipment = typeof shipments.$inferSelect;\nexport type InsertTradeFinance = z.infer<typeof insertTradeFinanceSchema>;\nexport type TradeFinance = typeof tradeFinance.$inferSelect;\nexport type InsertTransaction = z.infer<typeof insertTransactionSchema>;\nexport type Transaction = typeof transactions.$inferSelect;\n","size_bytes":4850},"contracts/TradeFinance.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\n/**\n * @title TradeFinance\n * @dev Smart contract for automated trade finance and payment workflows\n * @notice Handles Letter of Credit, payment milestones, and automated settlements\n */\ncontract TradeFinance {\n    \n    // Struct for Letter of Credit\n    struct LetterOfCredit {\n        string lcNumber;\n        address issuer;          // Bank issuing the LC\n        address beneficiary;     // Seller/Exporter\n        address applicant;       // Buyer/Importer\n        uint256 amount;\n        uint256 issuedDate;\n        uint256 expiryDate;\n        LCStatus status;\n        bool exists;\n    }\n    \n    // Struct for Payment Milestone\n    struct PaymentMilestone {\n        string name;\n        uint256 percentage;      // Percentage of total amount (0-100)\n        MilestoneStatus status;\n        uint256 completedAt;\n        string documentReference; // Reference to required document (e.g., BL number)\n    }\n    \n    // Enum for LC status\n    enum LCStatus {\n        Draft,\n        Issued,\n        DocumentsPresented,\n        UnderReview,\n        Accepted,\n        Paid,\n        Expired,\n        Cancelled\n    }\n    \n    // Enum for Milestone status\n    enum MilestoneStatus {\n        Pending,\n        InProgress,\n        Completed,\n        Failed\n    }\n    \n    // Mapping from LC number to Letter of Credit\n    mapping(string => LetterOfCredit) private lettersOfCredit;\n    \n    // Mapping from LC number to array of milestones\n    mapping(string => PaymentMilestone[]) private lcMilestones;\n    \n    // Mapping from LC number to released amount\n    mapping(string => uint256) private releasedAmounts;\n    \n    // Array of all LC numbers\n    string[] private lcNumbers;\n    \n    // Events\n    event LetterOfCreditIssued(\n        string indexed lcNumber,\n        address indexed issuer,\n        address indexed beneficiary,\n        uint256 amount,\n        uint256 timestamp\n    );\n    \n    event DocumentsPresented(\n        string indexed lcNumber,\n        address indexed presenter,\n        uint256 timestamp\n    );\n    \n    event LCStatusUpdated(\n        string indexed lcNumber,\n        LCStatus newStatus,\n        uint256 timestamp\n    );\n    \n    event MilestoneCompleted(\n        string indexed lcNumber,\n        uint256 milestoneIndex,\n        uint256 amount,\n        uint256 timestamp\n    );\n    \n    event PaymentReleased(\n        string indexed lcNumber,\n        address indexed beneficiary,\n        uint256 amount,\n        uint256 timestamp\n    );\n    \n    event LCExpired(\n        string indexed lcNumber,\n        uint256 timestamp\n    );\n    \n    // Modifiers\n    modifier onlyIssuer(string memory _lcNumber) {\n        require(\n            lettersOfCredit[_lcNumber].issuer == msg.sender,\n            \"Only issuer can perform this action\"\n        );\n        _;\n    }\n    \n    modifier onlyBeneficiary(string memory _lcNumber) {\n        require(\n            lettersOfCredit[_lcNumber].beneficiary == msg.sender,\n            \"Only beneficiary can perform this action\"\n        );\n        _;\n    }\n    \n    modifier lcExists(string memory _lcNumber) {\n        require(lettersOfCredit[_lcNumber].exists, \"Letter of Credit does not exist\");\n        _;\n    }\n    \n    modifier notExpired(string memory _lcNumber) {\n        require(\n            block.timestamp <= lettersOfCredit[_lcNumber].expiryDate,\n            \"Letter of Credit has expired\"\n        );\n        _;\n    }\n    \n    /**\n     * @dev Issue a new Letter of Credit\n     * @param _lcNumber Unique LC number\n     * @param _beneficiary Address of the beneficiary (seller)\n     * @param _applicant Address of the applicant (buyer)\n     * @param _amount LC amount in wei\n     * @param _expiryDate Expiry timestamp\n     */\n    function issueLetterOfCredit(\n        string memory _lcNumber,\n        address _beneficiary,\n        address _applicant,\n        uint256 _amount,\n        uint256 _expiryDate\n    ) public payable {\n        require(!lettersOfCredit[_lcNumber].exists, \"LC already exists\");\n        require(_beneficiary != address(0), \"Invalid beneficiary\");\n        require(_applicant != address(0), \"Invalid applicant\");\n        require(_amount > 0, \"Amount must be greater than 0\");\n        require(_expiryDate > block.timestamp, \"Expiry date must be in future\");\n        require(msg.value >= _amount, \"Insufficient payment\");\n        \n        LetterOfCredit memory newLC = LetterOfCredit({\n            lcNumber: _lcNumber,\n            issuer: msg.sender,\n            beneficiary: _beneficiary,\n            applicant: _applicant,\n            amount: _amount,\n            issuedDate: block.timestamp,\n            expiryDate: _expiryDate,\n            status: LCStatus.Issued,\n            exists: true\n        });\n        \n        lettersOfCredit[_lcNumber] = newLC;\n        lcNumbers.push(_lcNumber);\n        \n        emit LetterOfCreditIssued(\n            _lcNumber,\n            msg.sender,\n            _beneficiary,\n            _amount,\n            block.timestamp\n        );\n    }\n    \n    /**\n     * @dev Add a payment milestone to an LC\n     * @param _lcNumber LC number\n     * @param _name Milestone name\n     * @param _percentage Percentage of total amount\n     * @param _documentReference Reference to required document\n     */\n    function addMilestone(\n        string memory _lcNumber,\n        string memory _name,\n        uint256 _percentage,\n        string memory _documentReference\n    ) public onlyIssuer(_lcNumber) lcExists(_lcNumber) {\n        require(_percentage > 0 && _percentage <= 100, \"Invalid percentage\");\n        \n        PaymentMilestone memory milestone = PaymentMilestone({\n            name: _name,\n            percentage: _percentage,\n            status: MilestoneStatus.Pending,\n            completedAt: 0,\n            documentReference: _documentReference\n        });\n        \n        lcMilestones[_lcNumber].push(milestone);\n    }\n    \n    /**\n     * @dev Present documents for LC payment\n     * @param _lcNumber LC number\n     */\n    function presentDocuments(string memory _lcNumber)\n        public\n        onlyBeneficiary(_lcNumber)\n        lcExists(_lcNumber)\n        notExpired(_lcNumber)\n    {\n        require(\n            lettersOfCredit[_lcNumber].status == LCStatus.Issued,\n            \"LC must be in Issued status\"\n        );\n        \n        lettersOfCredit[_lcNumber].status = LCStatus.DocumentsPresented;\n        \n        emit DocumentsPresented(_lcNumber, msg.sender, block.timestamp);\n        emit LCStatusUpdated(_lcNumber, LCStatus.DocumentsPresented, block.timestamp);\n    }\n    \n    /**\n     * @dev Accept presented documents\n     * @param _lcNumber LC number\n     */\n    function acceptDocuments(string memory _lcNumber)\n        public\n        onlyIssuer(_lcNumber)\n        lcExists(_lcNumber)\n        notExpired(_lcNumber)\n    {\n        require(\n            lettersOfCredit[_lcNumber].status == LCStatus.DocumentsPresented ||\n            lettersOfCredit[_lcNumber].status == LCStatus.UnderReview,\n            \"Documents must be presented first\"\n        );\n        \n        lettersOfCredit[_lcNumber].status = LCStatus.Accepted;\n        \n        emit LCStatusUpdated(_lcNumber, LCStatus.Accepted, block.timestamp);\n    }\n    \n    /**\n     * @dev Complete a milestone and trigger payment\n     * @param _lcNumber LC number\n     * @param _milestoneIndex Index of the milestone\n     */\n    function completeMilestone(\n        string memory _lcNumber,\n        uint256 _milestoneIndex\n    ) public onlyIssuer(_lcNumber) lcExists(_lcNumber) notExpired(_lcNumber) {\n        require(_milestoneIndex < lcMilestones[_lcNumber].length, \"Invalid milestone\");\n        require(\n            lcMilestones[_lcNumber][_milestoneIndex].status == MilestoneStatus.Pending ||\n            lcMilestones[_lcNumber][_milestoneIndex].status == MilestoneStatus.InProgress,\n            \"Milestone already completed or failed\"\n        );\n        \n        PaymentMilestone storage milestone = lcMilestones[_lcNumber][_milestoneIndex];\n        milestone.status = MilestoneStatus.Completed;\n        milestone.completedAt = block.timestamp;\n        \n        uint256 paymentAmount = (lettersOfCredit[_lcNumber].amount * milestone.percentage) / 100;\n        releasedAmounts[_lcNumber] += paymentAmount;\n        \n        emit MilestoneCompleted(_lcNumber, _milestoneIndex, paymentAmount, block.timestamp);\n        \n        // Trigger automatic payment\n        _releasePayment(_lcNumber, paymentAmount);\n    }\n    \n    /**\n     * @dev Internal function to release payment to beneficiary\n     * @param _lcNumber LC number\n     * @param _amount Amount to release\n     */\n    function _releasePayment(string memory _lcNumber, uint256 _amount) internal {\n        address beneficiary = lettersOfCredit[_lcNumber].beneficiary;\n        \n        (bool success, ) = payable(beneficiary).call{value: _amount}(\"\");\n        require(success, \"Payment transfer failed\");\n        \n        emit PaymentReleased(_lcNumber, beneficiary, _amount, block.timestamp);\n        \n        // Check if all milestones completed\n        if (releasedAmounts[_lcNumber] >= lettersOfCredit[_lcNumber].amount) {\n            lettersOfCredit[_lcNumber].status = LCStatus.Paid;\n            emit LCStatusUpdated(_lcNumber, LCStatus.Paid, block.timestamp);\n        }\n    }\n    \n    /**\n     * @dev Cancel an LC (only if no payments released)\n     * @param _lcNumber LC number\n     */\n    function cancelLetterOfCredit(string memory _lcNumber)\n        public\n        onlyIssuer(_lcNumber)\n        lcExists(_lcNumber)\n    {\n        require(releasedAmounts[_lcNumber] == 0, \"Cannot cancel LC with released payments\");\n        require(\n            lettersOfCredit[_lcNumber].status != LCStatus.Paid,\n            \"Cannot cancel paid LC\"\n        );\n        \n        lettersOfCredit[_lcNumber].status = LCStatus.Cancelled;\n        \n        // Refund the issuer\n        uint256 refundAmount = lettersOfCredit[_lcNumber].amount;\n        (bool success, ) = payable(msg.sender).call{value: refundAmount}(\"\");\n        require(success, \"Refund transfer failed\");\n        \n        emit LCStatusUpdated(_lcNumber, LCStatus.Cancelled, block.timestamp);\n    }\n    \n    /**\n     * @dev Mark LC as expired (can be called by anyone after expiry)\n     * @param _lcNumber LC number\n     */\n    function markAsExpired(string memory _lcNumber) public lcExists(_lcNumber) {\n        require(\n            block.timestamp > lettersOfCredit[_lcNumber].expiryDate,\n            \"LC has not expired yet\"\n        );\n        require(\n            lettersOfCredit[_lcNumber].status != LCStatus.Paid &&\n            lettersOfCredit[_lcNumber].status != LCStatus.Cancelled,\n            \"LC already finalized\"\n        );\n        \n        lettersOfCredit[_lcNumber].status = LCStatus.Expired;\n        \n        // Refund remaining amount to issuer\n        uint256 remainingAmount = lettersOfCredit[_lcNumber].amount - releasedAmounts[_lcNumber];\n        if (remainingAmount > 0) {\n            (bool success, ) = payable(lettersOfCredit[_lcNumber].issuer).call{value: remainingAmount}(\"\");\n            require(success, \"Refund transfer failed\");\n        }\n        \n        emit LCExpired(_lcNumber, block.timestamp);\n        emit LCStatusUpdated(_lcNumber, LCStatus.Expired, block.timestamp);\n    }\n    \n    /**\n     * @dev Get Letter of Credit details\n     * @param _lcNumber LC number\n     * @return LetterOfCredit struct\n     */\n    function getLetterOfCredit(string memory _lcNumber)\n        public\n        view\n        lcExists(_lcNumber)\n        returns (LetterOfCredit memory)\n    {\n        return lettersOfCredit[_lcNumber];\n    }\n    \n    /**\n     * @dev Get all milestones for an LC\n     * @param _lcNumber LC number\n     * @return Array of PaymentMilestone\n     */\n    function getMilestones(string memory _lcNumber)\n        public\n        view\n        lcExists(_lcNumber)\n        returns (PaymentMilestone[] memory)\n    {\n        return lcMilestones[_lcNumber];\n    }\n    \n    /**\n     * @dev Get released amount for an LC\n     * @param _lcNumber LC number\n     * @return uint256 Released amount\n     */\n    function getReleasedAmount(string memory _lcNumber)\n        public\n        view\n        lcExists(_lcNumber)\n        returns (uint256)\n    {\n        return releasedAmounts[_lcNumber];\n    }\n    \n    /**\n     * @dev Get total number of LCs\n     * @return uint256 Total count\n     */\n    function getTotalLettersOfCredit() public view returns (uint256) {\n        return lcNumbers.length;\n    }\n}\n","size_bytes":12477},"client/src/components/BillOfLadingCard.tsx":{"content":"import { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Ship, Package, MapPin, CheckCircle2, Clock, FileText, Copy } from 'lucide-react';\nimport { formatAddress } from '@/lib/web3';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface BillOfLadingCardProps {\n  blNumber: string;\n  shipper: string;\n  consignee: string;\n  vesselName: string;\n  portOfLoading: string;\n  portOfDischarge: string;\n  status: string;\n  blockchainStatus?: string | null;\n  blockchainHash?: string | null;\n  cargoDescription: string;\n  onView?: () => void;\n}\n\nexport default function BillOfLadingCard({\n  blNumber,\n  shipper,\n  consignee,\n  vesselName,\n  portOfLoading,\n  portOfDischarge,\n  status,\n  blockchainStatus,\n  blockchainHash,\n  cargoDescription,\n  onView,\n}: BillOfLadingCardProps) {\n  const { toast } = useToast();\n\n  const getStatusColor = (status: string) => {\n    const statusMap: Record<string, string> = {\n      'Draft': 'secondary',\n      'In Transit': 'default',\n      'At Port': 'default',\n      'Customs Clearance': 'default',\n      'Delivered': 'default',\n    };\n    return statusMap[status] || 'secondary';\n  };\n\n  const handleCopyHash = () => {\n    if (blockchainHash) {\n      navigator.clipboard.writeText(blockchainHash);\n      toast({ description: 'Transaction hash copied to clipboard' });\n    }\n  };\n\n  return (\n    <Card className=\"hover-elevate cursor-pointer transition-all\" data-testid={`card-bol-${blNumber}`} onClick={onView}>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <FileText className=\"h-4 w-4 text-primary flex-shrink-0\" />\n              <h3 className=\"font-semibold font-mono text-sm\" data-testid={`text-bl-number-${blNumber}`}>\n                {blNumber}\n              </h3>\n            </div>\n            <p className=\"text-xs text-muted-foreground truncate\">{cargoDescription}</p>\n          </div>\n          <Badge variant={getStatusColor(status)} className=\"flex-shrink-0\">\n            {status}\n          </Badge>\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-3\">\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\n          <div>\n            <div className=\"text-xs text-muted-foreground mb-0.5\">Shipper</div>\n            <div className=\"font-medium truncate\" title={shipper}>{shipper}</div>\n          </div>\n          <div>\n            <div className=\"text-xs text-muted-foreground mb-0.5\">Consignee</div>\n            <div className=\"font-medium truncate\" title={consignee}>{consignee}</div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2 text-sm\">\n          <Ship className=\"h-3.5 w-3.5 text-muted-foreground flex-shrink-0\" />\n          <span className=\"font-medium truncate\">{vesselName}</span>\n        </div>\n\n        <div className=\"flex items-center gap-2 text-xs\">\n          <MapPin className=\"h-3 w-3 text-muted-foreground flex-shrink-0\" />\n          <span className=\"truncate\">{portOfLoading}</span>\n          <span className=\"text-muted-foreground flex-shrink-0\">→</span>\n          <span className=\"truncate\">{portOfDischarge}</span>\n        </div>\n\n        {blockchainHash && (\n          <div className=\"pt-2 border-t flex items-center justify-between gap-2\">\n            <div className=\"flex items-center gap-1.5 min-w-0 flex-1\">\n              {blockchainStatus === 'Confirmed' ? (\n                <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600 flex-shrink-0\" />\n              ) : (\n                <Clock className=\"h-3.5 w-3.5 text-yellow-600 flex-shrink-0\" />\n              )}\n              <span className=\"text-xs font-mono truncate\" title={blockchainHash}>\n                {formatAddress(blockchainHash)}\n              </span>\n            </div>\n            <Button \n              size=\"icon\" \n              variant=\"ghost\" \n              className=\"h-6 w-6 flex-shrink-0\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleCopyHash();\n              }}\n              data-testid=\"button-copy-hash\"\n            >\n              <Copy className=\"h-3 w-3\" />\n            </Button>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4403},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}\n","size_bytes":307},"client/src/components/ShipmentTracker.tsx":{"content":"import { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { MapPin, Ship, CheckCircle, Clock, Package } from 'lucide-react';\nimport { format } from 'date-fns';\n\ninterface ShipmentEvent {\n  timestamp: Date;\n  location: string;\n  status: string;\n  description: string;\n}\n\ninterface ShipmentTrackerProps {\n  vesselName: string;\n  currentLocation: string;\n  currentStatus: string;\n  progress: number;\n  estimatedArrival?: Date;\n  events: ShipmentEvent[];\n}\n\nexport default function ShipmentTracker({\n  vesselName,\n  currentLocation,\n  currentStatus,\n  progress,\n  estimatedArrival,\n  events,\n}: ShipmentTrackerProps) {\n  return (\n    <Card data-testid=\"card-shipment-tracker\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <Ship className=\"h-5 w-5 text-primary\" />\n              <h3 className=\"font-semibold\">{vesselName}</h3>\n            </div>\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <MapPin className=\"h-3.5 w-3.5\" />\n              <span>{currentLocation}</span>\n            </div>\n          </div>\n          <Badge variant=\"default\">{currentStatus}</Badge>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-4\">\n        <div>\n          <div className=\"flex justify-between text-sm mb-2\">\n            <span className=\"text-muted-foreground\">Shipment Progress</span>\n            <span className=\"font-semibold\">{progress}%</span>\n          </div>\n          <Progress value={progress} className=\"h-2\" />\n          {estimatedArrival && (\n            <div className=\"flex items-center gap-1.5 mt-2 text-xs text-muted-foreground\">\n              <Clock className=\"h-3 w-3\" />\n              <span>ETA: {format(estimatedArrival, 'MMM dd, yyyy HH:mm')}</span>\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-3\">\n          <h4 className=\"text-sm font-semibold\">Tracking History</h4>\n          <div className=\"space-y-3\">\n            {events.map((event, index) => (\n              <div \n                key={index} \n                className=\"flex gap-3\"\n                data-testid={`event-${index}`}\n              >\n                <div className=\"flex flex-col items-center\">\n                  <div className={`rounded-full p-1 ${index === 0 ? 'bg-primary' : 'bg-muted'}`}>\n                    {index === 0 ? (\n                      <Package className=\"h-3 w-3 text-primary-foreground\" />\n                    ) : (\n                      <CheckCircle className=\"h-3 w-3 text-muted-foreground\" />\n                    )}\n                  </div>\n                  {index < events.length - 1 && (\n                    <div className=\"w-px h-full bg-border mt-1\" />\n                  )}\n                </div>\n                <div className=\"flex-1 pb-3\">\n                  <div className=\"flex items-start justify-between gap-2 mb-0.5\">\n                    <span className=\"font-medium text-sm\">{event.status}</span>\n                    <span className=\"text-xs text-muted-foreground flex-shrink-0\">\n                      {format(event.timestamp, 'MMM dd, HH:mm')}\n                    </span>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground mb-0.5\">{event.location}</div>\n                  <div className=\"text-xs\">{event.description}</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3694},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/examples/StatusBadge.tsx":{"content":"import StatusBadge from '../StatusBadge';\n\nexport default function StatusBadgeExample() {\n  return (\n    <div className=\"flex flex-wrap gap-2\">\n      <StatusBadge status=\"draft\" />\n      <StatusBadge status=\"pending_approval\" />\n      <StatusBadge status=\"in_transit\" />\n      <StatusBadge status=\"at_port\" />\n      <StatusBadge status=\"customs_clearance\" />\n      <StatusBadge status=\"delivered\" />\n      <StatusBadge status=\"issue\" />\n      <StatusBadge status=\"blockchain_verified\" />\n    </div>\n  );\n}\n","size_bytes":506},"client/src/components/examples/ActivityFeed.tsx":{"content":"import ActivityFeed from '../ActivityFeed';\n\nexport default function ActivityFeedExample() {\n  const mockActivities = [\n    {\n      id: '1',\n      actor: 'Global Logistics Co.',\n      action: 'uploaded shipping instructions for',\n      target: 'BOL-2024-001',\n      timestamp: '2 minutes ago',\n      txHash: '0x1a2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t',\n      type: 'upload' as const,\n    },\n    {\n      id: '2',\n      actor: 'Ocean Freight Ltd.',\n      action: 'drafted Bill of Lading for',\n      target: 'Container MSCU1234567',\n      timestamp: '15 minutes ago',\n      txHash: '0x9s8r7q6p5o4n3m2l1k0j9i8h7g6f5e4d3c2b1a',\n      type: 'draft' as const,\n    },\n    {\n      id: '3',\n      actor: 'Port of Singapore',\n      action: 'approved document access for',\n      target: 'BOL-2024-002',\n      timestamp: '1 hour ago',\n      type: 'approve' as const,\n    },\n    {\n      id: '4',\n      actor: 'Customs Agency',\n      action: 'shared clearance status for',\n      target: 'Shipment SH-45678',\n      timestamp: '3 hours ago',\n      txHash: '0xabcdef1234567890abcdef1234567890abcdef12',\n      type: 'share' as const,\n    },\n    {\n      id: '5',\n      actor: 'System',\n      action: 'flagged potential delay for',\n      target: 'Container MSCU7654321',\n      timestamp: '5 hours ago',\n      type: 'issue' as const,\n    },\n  ];\n\n  return <ActivityFeed activities={mockActivities} />;\n}\n","size_bytes":1383},"client/src/components/examples/ThemeToggle.tsx":{"content":"import ThemeToggle from '../ThemeToggle';\n\nexport default function ThemeToggleExample() {\n  return (\n    <div className=\"p-6\">\n      <ThemeToggle />\n    </div>\n  );\n}\n","size_bytes":167},"client/src/pages/BlockchainExplorer.tsx":{"content":"import BlockchainTransactionLog from \"@/components/BlockchainTransactionLog\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CheckCircle2, Database } from \"lucide-react\";\n\nexport default function BlockchainExplorer() {\n  const mockTransactions = [\n    {\n      id: '1',\n      txHash: '0x1a2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z',\n      eventType: 'Shipping Instructions Uploaded',\n      timestamp: '2024-01-10 14:32:18',\n      blockNumber: 12345678,\n      gasUsed: '21,000',\n    },\n    {\n      id: '2',\n      txHash: '0x9s8r7q6p5o4n3m2l1k0j9i8h7g6f5e4d3c2b1a0z9y8x7w6v5u4t',\n      eventType: 'Bill of Lading Created',\n      timestamp: '2024-01-10 15:45:22',\n      blockNumber: 12345690,\n      gasUsed: '35,000',\n    },\n    {\n      id: '3',\n      txHash: '0xabcdef1234567890abcdef1234567890abcdef1234567890abcd',\n      eventType: 'Document Shared with Customs',\n      timestamp: '2024-01-10 16:12:05',\n      blockNumber: 12345702,\n      gasUsed: '28,500',\n    },\n    {\n      id: '4',\n      txHash: '0x567890abcdef1234567890abcdef1234567890abcdef12345678',\n      eventType: 'Port Access Granted',\n      timestamp: '2024-01-10 17:20:33',\n      blockNumber: 12345715,\n      gasUsed: '22,800',\n    },\n    {\n      id: '5',\n      txHash: '0xfedcba9876543210fedcba9876543210fedcba9876543210fedc',\n      eventType: 'Shipment Status Updated',\n      timestamp: '2024-01-11 09:15:44',\n      blockNumber: 12345730,\n      gasUsed: '19,200',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-semibold\" data-testid=\"heading-blockchain\">Blockchain Explorer</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          View all transactions recorded on the BlockDAG testnet\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <p className=\"text-sm font-medium text-muted-foreground\">Network Status</p>\n            <Database className=\"h-5 w-5 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-2 w-2 rounded-full bg-green-500\"></div>\n              <Badge variant=\"outline\">Connected</Badge>\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-2\">BlockDAG Testnet</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <p className=\"text-sm font-medium text-muted-foreground\">Total Transactions</p>\n            <CheckCircle2 className=\"h-5 w-5 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">156</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">All verified</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <p className=\"text-sm font-medium text-muted-foreground\">Latest Block</p>\n            <Database className=\"h-5 w-5 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">12,345,730</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">2 minutes ago</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <BlockchainTransactionLog transactions={mockTransactions} />\n    </div>\n  );\n}\n","size_bytes":3654},"client/src/pages/Transactions.tsx":{"content":"import TransactionList from '@/components/TransactionList';\nimport BlockchainStatus from '@/components/BlockchainStatus';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Activity, Zap, Database } from 'lucide-react';\nimport { mockTransactions } from '@/lib/mockData';\n\nexport default function Transactions() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-semibold mb-2\">Blockchain Transactions</h1>\n        <p className=\"text-muted-foreground\">\n          Monitor all blockchain activities and transaction history\n        </p>\n      </div>\n\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-primary/10 rounded-md\">\n                <Activity className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Total Transactions</p>\n                <p className=\"text-2xl font-bold\">1,247</p>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">All-time on BlockDAG</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-primary/10 rounded-md\">\n                <Zap className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Avg. Confirmation</p>\n                <p className=\"text-2xl font-bold\">2.3s</p>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">BlockDAG speed advantage</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-primary/10 rounded-md\">\n                <Database className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Total Gas Saved</p>\n                <p className=\"text-2xl font-bold\">$8.2K</p>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">vs Ethereum mainnet</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <BlockchainStatus />\n\n      <TransactionList transactions={mockTransactions} />\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"text-center\">\n            <h3 className=\"font-semibold mb-2\">BlockDAG Network Integration</h3>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              All transactions are processed on BlockDAG's EVM-compatible network with superior speed and lower fees\n            </p>\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-muted rounded-md text-sm\">\n              <span className=\"text-muted-foreground\">RPC Endpoint:</span>\n              <code className=\"font-mono\">https://ide.awakening.bdagscan.com/</code>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3226},"client/src/components/examples/DocumentCard.tsx":{"content":"import DocumentCard from '../DocumentCard';\n\nexport default function DocumentCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-6xl\">\n      <DocumentCard\n        id=\"1\"\n        bolNumber=\"BOL-2024-001\"\n        shipperName=\"Global Logistics Co.\"\n        status=\"in_transit\"\n        date=\"Jan 10, 2024\"\n        isBlockchainVerified\n      />\n      <DocumentCard\n        id=\"2\"\n        bolNumber=\"BOL-2024-002\"\n        shipperName=\"Ocean Freight Ltd.\"\n        status=\"pending_approval\"\n        date=\"Jan 12, 2024\"\n        isBlockchainVerified={false}\n      />\n      <DocumentCard\n        id=\"3\"\n        bolNumber=\"BOL-2024-003\"\n        shipperName=\"International Shipping Inc.\"\n        status=\"delivered\"\n        date=\"Jan 8, 2024\"\n        isBlockchainVerified\n      />\n    </div>\n  );\n}\n","size_bytes":839},"client/src/components/TransactionList.tsx":{"content":"import { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Activity, ExternalLink, Copy, CheckCircle2, Clock } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { formatAddress } from '@/lib/web3';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface Transaction {\n  id: string;\n  transactionHash: string;\n  blockNumber: string;\n  from: string;\n  to: string;\n  gasUsed: string;\n  status: string;\n  type: string;\n  timestamp: Date;\n}\n\ninterface TransactionListProps {\n  transactions: Transaction[];\n}\n\nexport default function TransactionList({ transactions }: TransactionListProps) {\n  const { toast } = useToast();\n\n  const handleCopy = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({ description: 'Copied to clipboard' });\n  };\n\n  return (\n    <Card data-testid=\"card-transaction-list\">\n      <CardHeader>\n        <div className=\"flex items-center gap-2\">\n          <Activity className=\"h-5 w-5 text-primary\" />\n          <h3 className=\"font-semibold\">Blockchain Transactions</h3>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {transactions.map((tx, index) => (\n            <div\n              key={tx.id}\n              className=\"p-3 border rounded-md hover-elevate\"\n              data-testid={`transaction-${index}`}\n            >\n              <div className=\"flex items-start justify-between gap-3 mb-2\">\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      {tx.type}\n                    </Badge>\n                    {tx.status === 'Confirmed' ? (\n                      <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600\" />\n                    ) : (\n                      <Clock className=\"h-3.5 w-3.5 text-yellow-600\" />\n                    )}\n                    <span className=\"text-xs text-muted-foreground\">{tx.status}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-mono text-xs truncate\" title={tx.transactionHash}>\n                      {formatAddress(tx.transactionHash)}\n                    </span>\n                    <Button\n                      size=\"icon\"\n                      variant=\"ghost\"\n                      className=\"h-5 w-5\"\n                      onClick={() => handleCopy(tx.transactionHash)}\n                      data-testid=\"button-copy-tx\"\n                    >\n                      <Copy className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n                </div>\n                <span className=\"text-xs text-muted-foreground flex-shrink-0\">\n                  {format(tx.timestamp, 'MMM dd, HH:mm')}\n                </span>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3 text-xs\">\n                <div>\n                  <span className=\"text-muted-foreground\">Block: </span>\n                  <span className=\"font-mono\">#{tx.blockNumber}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground\">Gas: </span>\n                  <span className=\"font-mono\">{parseInt(tx.gasUsed).toLocaleString()}</span>\n                </div>\n                <div className=\"col-span-2\">\n                  <span className=\"text-muted-foreground\">From: </span>\n                  <span className=\"font-mono\">{formatAddress(tx.from)}</span>\n                </div>\n                <div className=\"col-span-2\">\n                  <span className=\"text-muted-foreground\">To: </span>\n                  <span className=\"font-mono\">{formatAddress(tx.to)}</span>\n                </div>\n              </div>\n\n              <div className=\"mt-2 pt-2 border-t\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-7 text-xs gap-1\"\n                  data-testid=\"button-view-explorer\"\n                >\n                  <ExternalLink className=\"h-3 w-3\" />\n                  View on BlockDAG Explorer\n                </Button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4367},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723}},"version":2}